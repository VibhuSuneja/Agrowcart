(globalThis.TURBOPACK||(globalThis.TURBOPACK=[])).push(["object"==typeof document?document.currentScript:void 0,565417,e=>{"use strict";var t=e.i(843476),s=e.i(271645),i=e.i(846932),a=e.i(421849),r=e.i(488844),n=e.i(715788),l=e.i(761911),c=e.i(475254);let d=(0,c.default)("layout-dashboard",[["rect",{width:"7",height:"9",x:"3",y:"3",rx:"1",key:"10lvy0"}],["rect",{width:"7",height:"5",x:"14",y:"3",rx:"1",key:"16une8"}],["rect",{width:"7",height:"9",x:"14",y:"12",rx:"1",key:"1hutg5"}],["rect",{width:"7",height:"5",x:"3",y:"16",rx:"1",key:"ldoo1y"}]]);var o=e.i(87316);let x=(0,c.default)("arrow-up-right",[["path",{d:"M7 7h10v10",key:"1tivn9"}],["path",{d:"M7 17 17 7",key:"1vkiza"}]]),m=(0,c.default)("arrow-down-right",[["path",{d:"m7 7 10 10",key:"1fmybs"}],["path",{d:"M17 7v10H7",key:"6fjiku"}]]);var h=e.i(21218),p=e.i(107233),u=e.i(354385),g=e.i(475225),f=e.i(509694),y=e.i(731195),b=e.i(234239),j=e.i(785183),v=e.i(322787),w=e.i(522016);e.s(["default",0,function({earning:e,stats:c,chartData:N}){let[k,z]=(0,s.useState)("total"),S="today"===k?e.today:"sevenDays"===k?e.sevenDays:e.total,A=["bg-blue-500/10 text-blue-500","bg-green-500/10 text-green-500","bg-amber-500/10 text-amber-500","bg-emerald-500/10 text-emerald-500"],C=(Array.isArray(c)?c:[]).map((e,t)=>({...e,icon:[r.Package,l.Users,n.Truck,a.IndianRupee][t]||r.Package,color:A[t]||A[0],trend:t%2==0?"+12.5%":"+5.2%",isUp:!0}));return(0,t.jsx)("div",{className:"min-h-screen bg-zinc-50 pb-20 pt-[120px]",children:(0,t.jsxs)("div",{className:"w-[95%] md:w-[85%] mx-auto space-y-10",children:[(0,t.jsxs)("div",{className:"flex flex-col md:flex-row md:items-center justify-between gap-6",children:[(0,t.jsxs)("div",{className:"space-y-1",children:[(0,t.jsxs)("div",{className:"flex items-center gap-2 text-green-600 font-bold uppercase tracking-[0.2em] text-[10px]",children:[(0,t.jsx)(d,{size:14}),(0,t.jsx)("span",{children:"Platform Administration"})]}),(0,t.jsx)("h1",{className:"text-4xl font-black text-zinc-900 tracking-tight",children:"Control Center"}),(0,t.jsx)("p",{className:"text-zinc-500 text-sm font-medium",children:"Monitoring millet ecosystem metrics and chain performance."})]}),(0,t.jsxs)("div",{className:"flex flex-wrap items-center gap-3",children:[(0,t.jsx)(w.default,{href:"/admin/view-products",children:(0,t.jsxs)("button",{className:"bg-zinc-900 text-white px-6 py-4 rounded-2xl font-black uppercase tracking-widest text-[10px] flex items-center gap-2 shadow-xl shadow-zinc-900/20 hover:bg-zinc-800 transition-all",children:[(0,t.jsx)(r.Package,{size:14}),"Manage Products"]})}),(0,t.jsx)(w.default,{href:"/admin/manage-orders",children:(0,t.jsxs)("button",{className:"bg-white border border-zinc-200 text-zinc-600 px-6 py-4 rounded-2xl font-black uppercase tracking-widest text-[10px] flex items-center gap-2 shadow-sm hover:border-zinc-900 hover:text-zinc-900 transition-all",children:[(0,t.jsx)(u.ClipboardCheck,{size:14}),"Orders"]})}),(0,t.jsx)(w.default,{href:"/admin/add-product",children:(0,t.jsxs)("button",{className:"bg-green-600 text-white px-6 py-4 rounded-2xl font-black uppercase tracking-widest text-[10px] flex items-center gap-2 shadow-xl shadow-green-600/20 hover:bg-green-700 transition-all",children:[(0,t.jsx)(p.Plus,{size:14}),"New"]})})]}),(0,t.jsx)("div",{className:"flex items-center gap-2 bg-white p-1.5 rounded-2xl shadow-sm border border-zinc-100",children:["today","sevenDays","total"].map(e=>(0,t.jsx)("button",{onClick:()=>z(e),className:`px-6 py-2 rounded-xl text-xs font-black uppercase tracking-wider transition-all ${k===e?"bg-zinc-900 text-white shadow-lg":"text-zinc-400 hover:text-zinc-600 hover:bg-zinc-50"}`,children:"sevenDays"===e?"7 Days":e},e))})]}),(0,t.jsxs)("div",{className:"grid grid-cols-1 lg:grid-cols-3 gap-8",children:[(0,t.jsxs)(i.motion.div,{initial:{opacity:0,scale:.95},animate:{opacity:1,scale:1},className:"lg:col-span-1 bg-zinc-900 p-10 rounded-[3rem] text-white shadow-2xl relative overflow-hidden flex flex-col justify-between min-h-[280px]",children:[(0,t.jsx)("div",{className:"absolute top-0 right-0 w-40 h-40 bg-green-500/10 rounded-full blur-[60px] -mr-20 -mt-20"}),(0,t.jsxs)("div",{children:[(0,t.jsxs)("div",{className:"flex items-center gap-2 text-green-400 font-bold uppercase tracking-widest text-[10px] mb-4",children:[(0,t.jsx)(a.IndianRupee,{size:16}),(0,t.jsx)("span",{children:"Financial Overview"})]}),(0,t.jsx)("h2",{className:"text-zinc-400 text-sm font-medium mb-1",children:"today"===k?"Daily Revenue":"sevenDays"===k?"Weekly Revenue":"Lifetime Revenue"}),(0,t.jsxs)("div",{className:"flex items-baseline gap-2",children:[(0,t.jsxs)("span",{className:"text-5xl font-black tracking-tighter text-white",children:["₹",S.toLocaleString()]}),(0,t.jsxs)("span",{className:"text-green-400 font-bold text-sm bg-green-400/10 px-2 py-0.5 rounded-lg flex items-center gap-0.5",children:[(0,t.jsx)(x,{size:14})," 12%"]})]})]}),(0,t.jsxs)("div",{className:"pt-8 border-t border-white/10 flex items-center justify-between",children:[(0,t.jsxs)("div",{children:[(0,t.jsx)("div",{className:"text-[10px] font-black uppercase text-zinc-500 tracking-widest",children:"Active Scale"}),(0,t.jsx)("div",{className:"text-lg font-bold",children:"100% Load"})]}),(0,t.jsx)(h.Activity,{className:"text-green-400",size:24})]})]}),(0,t.jsxs)(i.motion.div,{initial:{opacity:0,y:20},animate:{opacity:1,y:0},className:"lg:col-span-2 bg-white p-8 rounded-[3rem] shadow-2xl shadow-zinc-900/5 border border-zinc-100",children:[(0,t.jsxs)("div",{className:"flex items-center justify-between mb-8",children:[(0,t.jsxs)("div",{children:[(0,t.jsx)("h3",{className:"text-xl font-black text-zinc-900 tracking-tight",children:"Orders Velocity"}),(0,t.jsx)("p",{className:"text-zinc-400 text-xs font-medium",children:"Daily order frequency for the current week."})]}),(0,t.jsxs)("div",{className:"flex items-center gap-2 bg-zinc-50 px-3 py-1.5 rounded-xl border border-zinc-100",children:[(0,t.jsx)(o.Calendar,{size:14,className:"text-zinc-400"}),(0,t.jsx)("span",{className:"text-[10px] font-black uppercase text-zinc-500",children:"Weekly Stats"})]})]}),(0,t.jsx)("div",{className:"h-[180px] w-full",children:(0,t.jsx)(y.ResponsiveContainer,{width:"100%",height:"100%",children:(0,t.jsxs)(f.BarChart,{data:N||[],children:[(0,t.jsx)(g.Bar,{dataKey:"orders",children:Array.isArray(N)&&N.map((e,s)=>(0,t.jsx)(v.Cell,{fill:s===N.length-1?"#16A34A":"#E4E4E7"},`cell-${s}`))}),(0,t.jsx)(j.XAxis,{dataKey:"day",axisLine:!1,tickLine:!1,tick:{fontSize:10,fontWeight:700,fill:"#A1A1AA"},dy:10}),(0,t.jsx)(b.Tooltip,{cursor:{fill:"transparent"},contentStyle:{borderRadius:"1rem",border:"none",boxShadow:"0 10px 15px -3px rgb(0 0 0 / 0.1)"}})]})})})]})]}),(0,t.jsx)("div",{className:"grid grid-cols-1 sm:grid-cols-2 lg:grid-cols-4 gap-6",children:C.map((e,s)=>{let a=e.icon;return(0,t.jsxs)(i.motion.div,{initial:{opacity:0,y:20},animate:{opacity:1,y:0},transition:{delay:.1*s},whileHover:{y:-5},className:"bg-white border border-zinc-100 shadow-xl shadow-zinc-900/5 rounded-[2.5rem] p-8 flex flex-col gap-6 relative group transition-all",children:[(0,t.jsx)("div",{className:`w-14 h-14 rounded-2xl ${e.color} flex items-center justify-center group-hover:scale-110 transition-transform`,children:(0,t.jsx)(a,{size:28})}),(0,t.jsxs)("div",{children:[(0,t.jsx)("p",{className:"text-zinc-500 text-[10px] font-black uppercase tracking-widest mb-1",children:e.title}),(0,t.jsxs)("div",{className:"flex items-end justify-between",children:[(0,t.jsx)("p",{className:"text-3xl font-black text-zinc-900 tracking-tight",children:e.value.toLocaleString()}),(0,t.jsxs)("div",{className:`flex items-center gap-0.5 text-[10px] font-black ${e.isUp?"text-green-500":"text-red-500"}`,children:[e.isUp?(0,t.jsx)(x,{size:12}):(0,t.jsx)(m,{size:12}),e.trend]})]})]})]},s)})})]})})}],565417)},299613,e=>{"use strict";var t=e.i(843476),s=e.i(13751),i=e.i(581949),a=e.i(271645),r=e.i(155487),n=e.i(770703),l=e.i(761086),c=e.i(514764),d=e.i(929652),o=e.i(88653),x=e.i(846932);let m=function({orderId:e,deliveryBoyId:r}){let[n,m]=(0,a.useState)(""),[h,p]=(0,a.useState)(),u=(0,a.useRef)(null),[g,f]=(0,a.useState)(!1),[y,b]=(0,a.useState)([]);(0,a.useEffect)(()=>{if(!e)return;let t=(0,s.getSocket)();return t.emit("join-room",e),t.on("send-message",t=>{t.roomId===e&&p(e=>[...e,t])}),()=>{t.off("send-message")}},[e]),(0,a.useEffect)(()=>{u.current?.scrollTo({top:u.current.scrollHeight,behavior:"smooth"})},[h]),(0,a.useEffect)(()=>{(async()=>{if(e)try{let t=await i.default.post("/api/chat/messages",{roomId:e});p(t.data)}catch(e){console.log(e)}})()},[e]);let j=async()=>{f(!0);try{let e=h?.filter(e=>e.senderId.toString()!==r)?.at(-1),t=await i.default.post("/api/chat/ai-suggestions",{message:e?.text,role:"delivery_boy"});b(t.data),f(!1)}catch(e){console.log(e),f(!1)}};return(0,t.jsxs)("div",{className:"bg-white rounded-3xl shadow-lg border p-4 h-[430px] flex flex-col",children:[(0,t.jsxs)("div",{className:"flex justify-between items-center mb-3",children:[(0,t.jsx)("span",{className:"font-semibold text-gray-700 text-sm",children:"Quick Replies"}),(0,t.jsxs)(x.motion.button,{whileTap:{scale:.9},disabled:g,onClick:j,className:"px-3 py-1 text-xs flex items-center gap-1 bg-purple-100 text-purple-700 rounded-full shadow-sm border border-purple-200",children:[(0,t.jsx)(d.Sparkle,{size:14}),g?(0,t.jsx)(l.Loader,{className:"w-5 h-5 animate-spin"}):"AI suggest"]})]}),(0,t.jsx)("div",{className:"flex gap-2 flex-wrap mb-3",children:y.map((e,s)=>(0,t.jsx)(x.motion.div,{whileTap:{scale:.92},className:"px-3 py-1 text-xs bg-green-50 border border-green-200 cursor-pointer text-green-700 rounded-full",onClick:()=>m(e),children:e},e))}),(0,t.jsx)("div",{className:"flex-1 overflow-y-auto p-2 space-y-3",ref:u,children:(0,t.jsx)(o.AnimatePresence,{children:Array.isArray(h)&&h.map((e,s)=>(0,t.jsx)(x.motion.div,{initial:{opacity:0,y:15},animate:{opacity:1,y:0},exit:{opacity:0},transition:{duration:.2},className:`flex ${(e?.senderId?.toString()||"")==r?"justify-end":"justify-start"}`,children:(0,t.jsxs)("div",{className:`px-4 py-2 max-w-[75%] rounded-2xl shadow 
                  ${(e?.senderId?.toString()||"")===r?"bg-green-600 text-white rounded-br-none":"bg-gray-100 text-gray-800 rounded-bl-none"}`,children:[(0,t.jsx)("p",{children:e.text}),(0,t.jsx)("p",{className:"text-[10px] opacity-70 mt-1 text-right",children:e.time})]})},e?._id?.toString()||s))})}),(0,t.jsxs)("div",{className:"flex gap-2 mt-3 border-t pt-3",children:[(0,t.jsx)("input",{type:"text",placeholder:"Type a Message...",className:"flex-1 bg-gray-100 px-4 py-2 rounded-xl outline-none focus:ring-2 focus:ring-green-500",value:n,onChange:e=>m(e.target.value)}),(0,t.jsx)("button",{className:"bg-green-600 hover:bg-green-700 p-3 rounded-xl text-white",onClick:()=>{let t=(0,s.getSocket)(),i={roomId:e,text:n,senderId:r,time:new Date().toLocaleTimeString([],{hour:"2-digit",minute:"2-digit"})};t.emit("send-message",i),m("")},children:(0,t.jsx)(c.Send,{size:18})})]})]})};var h=e.i(715788),p=e.i(689849),u=e.i(595468),g=e.i(346897),f=e.i(488844),y=e.i(790092);let b=(0,e.i(475254).default)("bell",[["path",{d:"M10.268 21a2 2 0 0 0 3.464 0",key:"vwvbt9"}],["path",{d:"M3.262 15.326A1 1 0 0 0 4 17h16a1 1 0 0 0 .74-1.673C19.41 13.956 18 12.499 18 8A6 6 0 0 0 6 8c0 4.499-1.411 5.956-2.738 7.326",key:"11g9vi"}]]);var j=e.i(581418),v=e.i(475225),w=e.i(509694),N=e.i(731195),k=e.i(234239),z=e.i(705766),S=e.i(699266);let A=(0,n.default)(()=>e.A(207204),{loadableGenerated:{modules:[229112]},ssr:!1}),C=[{targetId:"delivery-header",title:"Mission Control",content:"Welcome to your Logistics Hub. Track your daily earnings and active mission status here."},{targetId:"delivery-stats",title:"Performace Analytics",content:"Monitor your completed deliveries and total revenue for the current shift."},{targetId:"delivery-actions",title:"Status Controls",content:"Go online to start receiving orders or refresh to check for new broadcasts in your vicinity."},{targetId:"delivery-queue",title:"Assignment Broadcasts",content:"New delivery missions appear here. Accept them quickly before other agents claim them."}];function P(e){return(0,t.jsx)("svg",{...e,xmlns:"http://www.w3.org/2000/svg",width:"24",height:"24",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round",children:(0,t.jsx)("path",{d:"M22 12h-4l-3 9L9 3l-3 9H2"})})}e.s(["default",0,function({earning:e}){let[n,c]=(0,a.useState)([]),{userData:d}=(0,r.useSelector)(e=>e.user),[T,I]=(0,a.useState)(null),[L,D]=(0,a.useState)(!1),[M,R]=(0,a.useState)(""),[H,_]=(0,a.useState)(!1),[B,E]=(0,a.useState)(!1),[O,$]=(0,a.useState)(""),[U,q]=(0,a.useState)({latitude:0,longitude:0}),[V,W]=(0,a.useState)({latitude:0,longitude:0}),F=async()=>{try{let e=await i.default.get("/api/delivery/get-assignments");c(e.data)}catch(e){console.error(e)}};(0,a.useEffect)(()=>{let e=(0,s.getSocket)();if(!d?._id||!navigator.geolocation)return;let t=navigator.geolocation.watchPosition(t=>{let s=t.coords.latitude,i=t.coords.longitude;W({latitude:s,longitude:i}),e.emit("update-location",{userId:d?._id,latitude:s,longitude:i})},e=>console.error(e),{enableHighAccuracy:!0});return()=>navigator.geolocation.clearWatch(t)},[d?._id]),(0,a.useEffect)(()=>{let e=(0,s.getSocket)();return e.on("new-assignment",e=>{c(t=>[...t,e]),z.default.success("New Delivery Assignment!")}),()=>e.off("new-assignment")},[]);let K=async e=>{try{await i.default.post(`/api/delivery/assignment/${e}/accept-assignment`),z.default.success("Assignment Accepted!"),Q()}catch(e){z.default.error("Failed to accept assignment")}},G=async e=>{try{await i.default.post(`/api/delivery/assignment/${e}/reject-assignment`),z.default.error("Assignment Rejected"),F()}catch(e){console.error(e)}},Q=async()=>{try{let e=await i.default.get("/api/delivery/current-order");e.data?.active&&(I(e.data.assignment),e.data.assignment?.order?.address&&q({latitude:e.data.assignment.order.address.latitude,longitude:e.data.assignment.order.address.longitude}))}catch(e){console.error(e)}};(0,a.useEffect)(()=>{Q(),F()},[d]);let X=async()=>{let e=T?.order?._id;if(console.log("Debugging Send OTP:",{activeOrder:T,orderId:e}),!e)return void z.default.error("Error: Order ID missing. Please refresh.");_(!0);try{await i.default.post("/api/delivery/otp/send",{orderId:e}),D(!0),z.default.success("OTP sent to Customer")}catch(e){console.error("Send OTP Error:",e),z.default.error(e.response?.data?.message||"Failed to send OTP")}finally{_(!1)}},Y=async()=>{E(!0);try{await i.default.post("/api/delivery/otp/verify",{orderId:T?.order?._id,otp:O}),z.default.success("Delivery Successful!"),I(null),await Q(),window.location.reload()}catch(e){R("Incorrect OTP provided"),z.default.error("Verification failed")}finally{E(!1)}};if(!T&&0===n.length){let s=[{name:"Today",earnings:e,deliveries:Math.round(e/40)}];return(0,t.jsxs)("div",{className:"min-h-screen bg-zinc-50 pt-[120px] pb-20",children:[(0,t.jsx)(S.default,{steps:C,tourName:"delivery_v1"}),(0,t.jsx)("div",{className:"w-[95%] md:w-[85%] mx-auto max-w-lg",children:(0,t.jsxs)(x.motion.div,{initial:{opacity:0,y:30},animate:{opacity:1,y:0},className:"bg-white p-10 rounded-[3rem] shadow-2xl shadow-zinc-900/5 border border-zinc-100 text-center space-y-8",children:[(0,t.jsxs)("div",{id:"delivery-header",className:"space-y-2",children:[(0,t.jsx)("div",{className:"w-24 h-24 bg-linear-to-br from-green-500 to-emerald-700 rounded-3xl shadow-xl shadow-green-500/20 flex items-center justify-center mx-auto mb-4",children:(0,t.jsx)(h.Truck,{className:"text-white",size:48})}),(0,t.jsx)("h2",{className:"text-3xl font-black text-zinc-900 tracking-tight",children:"Scanning for Orders"}),(0,t.jsx)("p",{className:"text-zinc-500 font-medium",children:"You are currently online. Stay nearby to grab high-value deliveries."})]}),(0,t.jsxs)("div",{id:"delivery-stats",className:"bg-zinc-50 border border-zinc-100 rounded-[2.5rem] p-8 space-y-6",children:[(0,t.jsxs)("div",{className:"flex items-center gap-2 text-green-600 font-black uppercase tracking-widest text-[10px] justify-center",children:[(0,t.jsx)(b,{size:14}),(0,t.jsx)("span",{children:"Shift Performance"})]}),(0,t.jsx)("div",{className:"h-[150px] min-h-[150px] w-full",children:(0,t.jsx)(N.ResponsiveContainer,{width:"100%",height:"100%",children:(0,t.jsxs)(w.BarChart,{data:Array.isArray(s)?s:[],children:[(0,t.jsx)(v.Bar,{dataKey:"earnings",fill:"#16A34A",radius:[10,10,0,0]}),(0,t.jsx)(k.Tooltip,{cursor:{fill:"transparent"},contentStyle:{borderRadius:"1rem",border:"none"}})]})})}),(0,t.jsxs)("div",{className:"flex justify-between items-center px-4",children:[(0,t.jsxs)("div",{className:"text-left",children:[(0,t.jsx)("div",{className:"text-[10px] font-black uppercase text-zinc-400",children:"Total"}),(0,t.jsxs)("div",{className:"text-xl font-black text-zinc-900",children:["₹",e]})]}),(0,t.jsxs)("div",{className:"text-right",children:[(0,t.jsx)("div",{className:"text-[10px] font-black uppercase text-zinc-400",children:"Deliveries"}),(0,t.jsx)("div",{className:"text-xl font-black text-green-600",children:Math.round(e/40)})]})]})]}),(0,t.jsxs)("div",{id:"delivery-actions",className:"grid grid-cols-2 gap-4",children:[(0,t.jsx)(x.motion.button,{whileHover:{scale:1.02},whileTap:{scale:.98},className:"bg-zinc-900 text-white font-black py-5 rounded-2xl shadow-xl",onClick:F,children:(0,t.jsxs)("div",{className:"flex flex-col items-center",children:[(0,t.jsx)(y.RefreshCcw,{size:20,className:"mb-1"}),(0,t.jsx)("span",{className:"text-[10px] uppercase tracking-widest leading-none",children:"Check New"})]})}),(0,t.jsx)(x.motion.button,{whileHover:{scale:1.02},whileTap:{scale:.98},className:"bg-white border border-zinc-200 text-zinc-900 font-black py-5 rounded-2xl shadow-xl",onClick:()=>window.location.reload(),children:(0,t.jsxs)("div",{className:"flex flex-col items-center",children:[(0,t.jsx)(P,{size:20,className:"mb-1"}),(0,t.jsx)("span",{className:"text-[10px] uppercase tracking-widest leading-none",children:"Go Online"})]})})]})]})})]})}return T&&U?(0,t.jsxs)("div",{className:"min-h-screen bg-zinc-50 pt-[120px] pb-20",children:[(0,t.jsx)(S.default,{steps:C,tourName:"delivery_v1"}),(0,t.jsxs)("div",{className:"w-[95%] md:w-[85%] mx-auto max-w-4xl space-y-8",children:[(0,t.jsxs)("div",{className:"flex items-center justify-between",children:[(0,t.jsxs)("div",{className:"space-y-1",children:[(0,t.jsxs)("div",{className:"flex items-center gap-2 text-blue-600 font-bold uppercase tracking-[0.2em] text-[10px]",children:[(0,t.jsx)(P,{size:14,className:"animate-pulse"}),(0,t.jsx)("span",{children:"Active Delivery Protocol"})]}),(0,t.jsx)("h1",{className:"text-4xl font-black text-zinc-900 tracking-tight",children:"Live Mission"})]}),(0,t.jsxs)("div",{className:"bg-white px-4 py-2 rounded-2xl shadow-sm border border-zinc-100 flex items-center gap-3",children:[(0,t.jsx)("div",{className:"w-2 h-2 bg-green-500 rounded-full animate-ping"}),(0,t.jsxs)("span",{className:"text-xs font-black text-zinc-600 uppercase tracking-widest",children:["ID: #",T?.order?._id?.toString()?.slice(-6).toUpperCase()||"N/A"]})]})]}),(0,t.jsxs)("div",{className:"grid grid-cols-1 lg:grid-cols-3 gap-8",children:[(0,t.jsxs)("div",{className:"lg:col-span-2 space-y-8",children:[(0,t.jsx)("div",{className:"rounded-[3rem] border border-zinc-100 shadow-2xl shadow-blue-500/5 overflow-hidden h-[450px] relative bg-white",children:(0,t.jsx)(A,{userLocation:U,deliveryBoyLocation:V})}),(0,t.jsx)(m,{orderId:T?.order?._id,deliveryBoyId:d?._id?.toString()})]}),(0,t.jsx)("div",{className:"space-y-8",children:(0,t.jsxs)(x.motion.div,{initial:{opacity:0,x:20},animate:{opacity:1,x:0},className:"bg-white p-8 rounded-[3rem] shadow-2xl shadow-zinc-900/5 border border-zinc-100 space-y-8",children:[(0,t.jsxs)("div",{className:"space-y-4",children:[(0,t.jsxs)("div",{className:"flex items-center gap-3 text-zinc-400 font-bold uppercase tracking-widest text-[10px]",children:[(0,t.jsx)(g.MapPin,{size:16}),(0,t.jsx)("span",{children:"Drop-off Point"})]}),(0,t.jsx)("p",{className:"text-lg font-bold text-zinc-900 leading-tight",children:T?.order?.address?.fullAddress})]}),(0,t.jsxs)("div",{className:"pt-8 border-t border-zinc-50 space-y-6",children:[!T?.order?.deliveryOtpVerification&&!L&&(0,t.jsx)(x.motion.button,{whileHover:{scale:1.02},whileTap:{scale:.98},onClick:X,className:"w-full py-6 bg-green-600 font-black text-white rounded-3xl shadow-xl shadow-green-900/20 flex items-center justify-center gap-3",children:H?(0,t.jsx)(l.Loader,{size:20,className:"animate-spin"}):(0,t.jsxs)(t.Fragment,{children:[(0,t.jsx)("span",{children:"Arrived at Location"}),(0,t.jsx)(p.Navigation2,{size:20})]})}),(0,t.jsx)(o.AnimatePresence,{children:L&&(0,t.jsxs)(x.motion.div,{initial:{opacity:0,scale:.9},animate:{opacity:1,scale:1},className:"space-y-4 bg-zinc-50 p-6 rounded-[2rem] border border-zinc-100",children:[(0,t.jsxs)("div",{className:"flex items-center gap-2 text-zinc-500 font-bold uppercase tracking-widest text-[10px] justify-center mb-2",children:[(0,t.jsx)(j.ShieldCheck,{size:14}),(0,t.jsx)("span",{children:"Customer PIN Verification"})]}),(0,t.jsx)("input",{type:"text",className:"w-full py-5 bg-white border border-zinc-200 rounded-2xl text-center text-2xl font-black tracking-[1em] focus:ring-2 focus:ring-blue-500/20 focus:border-blue-500 outline-none transition-all",placeholder:"0000",maxLength:4,onChange:e=>$(e.target.value),value:O}),(0,t.jsx)("button",{className:"w-full bg-zinc-900 text-white font-black py-5 rounded-2xl shadow-xl transition-all active:scale-95",onClick:Y,children:B?(0,t.jsx)(l.Loader,{size:20,className:"animate-spin mx-auto"}):"Complete Delivery"}),M&&(0,t.jsx)("div",{className:"text-red-500 text-xs font-bold text-center",children:M})]})}),T?.order?.deliveryOtpVerification&&(0,t.jsxs)("div",{className:"p-6 bg-emerald-50 rounded-[2rem] border border-emerald-100 text-center flex flex-col items-center gap-3",children:[(0,t.jsx)(u.CheckCircle2,{size:48,className:"text-emerald-500"}),(0,t.jsx)("span",{className:"text-emerald-700 font-black uppercase tracking-widest text-xs",children:"Success Verification"})]})]})]})})]})]})]}):(0,t.jsxs)("div",{className:"min-h-screen bg-zinc-50 pt-[120px] pb-20",children:[(0,t.jsx)(S.default,{steps:C,tourName:"delivery_v1"}),(0,t.jsxs)("div",{className:"w-[95%] md:w-[85%] mx-auto space-y-10",children:[(0,t.jsxs)("div",{id:"delivery-header",className:"space-y-1 text-center md:text-left",children:[(0,t.jsxs)("div",{className:"flex items-center gap-2 text-green-600 font-bold uppercase tracking-[0.2em] text-[10px] justify-center md:justify-start",children:[(0,t.jsx)(f.Package,{size:14}),(0,t.jsx)("span",{children:"Broadcast Queue"})]}),(0,t.jsx)("h1",{className:"text-4xl md:text-5xl font-black text-zinc-900 tracking-tight",children:"Mission Assignments"}),(0,t.jsx)("p",{className:"text-zinc-500 font-medium",children:"Accept assignments quickly. High demand detected in your area."})]}),(0,t.jsx)("div",{id:"delivery-queue",className:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-3 gap-8",children:Array.isArray(n)&&n.map((e,s)=>(0,t.jsxs)(x.motion.div,{initial:{opacity:0,y:30},animate:{opacity:1,y:0},transition:{delay:.1*s},whileHover:{y:-5},className:"bg-white p-8 rounded-[3rem] shadow-2xl shadow-zinc-900/5 border border-zinc-100 flex flex-col justify-between relative overflow-hidden group",children:[(0,t.jsx)("div",{className:"absolute top-0 right-0 p-6 opacity-5 group-hover:scale-110 transition-transform",children:(0,t.jsx)(h.Truck,{size:64})}),(0,t.jsxs)("div",{className:"space-y-6",children:[(0,t.jsxs)("div",{children:[(0,t.jsx)("div",{className:"text-[10px] font-black uppercase text-zinc-400 tracking-widest mb-1",children:"Assignment ID"}),(0,t.jsxs)("div",{className:"text-xl font-black text-zinc-900",children:["#",e?.order?._id?.toString()?.slice(-6).toUpperCase()||"N/A"]})]}),(0,t.jsxs)("div",{className:"space-y-1",children:[(0,t.jsxs)("div",{className:"flex items-center gap-2 text-zinc-400 font-bold uppercase tracking-widest text-[10px]",children:[(0,t.jsx)(g.MapPin,{size:14}),(0,t.jsx)("span",{children:"Drop Point"})]}),(0,t.jsx)("p",{className:"text-zinc-600 text-sm font-medium line-clamp-2",children:e?.order?.address?.fullAddress})]})]}),(0,t.jsxs)("div",{className:"grid grid-cols-2 gap-4 mt-8 pt-8 border-t border-zinc-50",children:[(0,t.jsx)(x.motion.button,{whileHover:{scale:1.05},whileTap:{scale:.95},className:"bg-green-600 text-white font-black py-4 rounded-2xl shadow-xl shadow-green-900/10",onClick:()=>K(e._id),children:"Accept"}),(0,t.jsx)(x.motion.button,{whileHover:{scale:1.05},whileTap:{scale:.95},className:"bg-white border border-red-100 text-red-500 font-black py-4 rounded-2xl",onClick:()=>G(e._id),children:"Reject"})]})]},s))}),0===n.length&&(0,t.jsxs)("div",{className:"py-32 text-center bg-white rounded-[4rem] border-2 border-dashed border-zinc-200 shadow-inner",children:[(0,t.jsx)("div",{className:"w-24 h-24 bg-zinc-50 rounded-full flex items-center justify-center mx-auto mb-8",children:(0,t.jsx)(y.RefreshCcw,{className:"text-zinc-300 animate-spin-slow",size:40})}),(0,t.jsx)("h3",{className:"text-2xl font-black text-zinc-900 mb-2",children:"No missions broadcasted"}),(0,t.jsx)("p",{className:"text-zinc-500",children:"Wait for a few moments or move to a busier high-demand zone."})]})]})]})}],299613)},262676,e=>{"use strict";var t=e.i(843476),s=e.i(271645),i=e.i(846932),a=e.i(972520),r=e.i(475254);let n=(0,r.default)("bike",[["circle",{cx:"18.5",cy:"17.5",r:"3.5",key:"15x4ox"}],["circle",{cx:"5.5",cy:"17.5",r:"3.5",key:"1noe27"}],["circle",{cx:"15",cy:"5",r:"1",key:"19l28e"}],["path",{d:"M12 17.5V14l-3-3 4-3 2 3h2",key:"1npguv"}]]);var l=e.i(284614);let c=(0,r.default)("user-cog",[["path",{d:"M10 15H6a4 4 0 0 0-4 4v2",key:"1nfge6"}],["path",{d:"m14.305 16.53.923-.382",key:"1itpsq"}],["path",{d:"m15.228 13.852-.923-.383",key:"eplpkm"}],["path",{d:"m16.852 12.228-.383-.923",key:"13v3q0"}],["path",{d:"m16.852 17.772-.383.924",key:"1i8mnm"}],["path",{d:"m19.148 12.228.383-.923",key:"1q8j1v"}],["path",{d:"m19.53 18.696-.382-.924",key:"vk1qj3"}],["path",{d:"m20.772 13.852.924-.383",key:"n880s0"}],["path",{d:"m20.772 16.148.924.383",key:"1g6xey"}],["circle",{cx:"18",cy:"15",r:"3",key:"gjjjvw"}],["circle",{cx:"9",cy:"7",r:"4",key:"nufk8"}]]);var d=e.i(450439),o=e.i(761911),x=e.i(201928),m=e.i(209912),h=e.i(580555),p=e.i(283086),u=e.i(581418),g=e.i(581949),f=e.i(618566),y=e.i(526732);e.s(["default",0,function(){let[e,r]=(0,s.useState)([{id:"admin",label:"System Admin",icon:c,desc:"Platform oversight & control"},{id:"user",label:"Consumer",icon:l.User,desc:"Buy fresh millets & products"},{id:"farmer",label:"Farmer",icon:d.Wheat,desc:"Sell crop & monitor health"},{id:"shg",label:"SHG",icon:o.Users,desc:"Self-help group production"},{id:"buyer",label:"Corporate Buyer",icon:x.ShoppingCart,desc:"Bulk procurement & trade"},{id:"startup",label:"Startup",icon:m.Rocket,desc:"Agri-tech innovation"},{id:"processor",label:"Processor",icon:h.Factory,desc:"Value addition & milling"},{id:"deliveryBoy",label:"Logistics Partner",icon:n,desc:"Fulfillment & delivery"}]),[b,j]=(0,s.useState)(""),[v,w]=(0,s.useState)(""),{update:N}=(0,y.useSession)(),k=(0,f.useRouter)(),z=async()=>{try{await g.default.post("/api/user/edit-role-mobile",{role:b,mobile:v}),await N({role:b}),k.push("/")}catch(e){console.error(e)}};return(0,s.useEffect)(()=>{(async()=>{try{(await g.default.get("/api/check-for-admin")).data.adminExist&&r(e=>e.filter(e=>"admin"!==e.id))}catch(e){console.error(e)}})()},[]),(0,t.jsx)("div",{className:"min-h-screen bg-zinc-50 flex flex-col items-center py-20 px-6",children:(0,t.jsxs)("div",{className:"max-w-4xl w-full space-y-12",children:[(0,t.jsxs)("div",{className:"text-center space-y-4",children:[(0,t.jsxs)(i.motion.div,{initial:{opacity:0,scale:.9},animate:{opacity:1,scale:1},className:"inline-flex items-center gap-2 px-4 py-2 bg-green-50 rounded-full text-green-600 text-xs font-black uppercase tracking-widest border border-green-100 mb-4",children:[(0,t.jsx)(p.Sparkles,{size:14}),(0,t.jsx)("span",{children:"Personalize your experience"})]}),(0,t.jsxs)(i.motion.h1,{initial:{opacity:0,y:10},animate:{opacity:1,y:0},className:"text-4xl md:text-5xl font-black text-zinc-900 tracking-tight",children:["Who are you in the ",(0,t.jsx)("br",{}),(0,t.jsx)("span",{className:"text-green-600",children:"Millet Ecosystem?"})]}),(0,t.jsx)("p",{className:"text-zinc-500 font-medium max-w-md mx-auto",children:"Select your primary role to unlock specialized tools and marketplace features."})]}),(0,t.jsx)("div",{className:"grid grid-cols-2 lg:grid-cols-4 gap-4 md:gap-6",children:e.map((e,s)=>{let a=e.icon,r=b===e.id;return(0,t.jsxs)(i.motion.div,{initial:{opacity:0,y:20},animate:{opacity:1,y:0},transition:{delay:.05*s},whileTap:{scale:.96},onClick:()=>j(e.id),className:`group relative flex flex-col p-6 rounded-[2.5rem] border-2 cursor-pointer transition-all duration-300 ${r?"border-green-600 bg-white shadow-2xl shadow-green-900/10":"border-white bg-white hover:border-zinc-200 shadow-sm"}`,children:[(0,t.jsx)("div",{className:`w-12 h-12 rounded-2xl flex items-center justify-center mb-6 transition-colors ${r?"bg-green-600 text-white":"bg-zinc-50 text-zinc-400 group-hover:bg-zinc-100"}`,children:(0,t.jsx)(a,{size:24})}),(0,t.jsxs)("div",{className:"space-y-1",children:[(0,t.jsx)("h3",{className:`font-black text-sm tracking-tight ${r?"text-green-600":"text-zinc-900"}`,children:e.label}),(0,t.jsx)("p",{className:"text-[10px] text-zinc-400 font-medium leading-tight",children:e.desc})]}),r&&(0,t.jsx)("div",{className:"absolute top-4 right-4 text-green-600",children:(0,t.jsx)(u.ShieldCheck,{size:20})})]},e.id)})}),(0,t.jsxs)(i.motion.div,{initial:{opacity:0},animate:{opacity:1},className:"max-w-md mx-auto space-y-8 pt-8",children:[(0,t.jsxs)("div",{className:"space-y-4",children:[(0,t.jsx)("label",{className:"text-xs font-black uppercase text-zinc-400 tracking-[0.2em] ml-2",children:"Identity Verification"}),(0,t.jsxs)("div",{className:"relative group",children:[(0,t.jsx)("div",{className:"absolute left-6 top-1/2 -translate-y-1/2 text-zinc-400 group-focus-within:text-green-600 transition-colors",children:(0,t.jsx)(n,{size:20})}),(0,t.jsx)("input",{type:"tel",className:"w-full bg-white border border-zinc-200 rounded-3xl py-6 pl-16 pr-6 text-zinc-800 focus:ring-4 focus:ring-green-500/5 focus:border-green-500 outline-none transition-all font-bold text-lg placeholder:text-zinc-200",placeholder:"Enter 10-digit mobile number",maxLength:10,onChange:e=>w(e.target.value),value:v})]})]}),(0,t.jsxs)(i.motion.button,{whileHover:{scale:1.02},whileTap:{scale:.98},disabled:10!==v.length||!b,className:`w-full py-6 rounded-3xl font-black uppercase tracking-widest text-sm flex items-center justify-center gap-3 shadow-2xl transition-all ${b&&10===v.length?"bg-zinc-900 text-white shadow-zinc-900/20 hover:bg-green-600":"bg-zinc-200 text-zinc-400 cursor-not-allowed shadow-none"}`,onClick:z,children:[(0,t.jsx)("span",{children:"Complete Setup"}),(0,t.jsx)(a.ArrowRight,{size:18})]})]})]})})}],262676)}]);