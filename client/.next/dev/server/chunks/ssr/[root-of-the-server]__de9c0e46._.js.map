{
  "version": 3,
  "sources": [],
  "sections": [
    {"offset": {"line": 10, "column": 0}, "map": {"version":3,"sources":["file:///D:/Agrowcart/AgrowCart/Agrowcart/client/src/Provider.tsx"],"sourcesContent":["'use client'\r\nimport { SessionProvider } from 'next-auth/react'\r\nimport React from 'react'\r\n\r\nfunction Provider({ children }: { children: React.ReactNode }) {\r\n  return (\r\n    <SessionProvider>\r\n      {children}\r\n    </SessionProvider>\r\n  )\r\n}\r\n\r\nexport default Provider\r\n"],"names":[],"mappings":";;;;;AACA;AADA;;;AAIA,SAAS,SAAS,EAAE,QAAQ,EAAiC;IAC3D,qBACE,8OAAC,wJAAe;kBACb;;;;;;AAGP;uCAEe"}},
    {"offset": {"line": 33, "column": 0}, "map": {"version":3,"sources":["file:///D:/Agrowcart/AgrowCart/Agrowcart/client/src/redux/userSlice.ts"],"sourcesContent":["import { createSlice } from \"@reduxjs/toolkit\";\r\n\r\ninterface IUser{\r\n    _id?:string\r\n    name:string\r\n    email:string\r\n    password?:string\r\n    mobile?:string\r\n    role:\"user\" | \"deliveryBoy\" | \"admin\"\r\n    image?:string\r\n}\r\ninterface IUserSlice{\r\n    userData:IUser | null\r\n}\r\n\r\n\r\nconst initialState:IUserSlice={\r\n    userData:null\r\n}\r\n\r\nconst userSlice=createSlice({\r\n   name:\"user\",\r\n   initialState ,\r\n   reducers:{\r\n    setUserData:(state,action)=>{\r\n    state.userData=action.payload\r\n    }\r\n   }\r\n})\r\n\r\nexport const {setUserData}=userSlice.actions\r\nexport default userSlice.reducer\r\n"],"names":[],"mappings":";;;;;;AAAA;;AAgBA,MAAM,eAAwB;IAC1B,UAAS;AACb;AAEA,MAAM,YAAU,IAAA,0MAAW,EAAC;IACzB,MAAK;IACL;IACA,UAAS;QACR,aAAY,CAAC,OAAM;YACnB,MAAM,QAAQ,GAAC,OAAO,OAAO;QAC7B;IACD;AACH;AAEO,MAAM,EAAC,WAAW,EAAC,GAAC,UAAU,OAAO;uCAC7B,UAAU,OAAO"}},
    {"offset": {"line": 59, "column": 0}, "map": {"version":3,"sources":["file:///D:/Agrowcart/AgrowCart/Agrowcart/client/src/redux/cartSlice.ts"],"sourcesContent":["import { createSlice, PayloadAction } from \"@reduxjs/toolkit\";\r\n\r\ninterface IProduct {\r\n   _id: string,\r\n   name: string,\r\n   category: string,\r\n   price: string,\r\n   unit: string,\r\n   quantity: number,\r\n   image: string,\r\n   createdAt?: Date,\r\n   updatedAt?: Date\r\n}\r\ninterface ICartSlice {\r\n   cartData: IProduct[],\r\n   subTotal: number,\r\n   deliveryFee: number,\r\n   finalTotal: number\r\n}\r\n\r\n\r\nconst initialState: ICartSlice = {\r\n   cartData: [],\r\n   subTotal: 0,\r\n   deliveryFee: 40,\r\n   finalTotal: 40\r\n}\r\n\r\nconst cartSlice = createSlice({\r\n   name: \"cart\",\r\n   initialState,\r\n   reducers: {\r\n      addToCart: (state, action: PayloadAction<IProduct>) => {\r\n         state.cartData.push(action.payload)\r\n         cartSlice.caseReducers.calculateTotals(state)\r\n      },\r\n      increaseQuantity: (state, action: PayloadAction<string>) => {\r\n         const item = state.cartData.find(i => i._id == action.payload)\r\n         if (item) {\r\n            item.quantity = item.quantity + 1\r\n         }\r\n         cartSlice.caseReducers.calculateTotals(state)\r\n      }\r\n      ,\r\n      decreaseQuantity: (state, action: PayloadAction<string>) => {\r\n         const item = state.cartData.find(i => i._id == action.payload)\r\n         if (item?.quantity && item.quantity > 1) {\r\n            item.quantity = item.quantity - 1\r\n         } else {\r\n            state.cartData = state.cartData.filter(i => i._id !== action.payload)\r\n         }\r\n         cartSlice.caseReducers.calculateTotals(state)\r\n      },\r\n      removeFromCart: (state, action: PayloadAction<string>) => {\r\n         state.cartData = state.cartData.filter(i => i._id !== action.payload)\r\n         cartSlice.caseReducers.calculateTotals(state)\r\n      },\r\n      calculateTotals: (state) => {\r\n         state.subTotal = state.cartData.reduce((sum, item) => sum + Number(item.price) * item.quantity, 0)\r\n         state.deliveryFee = state.subTotal > 100 ? 0 : 40\r\n         state.finalTotal = state.subTotal + state.deliveryFee\r\n      }\r\n   }\r\n})\r\n\r\nexport const { addToCart, increaseQuantity, decreaseQuantity, removeFromCart } = cartSlice.actions\r\nexport default cartSlice.reducer\r\n"],"names":[],"mappings":";;;;;;;;;;;;AAAA;;AAqBA,MAAM,eAA2B;IAC9B,UAAU,EAAE;IACZ,UAAU;IACV,aAAa;IACb,YAAY;AACf;AAEA,MAAM,YAAY,IAAA,0MAAW,EAAC;IAC3B,MAAM;IACN;IACA,UAAU;QACP,WAAW,CAAC,OAAO;YAChB,MAAM,QAAQ,CAAC,IAAI,CAAC,OAAO,OAAO;YAClC,UAAU,YAAY,CAAC,eAAe,CAAC;QAC1C;QACA,kBAAkB,CAAC,OAAO;YACvB,MAAM,OAAO,MAAM,QAAQ,CAAC,IAAI,CAAC,CAAA,IAAK,EAAE,GAAG,IAAI,OAAO,OAAO;YAC7D,IAAI,MAAM;gBACP,KAAK,QAAQ,GAAG,KAAK,QAAQ,GAAG;YACnC;YACA,UAAU,YAAY,CAAC,eAAe,CAAC;QAC1C;QAEA,kBAAkB,CAAC,OAAO;YACvB,MAAM,OAAO,MAAM,QAAQ,CAAC,IAAI,CAAC,CAAA,IAAK,EAAE,GAAG,IAAI,OAAO,OAAO;YAC7D,IAAI,MAAM,YAAY,KAAK,QAAQ,GAAG,GAAG;gBACtC,KAAK,QAAQ,GAAG,KAAK,QAAQ,GAAG;YACnC,OAAO;gBACJ,MAAM,QAAQ,GAAG,MAAM,QAAQ,CAAC,MAAM,CAAC,CAAA,IAAK,EAAE,GAAG,KAAK,OAAO,OAAO;YACvE;YACA,UAAU,YAAY,CAAC,eAAe,CAAC;QAC1C;QACA,gBAAgB,CAAC,OAAO;YACrB,MAAM,QAAQ,GAAG,MAAM,QAAQ,CAAC,MAAM,CAAC,CAAA,IAAK,EAAE,GAAG,KAAK,OAAO,OAAO;YACpE,UAAU,YAAY,CAAC,eAAe,CAAC;QAC1C;QACA,iBAAiB,CAAC;YACf,MAAM,QAAQ,GAAG,MAAM,QAAQ,CAAC,MAAM,CAAC,CAAC,KAAK,OAAS,MAAM,OAAO,KAAK,KAAK,IAAI,KAAK,QAAQ,EAAE;YAChG,MAAM,WAAW,GAAG,MAAM,QAAQ,GAAG,MAAM,IAAI;YAC/C,MAAM,UAAU,GAAG,MAAM,QAAQ,GAAG,MAAM,WAAW;QACxD;IACH;AACH;AAEO,MAAM,EAAE,SAAS,EAAE,gBAAgB,EAAE,gBAAgB,EAAE,cAAc,EAAE,GAAG,UAAU,OAAO;uCACnF,UAAU,OAAO"}},
    {"offset": {"line": 120, "column": 0}, "map": {"version":3,"sources":["file:///D:/Agrowcart/AgrowCart/Agrowcart/client/src/redux/store.ts"],"sourcesContent":["import { configureStore } from \"@reduxjs/toolkit\";\r\nimport userSlice from \"./userSlice\"\r\nimport cartSlice from \"./cartSlice\"\r\nexport const store=configureStore({\r\n   reducer:{\r\n    user:userSlice,\r\n    cart:cartSlice\r\n   } \r\n})\r\n\r\nexport type RootState = ReturnType<typeof store.getState>\r\nexport type AppDispatch = typeof store.dispatch\r\n\r\n"],"names":[],"mappings":";;;;AAAA;AACA;AACA;;;;AACO,MAAM,QAAM,IAAA,6MAAc,EAAC;IAC/B,SAAQ;QACP,MAAK,oIAAS;QACd,MAAK,oIAAS;IACf;AACH"}},
    {"offset": {"line": 140, "column": 0}, "map": {"version":3,"sources":["file:///D:/Agrowcart/AgrowCart/Agrowcart/client/src/redux/StoreProvider.tsx"],"sourcesContent":["'use client'\r\nimport React from 'react'\r\nimport { Provider } from 'react-redux'\r\nimport { store } from './store'\r\n\r\nfunction StoreProvider({children}:{children:React.ReactNode}) {\r\n  return (\r\n    <Provider store={store}>\r\n        {children}\r\n    </Provider>\r\n  )\r\n}\r\n\r\nexport default StoreProvider\r\n"],"names":[],"mappings":";;;;;AAEA;AACA;AAHA;;;;AAKA,SAAS,cAAc,EAAC,QAAQ,EAA4B;IAC1D,qBACE,8OAAC,qKAAQ;QAAC,OAAO,8HAAK;kBACjB;;;;;;AAGT;uCAEe"}},
    {"offset": {"line": 250, "column": 0}, "map": {"version":3,"sources":["file:///D:/Agrowcart/AgrowCart/Agrowcart/client/src/hooks/useGetMe.tsx"],"sourcesContent":["'use client'\r\n\r\nimport { AppDispatch } from '@/redux/store'\r\nimport { setUserData } from '@/redux/userSlice'\r\nimport axios from 'axios'\r\nimport { useEffect } from 'react'\r\nimport { useDispatch } from 'react-redux'\r\n\r\nfunction useGetMe(enabled: boolean) {\r\n  const dispatch = useDispatch<AppDispatch>()\r\n\r\n  useEffect(() => {\r\n    if (!enabled) return // ‚úÖ SAFE\r\n\r\n    let cancelled = false\r\n\r\n    const getMe = async () => {\r\n      try {\r\n        const result = await axios.get('/api/me')\r\n        if (!cancelled) {\r\n          dispatch(setUserData(result.data))\r\n        }\r\n      } catch (error) {\r\n        console.error('GET ME FAILED:', error)\r\n      }\r\n    }\r\n\r\n    getMe()\r\n\r\n    return () => {\r\n      cancelled = true\r\n    }\r\n  }, [enabled, dispatch])\r\n}\r\n\r\nexport default useGetMe\r\n"],"names":[],"mappings":";;;;AAGA;AACA;AACA;AACA;AANA;;;;;AAQA,SAAS,SAAS,OAAgB;IAChC,MAAM,WAAW,IAAA,wKAAW;IAE5B,IAAA,kNAAS,EAAC;QACR,IAAI,CAAC,SAAS,QAAO,SAAS;QAE9B,IAAI,YAAY;QAEhB,MAAM,QAAQ;YACZ,IAAI;gBACF,MAAM,SAAS,MAAM,gJAAK,CAAC,GAAG,CAAC;gBAC/B,IAAI,CAAC,WAAW;oBACd,SAAS,IAAA,wIAAW,EAAC,OAAO,IAAI;gBAClC;YACF,EAAE,OAAO,OAAO;gBACd,QAAQ,KAAK,CAAC,kBAAkB;YAClC;QACF;QAEA;QAEA,OAAO;YACL,YAAY;QACd;IACF,GAAG;QAAC;QAAS;KAAS;AACxB;uCAEe"}},
    {"offset": {"line": 292, "column": 0}, "map": {"version":3,"sources":["file:///D:/Agrowcart/AgrowCart/Agrowcart/client/src/InitUser.tsx"],"sourcesContent":["'use client'\r\n\r\nimport { useSession } from 'next-auth/react'\r\nimport useGetMe from './hooks/useGetMe'\r\n\r\nfunction InitUser() {\r\n  const { status } = useSession()\r\n\r\n  // ‚úÖ hook always called\r\n  useGetMe(status === 'authenticated')\r\n\r\n  return null\r\n}\r\n\r\nexport default InitUser\r\n"],"names":[],"mappings":";;;;AAEA;AACA;AAHA;;;AAKA,SAAS;IACP,MAAM,EAAE,MAAM,EAAE,GAAG,IAAA,mJAAU;IAE7B,uBAAuB;IACvB,IAAA,oIAAQ,EAAC,WAAW;IAEpB,OAAO;AACT;uCAEe"}},
    {"offset": {"line": 312, "column": 0}, "map": {"version":3,"sources":["file:///D:/Agrowcart/AgrowCart/Agrowcart/client/src/lib/utils.ts"],"sourcesContent":["import { type ClassValue, clsx } from \"clsx\"\r\nimport { twMerge } from \"tailwind-merge\"\r\n\r\nexport function cn(...inputs: ClassValue[]) {\r\n    return twMerge(clsx(inputs))\r\n}\r\n"],"names":[],"mappings":";;;;AAAA;AACA;;;AAEO,SAAS,GAAG,GAAG,MAAoB;IACtC,OAAO,IAAA,sKAAO,EAAC,IAAA,6IAAI,EAAC;AACxB"}},
    {"offset": {"line": 327, "column": 0}, "map": {"version":3,"sources":["file:///D:/Agrowcart/AgrowCart/Agrowcart/client/src/components/GlobalChatBot.tsx"],"sourcesContent":["'use client'\r\nimport React, { useState, useRef, useEffect } from 'react'\r\nimport { motion, AnimatePresence } from 'motion/react'\r\nimport { MessageCircle, Send, X, Bot, User, Sparkles, MinusCircle, Loader, Paperclip, Volume2, FileIcon, Mic } from 'lucide-react'\r\nimport axios from 'axios'\r\nimport { cn } from '@/lib/utils'\r\n\r\ninterface IChatMessage {\r\n    id: string\r\n    role: 'user' | 'bot'\r\n    text: string\r\n    time: string\r\n}\r\n\r\nfunction GlobalChatBot() {\r\n    const [isOpen, setIsOpen] = useState(false)\r\n    const [messages, setMessages] = useState<IChatMessage[]>([\r\n        {\r\n            id: '1',\r\n            role: 'bot',\r\n            text: 'Hello! I am your Agrowcart Assistant. How can I help you today?',\r\n            time: new Date().toLocaleTimeString([], { hour: '2-digit', minute: '2-digit' })\r\n        }\r\n    ])\r\n    const [input, setInput] = useState(\"\")\r\n    const [loading, setLoading] = useState(false)\r\n    const [isListening, setIsListening] = useState(false)\r\n    const messagesEndRef = useRef<HTMLDivElement>(null)\r\n    const fileInputRef = useRef<HTMLInputElement>(null)\r\n\r\n    const startListening = () => {\r\n        if (!('webkitSpeechRecognition' in window) && !('SpeechRecognition' in window)) {\r\n            alert(\"Speech recognition is not supported in this browser.\")\r\n            return\r\n        }\r\n\r\n        const SpeechRecognition = (window as any).SpeechRecognition || (window as any).webkitSpeechRecognition\r\n        const recognition = new SpeechRecognition()\r\n\r\n        recognition.lang = 'en-US' // Default, can be tuned to user lang\r\n        recognition.interimResults = false\r\n        recognition.maxAlternatives = 1\r\n\r\n        recognition.onstart = () => setIsListening(true)\r\n        recognition.onend = () => setIsListening(false)\r\n        recognition.onerror = () => setIsListening(false)\r\n\r\n        recognition.onresult = (event: any) => {\r\n            const transcript = event.results[0][0].transcript\r\n            setInput(prev => (prev ? prev + \" \" + transcript : transcript))\r\n        }\r\n\r\n        recognition.start()\r\n    }\r\n\r\n    const speak = (text: string) => {\r\n        if (typeof window !== 'undefined' && window.speechSynthesis) {\r\n            window.speechSynthesis.cancel()\r\n            const utterance = new SpeechSynthesisUtterance(text)\r\n\r\n            // Reusing the language detection logic for inclusivity\r\n            const cookieValue = document.cookie.split('; ').find(row => row.startsWith('googtrans='))?.split('=')[1]\r\n            const lang = cookieValue?.split('/').pop() || 'en'\r\n            const mapping: { [key: string]: string } = { 'en': 'en-US', 'hi': 'hi-IN', 'ta': 'ta-IN', 'te': 'te-IN', 'kn': 'kn-IN', 'mr': 'mr-IN', 'pa': 'pa-IN', 'gu': 'gu-IN', 'bn': 'bn-IN' }\r\n            utterance.lang = mapping[lang] || 'en-US'\r\n\r\n            window.speechSynthesis.speak(utterance)\r\n        }\r\n    }\r\n\r\n    const scrollToBottom = () => {\r\n        messagesEndRef.current?.scrollIntoView({ behavior: \"smooth\" })\r\n    }\r\n\r\n    useEffect(() => {\r\n        scrollToBottom()\r\n    }, [messages, isOpen])\r\n\r\n    const handleFileUpload = async (e: React.ChangeEvent<HTMLInputElement>) => {\r\n        const file = e.target.files?.[0]\r\n        if (!file) return\r\n\r\n        const userMsg: IChatMessage = {\r\n            id: Date.now().toString(),\r\n            role: 'user',\r\n            text: `Uploaded file: ${file.name}`,\r\n            time: new Date().toLocaleTimeString([], { hour: '2-digit', minute: '2-digit' })\r\n        }\r\n        setMessages(prev => [...prev, userMsg])\r\n        setLoading(true)\r\n\r\n        // Simulated AI analysis of file context\r\n        setTimeout(() => {\r\n            const botMsg: IChatMessage = {\r\n                id: (Date.now() + 1).toString(),\r\n                role: 'bot',\r\n                text: `I've received your file \"${file.name}\". I'm analyzing its content for agricultural relevance. Is there anything specific you'd like me to look for?`,\r\n                time: new Date().toLocaleTimeString([], { hour: '2-digit', minute: '2-digit' })\r\n            }\r\n            setMessages(prev => [...prev, botMsg])\r\n            setLoading(false)\r\n        }, 1500)\r\n    }\r\n\r\n    const handleSend = async (e?: React.FormEvent) => {\r\n        e?.preventDefault()\r\n        if (!input.trim()) return\r\n\r\n        const userMsg: IChatMessage = {\r\n            id: Date.now().toString(),\r\n            role: 'user',\r\n            text: input,\r\n            time: new Date().toLocaleTimeString([], { hour: '2-digit', minute: '2-digit' })\r\n        }\r\n\r\n        setMessages(prev => [...prev, userMsg])\r\n        setInput(\"\")\r\n        setLoading(true)\r\n\r\n        try {\r\n            const res = await axios.post('/api/ai/chatbot', { message: input })\r\n            const botMsg: IChatMessage = {\r\n                id: (Date.now() + 1).toString(),\r\n                role: 'bot',\r\n                text: res.data.reply,\r\n                time: new Date().toLocaleTimeString([], { hour: '2-digit', minute: '2-digit' })\r\n            }\r\n            setMessages(prev => [...prev, botMsg])\r\n        } catch (error) {\r\n            console.error(error)\r\n            const errorMsg: IChatMessage = {\r\n                id: (Date.now() + 1).toString(),\r\n                role: 'bot',\r\n                text: \"I'm having trouble connecting to the network instantly. Please try again.\",\r\n                time: new Date().toLocaleTimeString([], { hour: '2-digit', minute: '2-digit' })\r\n            }\r\n            setMessages(prev => [...prev, errorMsg])\r\n        } finally {\r\n            setLoading(false)\r\n        }\r\n    }\r\n\r\n    return (\r\n        <div className=\"fixed bottom-6 right-6 z-[9999]\">\r\n            <AnimatePresence>\r\n                {isOpen && (\r\n                    <motion.div\r\n                        initial={{ opacity: 0, scale: 0.9, y: 20 }}\r\n                        animate={{ opacity: 1, scale: 1, y: 0 }}\r\n                        exit={{ opacity: 0, scale: 0.9, y: 20 }}\r\n                        className=\"absolute bottom-20 right-0 w-[90vw] md:w-[380px] h-[500px] bg-white rounded-3xl shadow-2xl border border-zinc-100 overflow-hidden flex flex-col\"\r\n                    >\r\n                        {/* Header */}\r\n                        <div className=\"bg-green-600 p-4 flex items-center justify-between text-white\">\r\n                            <div className=\"flex items-center gap-3\">\r\n                                <div className=\"w-10 h-10 bg-white/20 rounded-xl flex items-center justify-center backdrop-blur-sm\">\r\n                                    <Bot size={24} className=\"text-white\" />\r\n                                </div>\r\n                                <div>\r\n                                    <h3 className=\"font-bold text-lg leading-tight\">Agrowcart AI</h3>\r\n                                    <div className=\"flex items-center gap-1.5 opacity-80\">\r\n                                        <span className=\"w-2 h-2 bg-green-300 rounded-full animate-pulse\"></span>\r\n                                        <span className=\"text-[10px] uppercase tracking-widest font-bold\">Online</span>\r\n                                    </div>\r\n                                </div>\r\n                            </div>\r\n                            <button onClick={() => setIsOpen(false)} className=\"p-2 hover:bg-white/10 rounded-full transition-colors\">\r\n                                <MinusCircle size={20} />\r\n                            </button>\r\n                        </div>\r\n\r\n                        {/* Messages */}\r\n                        <div className=\"flex-1 overflow-y-auto p-4 space-y-4 bg-zinc-50 scrollbar-thin scrollbar-thumb-zinc-200\">\r\n                            {messages.map((msg) => (\r\n                                <motion.div\r\n                                    initial={{ opacity: 0, y: 10 }}\r\n                                    animate={{ opacity: 1, y: 0 }}\r\n                                    key={msg.id}\r\n                                    className={cn(\r\n                                        \"flex gap-3 max-w-[85%]\",\r\n                                        msg.role === 'user' ? \"ml-auto flex-row-reverse\" : \"\"\r\n                                    )}\r\n                                >\r\n                                    <div className={cn(\r\n                                        \"w-8 h-8 rounded-full flex items-center justify-center shrink-0 shadow-sm\",\r\n                                        msg.role === 'bot' ? \"bg-green-100 text-green-600\" : \"bg-zinc-200 text-zinc-600\"\r\n                                    )}>\r\n                                        {msg.role === 'bot' ? <Sparkles size={14} /> : <User size={14} />}\r\n                                    </div>\r\n                                    <div className={cn(\r\n                                        \"p-3 rounded-2xl text-sm shadow-sm relative group/msg\",\r\n                                        msg.role === 'bot' ? \"bg-white text-zinc-800 rounded-tl-none border border-zinc-100\" : \"bg-green-600 text-white rounded-tr-none\"\r\n                                    )}>\r\n                                        {msg.text.startsWith('Uploaded file:') && (\r\n                                            <div className=\"flex items-center gap-2 mb-2 p-2 bg-black/5 rounded-lg\">\r\n                                                <FileIcon size={16} className=\"text-green-600\" />\r\n                                                <span className=\"text-[10px] font-bold\">Document</span>\r\n                                            </div>\r\n                                        )}\r\n                                        <p className=\"leading-relaxed\">{msg.text}</p>\r\n                                        <div className=\"flex items-center justify-between mt-1\">\r\n                                            <p className={cn(\r\n                                                \"text-[9px] font-bold opacity-50\",\r\n                                                msg.role === 'bot' ? \"text-zinc-400\" : \"text-green-100\"\r\n                                            )}>{msg.time}</p>\r\n\r\n                                            {msg.role === 'bot' && (\r\n                                                <button\r\n                                                    onClick={() => speak(msg.text)}\r\n                                                    className=\"opacity-0 group-hover/msg:opacity-100 p-1 hover:bg-zinc-100 rounded-md transition-all\"\r\n                                                    title=\"Speak response\"\r\n                                                >\r\n                                                    <Volume2 size={12} className=\"text-green-600\" />\r\n                                                </button>\r\n                                            )}\r\n                                        </div>\r\n                                    </div>\r\n                                </motion.div>\r\n                            ))}\r\n                            {loading && (\r\n                                <div className=\"flex gap-3\">\r\n                                    <div className=\"w-8 h-8 rounded-full bg-green-100 text-green-600 flex items-center justify-center shrink-0\">\r\n                                        <Loader size={14} className=\"animate-spin\" />\r\n                                    </div>\r\n                                    <div className=\"bg-zinc-100 p-3 rounded-2xl rounded-tl-none text-zinc-400 text-xs font-bold italic\">\r\n                                        Thinking...\r\n                                    </div>\r\n                                </div>\r\n                            )}\r\n                            <div ref={messagesEndRef} />\r\n                        </div>\r\n\r\n                        {/* Input */}\r\n                        <form onSubmit={handleSend} className=\"p-4 bg-white border-t border-zinc-100 flex gap-2\">\r\n                            <input\r\n                                type=\"file\"\r\n                                ref={fileInputRef}\r\n                                onChange={handleFileUpload}\r\n                                className=\"hidden\"\r\n                            />\r\n                            <button\r\n                                type=\"button\"\r\n                                onClick={() => fileInputRef.current?.click()}\r\n                                className=\"p-3 bg-zinc-100 text-zinc-500 rounded-xl hover:bg-zinc-200 transition-colors\"\r\n                                title=\"Upload File\"\r\n                            >\r\n                                <Paperclip size={18} />\r\n                            </button>\r\n                            <button\r\n                                type=\"button\"\r\n                                onClick={startListening}\r\n                                className={cn(\r\n                                    \"p-3 rounded-xl transition-all shadow-sm\",\r\n                                    isListening ? \"bg-red-100 text-red-600 animate-pulse ring-2 ring-red-500/20\" : \"bg-zinc-100 text-zinc-500 hover:bg-zinc-200\"\r\n                                )}\r\n                                title=\"Voice to Text\"\r\n                            >\r\n                                <Mic size={18} />\r\n                            </button>\r\n                            <input\r\n                                type=\"text\"\r\n                                placeholder={isListening ? \"Listening...\" : \"Ask about products, orders...\"}\r\n                                className=\"flex-1 bg-zinc-100 rounded-xl px-4 py-3 text-sm font-medium outline-none focus:ring-2 focus:ring-green-500/20 text-zinc-800 placeholder:text-zinc-400\"\r\n                                value={input}\r\n                                onChange={(e) => setInput(e.target.value)}\r\n                            />\r\n                            <button\r\n                                type=\"submit\"\r\n                                disabled={!input.trim() || loading}\r\n                                className=\"bg-green-600 text-white p-3 rounded-xl hover:bg-green-700 transition-colors disabled:opacity-50 disabled:cursor-not-allowed shadow-lg shadow-green-600/20\"\r\n                            >\r\n                                <Send size={18} />\r\n                            </button>\r\n                        </form>\r\n                    </motion.div>\r\n                )}\r\n            </AnimatePresence>\r\n\r\n            <motion.button\r\n                whileHover={{ scale: 1.1 }}\r\n                whileTap={{ scale: 0.9 }}\r\n                onClick={() => setIsOpen(!isOpen)}\r\n                className=\"bg-green-600 text-white p-4 md:p-5 rounded-full shadow-2xl shadow-green-900/40 border-4 border-white flex items-center justify-center\"\r\n            >\r\n                {isOpen ? <X size={28} /> : <MessageCircle size={28} />}\r\n            </motion.button>\r\n        </div>\r\n    )\r\n}\r\n\r\nexport default GlobalChatBot\r\n"],"names":[],"mappings":"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"}},
    {"offset": {"line": 899, "column": 0}, "map": {"version":3,"sources":["file:///D:/Agrowcart/AgrowCart/Agrowcart/client/src/i18n/config.ts"],"sourcesContent":["export const locales = ['en', 'hi', 'ta', 'te', 'kn', 'mr'] as const;\r\nexport type Locale = (typeof locales)[number];\r\n\r\nexport const defaultLocale: Locale = 'en';\r\n\r\nexport const localeNames: Record<Locale, { native: string; english: string }> = {\r\n    en: { native: 'English', english: 'English' },\r\n    hi: { native: '‡§π‡§ø‡§Ç‡§¶‡•Ä', english: 'Hindi' },\r\n    ta: { native: '‡Æ§‡ÆÆ‡Æø‡Æ¥‡Øç', english: 'Tamil' },\r\n    te: { native: '‡∞§‡±Ü‡∞≤‡±Å‡∞ó‡±Å', english: 'Telugu' },\r\n    kn: { native: '‡≤ï‡≤®‡≥ç‡≤®‡≤°', english: 'Kannada' },\r\n    mr: { native: '‡§Æ‡§∞‡§æ‡§†‡•Ä', english: 'Marathi' },\r\n};\r\n"],"names":[],"mappings":";;;;;;;;AAAO,MAAM,UAAU;IAAC;IAAM;IAAM;IAAM;IAAM;IAAM;CAAK;AAGpD,MAAM,gBAAwB;AAE9B,MAAM,cAAmE;IAC5E,IAAI;QAAE,QAAQ;QAAW,SAAS;IAAU;IAC5C,IAAI;QAAE,QAAQ;QAAS,SAAS;IAAQ;IACxC,IAAI;QAAE,QAAQ;QAAS,SAAS;IAAQ;IACxC,IAAI;QAAE,QAAQ;QAAU,SAAS;IAAS;IAC1C,IAAI;QAAE,QAAQ;QAAS,SAAS;IAAU;IAC1C,IAAI;QAAE,QAAQ;QAAS,SAAS;IAAU;AAC9C"}},
    {"offset": {"line": 946, "column": 0}, "map": {"version":3,"sources":["file:///D:/Agrowcart/AgrowCart/Agrowcart/client/src/i18n/LanguageProvider.tsx"],"sourcesContent":["'use client';\r\n\r\nimport { createContext, useContext, useState, useEffect, ReactNode } from 'react';\r\nimport type { Locale } from './config';\r\nimport { defaultLocale } from './config';\r\n\r\ntype Messages = Record<string, any>;\r\n\r\ninterface LanguageContextType {\r\n    locale: Locale;\r\n    setLocale: (locale: Locale) => void;\r\n    t: (key: string, variables?: Record<string, any>) => string;\r\n}\r\n\r\nconst LanguageContext = createContext<LanguageContextType | undefined>(undefined);\r\n\r\nexport function LanguageProvider({ children }: { children: ReactNode }) {\r\n    const [locale, setLocaleState] = useState<Locale>(defaultLocale);\r\n    const [messages, setMessages] = useState<Messages>({});\r\n\r\n    // Load messages when locale changes\r\n    useEffect(() => {\r\n        const loadMessages = async () => {\r\n            try {\r\n                const msgs = await import(`../../messages/${locale}.json`);\r\n                setMessages(msgs.default);\r\n            } catch (error) {\r\n                console.error(`Failed to load messages for locale: ${locale}`, error);\r\n                // Fallback to English\r\n                if (locale !== 'en') {\r\n                    const fallback = await import(`../../messages/en.json`);\r\n                    setMessages(fallback.default);\r\n                }\r\n            }\r\n        };\r\n        loadMessages();\r\n    }, [locale]);\r\n\r\n    // Load locale from localStorage on mount\r\n    useEffect(() => {\r\n        const savedLocale = localStorage.getItem('preferred-locale') as Locale;\r\n        if (savedLocale && ['en', 'hi', 'ta', 'te', 'kn', 'mr'].includes(savedLocale)) {\r\n            setLocaleState(savedLocale);\r\n        }\r\n    }, []);\r\n\r\n    const setLocale = (newLocale: Locale) => {\r\n        setLocaleState(newLocale);\r\n        localStorage.setItem('preferred-locale', newLocale);\r\n    };\r\n\r\n    // Translation function with nested key support and variable interpolation\r\n    const t = (key: string, variables?: Record<string, any>): string => {\r\n        const keys = key.split('.');\r\n        let value: any = messages;\r\n\r\n        for (const k of keys) {\r\n            if (value && typeof value === 'object' && k in value) {\r\n                value = value[k];\r\n            } else {\r\n                console.warn(`Translation key not found: ${key}`);\r\n                return key; // Return the key itself if not found\r\n            }\r\n        }\r\n\r\n        if (typeof value !== 'string') {\r\n            console.warn(`Translation value is not a string: ${key}`);\r\n            return key;\r\n        }\r\n\r\n        // Replace variables like {name}, {count}\r\n        if (variables) {\r\n            return value.replace(/\\{(\\w+)\\}/g, (match, varName) => {\r\n                return variables[varName] !== undefined ? String(variables[varName]) : match;\r\n            });\r\n        }\r\n\r\n        return value;\r\n    };\r\n\r\n    return (\r\n        <LanguageContext.Provider value={{ locale, setLocale, t }}>\r\n            {children}\r\n        </LanguageContext.Provider>\r\n    );\r\n}\r\n\r\nexport function useLanguage() {\r\n    const context = useContext(LanguageContext);\r\n    if (!context) {\r\n        throw new Error('useLanguage must be used within a LanguageProvider');\r\n    }\r\n    return context;\r\n}\r\n\r\n// Hook for scoped translations (similar to next-intl's useTranslations)\r\nexport function useTranslations(namespace?: string) {\r\n    const { t } = useLanguage();\r\n\r\n    return (key: string, variables?: Record<string, any>) => {\r\n        const fullKey = namespace ? `${namespace}.${key}` : key;\r\n        return t(fullKey, variables);\r\n    };\r\n}\r\n"],"names":[],"mappings":";;;;;;;;;AAEA;AAEA;AAJA;;;;AAcA,MAAM,gCAAkB,IAAA,sNAAa,EAAkC;AAEhE,SAAS,iBAAiB,EAAE,QAAQ,EAA2B;IAClE,MAAM,CAAC,QAAQ,eAAe,GAAG,IAAA,iNAAQ,EAAS,sIAAa;IAC/D,MAAM,CAAC,UAAU,YAAY,GAAG,IAAA,iNAAQ,EAAW,CAAC;IAEpD,oCAAoC;IACpC,IAAA,kNAAS,EAAC;QACN,MAAM,eAAe;YACjB,IAAI;gBACA,MAAM,OAAO;;;;;;;;;;;;;;;;;;;;;;;;;0BAAa,CAAC,eAAe,EAAE,OAAO,KAAK,CAAC;gBACzD,YAAY,KAAK,OAAO;YAC5B,EAAE,OAAO,OAAO;gBACZ,QAAQ,KAAK,CAAC,CAAC,oCAAoC,EAAE,QAAQ,EAAE;gBAC/D,sBAAsB;gBACtB,IAAI,WAAW,MAAM;oBACjB,MAAM,WAAW;oBACjB,YAAY,SAAS,OAAO;gBAChC;YACJ;QACJ;QACA;IACJ,GAAG;QAAC;KAAO;IAEX,yCAAyC;IACzC,IAAA,kNAAS,EAAC;QACN,MAAM,cAAc,aAAa,OAAO,CAAC;QACzC,IAAI,eAAe;YAAC;YAAM;YAAM;YAAM;YAAM;YAAM;SAAK,CAAC,QAAQ,CAAC,cAAc;YAC3E,eAAe;QACnB;IACJ,GAAG,EAAE;IAEL,MAAM,YAAY,CAAC;QACf,eAAe;QACf,aAAa,OAAO,CAAC,oBAAoB;IAC7C;IAEA,0EAA0E;IAC1E,MAAM,IAAI,CAAC,KAAa;QACpB,MAAM,OAAO,IAAI,KAAK,CAAC;QACvB,IAAI,QAAa;QAEjB,KAAK,MAAM,KAAK,KAAM;YAClB,IAAI,SAAS,OAAO,UAAU,YAAY,KAAK,OAAO;gBAClD,QAAQ,KAAK,CAAC,EAAE;YACpB,OAAO;gBACH,QAAQ,IAAI,CAAC,CAAC,2BAA2B,EAAE,KAAK;gBAChD,OAAO,KAAK,qCAAqC;YACrD;QACJ;QAEA,IAAI,OAAO,UAAU,UAAU;YAC3B,QAAQ,IAAI,CAAC,CAAC,mCAAmC,EAAE,KAAK;YACxD,OAAO;QACX;QAEA,yCAAyC;QACzC,IAAI,WAAW;YACX,OAAO,MAAM,OAAO,CAAC,cAAc,CAAC,OAAO;gBACvC,OAAO,SAAS,CAAC,QAAQ,KAAK,YAAY,OAAO,SAAS,CAAC,QAAQ,IAAI;YAC3E;QACJ;QAEA,OAAO;IACX;IAEA,qBACI,8OAAC,gBAAgB,QAAQ;QAAC,OAAO;YAAE;YAAQ;YAAW;QAAE;kBACnD;;;;;;AAGb;AAEO,SAAS;IACZ,MAAM,UAAU,IAAA,mNAAU,EAAC;IAC3B,IAAI,CAAC,SAAS;QACV,MAAM,IAAI,MAAM;IACpB;IACA,OAAO;AACX;AAGO,SAAS,gBAAgB,SAAkB;IAC9C,MAAM,EAAE,CAAC,EAAE,GAAG;IAEd,OAAO,CAAC,KAAa;QACjB,MAAM,UAAU,YAAY,GAAG,UAAU,CAAC,EAAE,KAAK,GAAG;QACpD,OAAO,EAAE,SAAS;IACtB;AACJ"}},
    {"offset": {"line": 1082, "column": 0}, "map": {"version":3,"sources":["file:///D:/Agrowcart/AgrowCart/Agrowcart/client/src/components/GoogleAnalytics.tsx"],"sourcesContent":["'use client'\r\n\r\nimport Script from 'next/script'\r\n\r\nexport default function GoogleAnalytics({ GA_MEASUREMENT_ID }: { GA_MEASUREMENT_ID: string }) {\r\n    return (\r\n        <>\r\n            <Script\r\n                strategy=\"afterInteractive\"\r\n                src={`https://www.googletagmanager.com/gtag/js?id=${GA_MEASUREMENT_ID}`}\r\n            />\r\n            <Script\r\n                id=\"google-analytics\"\r\n                strategy=\"afterInteractive\"\r\n                dangerouslySetInnerHTML={{\r\n                    __html: `\r\n            window.dataLayer = window.dataLayer || [];\r\n            function gtag(){dataLayer.push(arguments);}\r\n            gtag('js', new Date());\r\n            gtag('config', '${GA_MEASUREMENT_ID}', {\r\n              page_path: window.location.pathname,\r\n            });\r\n          `,\r\n                }}\r\n            />\r\n        </>\r\n    )\r\n}\r\n"],"names":[],"mappings":";;;;;AAEA;AAFA;;;AAIe,SAAS,gBAAgB,EAAE,iBAAiB,EAAiC;IACxF,qBACI;;0BACI,8OAAC,yIAAM;gBACH,UAAS;gBACT,KAAK,CAAC,4CAA4C,EAAE,mBAAmB;;;;;;0BAE3E,8OAAC,yIAAM;gBACH,IAAG;gBACH,UAAS;gBACT,yBAAyB;oBACrB,QAAQ,CAAC;;;;4BAID,EAAE,kBAAkB;;;UAGtC,CAAC;gBACK;;;;;;;;AAIhB"}},
    {"offset": {"line": 1127, "column": 0}, "map": {"version":3,"sources":["file:///D:/Agrowcart/AgrowCart/Agrowcart/client/src/components/GoogleAds.tsx"],"sourcesContent":["'use client'\r\n\r\nimport Script from 'next/script'\r\n\r\nexport default function GoogleAds({ GOOGLE_ADS_ID }: { GOOGLE_ADS_ID: string }) {\r\n    return (\r\n        <>\r\n            {/* Google Ads (AdSense) Script */}\r\n            <Script\r\n                async\r\n                src={`https://pagead2.googlesyndication.com/pagead/js/adsbygoogle.js?client=${GOOGLE_ADS_ID}`}\r\n                crossOrigin=\"anonymous\"\r\n                strategy=\"afterInteractive\"\r\n            />\r\n\r\n            {/* Google Ads Conversion Tracking */}\r\n            <Script\r\n                id=\"google-ads-config\"\r\n                strategy=\"afterInteractive\"\r\n                dangerouslySetInnerHTML={{\r\n                    __html: `\r\n            window.dataLayer = window.dataLayer || [];\r\n            function gtag(){dataLayer.push(arguments);}\r\n            gtag('js', new Date());\r\n            gtag('config', '${GOOGLE_ADS_ID}');\r\n          `,\r\n                }}\r\n            />\r\n        </>\r\n    )\r\n}\r\n"],"names":[],"mappings":";;;;;AAEA;AAFA;;;AAIe,SAAS,UAAU,EAAE,aAAa,EAA6B;IAC1E,qBACI;;0BAEI,8OAAC,yIAAM;gBACH,KAAK;gBACL,KAAK,CAAC,sEAAsE,EAAE,eAAe;gBAC7F,aAAY;gBACZ,UAAS;;;;;;0BAIb,8OAAC,yIAAM;gBACH,IAAG;gBACH,UAAS;gBACT,yBAAyB;oBACrB,QAAQ,CAAC;;;;4BAID,EAAE,cAAc;UAClC,CAAC;gBACK;;;;;;;;AAIhB"}},
    {"offset": {"line": 1214, "column": 0}, "map": {"version":3,"sources":["file:///D:/Agrowcart/AgrowCart/Agrowcart/client/src/context/SocketContext.tsx"],"sourcesContent":["'use client'\r\n\r\nimport React, { createContext, useContext, useEffect, useState, useRef } from 'react'\r\nimport { io, Socket } from 'socket.io-client'\r\nimport { useSession } from 'next-auth/react'\r\nimport { MessageSquare } from 'lucide-react'\r\nimport toast from 'react-hot-toast'\r\n\r\ninterface SocketContextType {\r\n    socket: Socket | null\r\n    isConnected: boolean\r\n    incomingCall: { roomId: string, signal: any, from: string } | null\r\n    answerCall: () => void\r\n    clearCall: () => void\r\n    joinRoom: (roomId: string) => void\r\n}\r\n\r\nconst SocketContext = createContext<SocketContextType | undefined>(undefined)\r\n\r\nexport const useSocket = () => {\r\n    const context = useContext(SocketContext)\r\n    if (!context) {\r\n        throw new Error(\"useSocket must be used within a SocketProvider\")\r\n    }\r\n    return context\r\n}\r\n\r\nexport const SocketProvider = ({ children }: { children: React.ReactNode }) => {\r\n    const { data: session } = useSession()\r\n    const [socket, setSocket] = useState<Socket | null>(null)\r\n    const [isConnected, setIsConnected] = useState(false)\r\n    const [incomingCall, setIncomingCall] = useState<{ roomId: string, signal: any, from: string } | null>(null)\r\n    const joinedRoomsRef = useRef<Set<string>>(new Set())\r\n\r\n    useEffect(() => {\r\n        // Initialize Socket\r\n        let socketUrl = \"http://localhost:4000\";\r\n        if (typeof window !== \"undefined\") {\r\n            const hostname = window.location.hostname;\r\n            socketUrl = `http://${hostname}:4000`;\r\n        }\r\n\r\n        console.log(\"üîå SocketProvider: Initializing connection to\", socketUrl)\r\n\r\n        const socketInstance = io(process.env.NEXT_PUBLIC_SOCKET_SERVER || socketUrl, {\r\n            reconnectionAttempts: 10,\r\n            reconnectionDelay: 1000,\r\n            transports: ['websocket'],\r\n            forceNew: false\r\n        })\r\n\r\n        socketInstance.on(\"connect\", () => {\r\n            console.log(\"üü¢ SocketProvider: Connected\", socketInstance.id)\r\n            setIsConnected(true)\r\n\r\n            // Correct Logic: Identity Handshake\r\n            if (session?.user?.id) {\r\n                console.log(\"SocketProvider: Establishing Identity for\", session.user.id)\r\n                socketInstance.emit(\"identity\", session.user.id)\r\n\r\n                // Also join user specific room for legacy compatibility\r\n                socketInstance.emit(\"join-room\", `user:${session.user.id}`)\r\n\r\n                // Re-join other rooms if needed\r\n                joinedRoomsRef.current.forEach(room => {\r\n                    socketInstance.emit(\"join-room\", room)\r\n                })\r\n            }\r\n        })\r\n\r\n        socketInstance.on(\"disconnect\", () => {\r\n            console.warn(\"üü° SocketProvider: Disconnected\")\r\n            setIsConnected(false)\r\n        })\r\n\r\n        // Global Listeners\r\n        socketInstance.on(\"incoming-call-alert\", (data) => {\r\n            console.log(\"üîî SocketProvider: Global Call Alert Received\", data)\r\n            // 1. Play Bell/Ringtone\r\n            try {\r\n                const ringtone = new Audio('https://assets.mixkit.co/active_storage/sfx/2358/2358-preview.mp3') // Elegant bell song\r\n                ringtone.volume = 0.3; // Audible but subtle\r\n                ringtone.play().catch(() => { });\r\n            } catch (e) { }\r\n\r\n            // 2. Voice Synthesis\r\n            try {\r\n                const speech = new SpeechSynthesisUtterance(\"Incoming Negotiation Call\");\r\n                speech.rate = 1.0;\r\n                speech.pitch = 1.0;\r\n                window.speechSynthesis.speak(speech);\r\n            } catch (e) { }\r\n\r\n            setIncomingCall(data)\r\n        })\r\n\r\n        socketInstance.on(\"new-message-notification\", (data) => {\r\n            // Only show toast if we are NOT the sender\r\n            if (session?.user?.id && data.senderId !== session.user.id) {\r\n                console.log(\"üí¨ SocketProvider: New Message Alert\", data)\r\n\r\n                // 1. Play Chime\r\n                try {\r\n                    const chime = new Audio('https://assets.mixkit.co/active_storage/sfx/2354/2354-preview.mp3')\r\n                    chime.volume = 0.3; // Distraction-free volume\r\n                    chime.play().catch(() => { });\r\n                } catch (e) { }\r\n\r\n                // 2. Beautiful Toast\r\n                toast.custom((t) => (\r\n                    <div className={`${t.visible ? 'animate-enter' : 'animate-leave'} max-w-md w-full bg-white shadow-2xl rounded-[2rem] pointer-events-auto flex ring-1 ring-black ring-opacity-5 border-l-8 border-green-600 overflow-hidden`}>\r\n                        <div className=\"flex-1 w-0 p-6\">\r\n                            <div className=\"flex items-start\">\r\n                                <div className=\"flex-shrink-0 pt-0.5\">\r\n                                    <div className=\"h-12 w-12 rounded-2xl bg-zinc-900 flex items-center justify-center text-green-400\">\r\n                                        <MessageSquare size={20} />\r\n                                    </div>\r\n                                </div>\r\n                                <div className=\"ml-4 flex-1\">\r\n                                    <p className=\"text-sm font-black text-zinc-900\">Message from {data.senderName || 'Partner'}</p>\r\n                                    <p className=\"mt-1 text-sm font-medium text-zinc-500 line-clamp-1 italic\">\"{data.text}\"</p>\r\n                                </div>\r\n                            </div>\r\n                        </div>\r\n                        <div className=\"flex border-l border-zinc-100 bg-zinc-50/50\">\r\n                            <button\r\n                                onClick={() => toast.dismiss(t.id)}\r\n                                className=\"w-full border border-transparent rounded-none rounded-r-lg p-4 flex items-center justify-center text-sm font-black text-zinc-400 hover:text-red-500 transition-colors\"\r\n                            >\r\n                                Close\r\n                            </button>\r\n                        </div>\r\n                    </div>\r\n                ), { duration: 5000 });\r\n\r\n                // 3. Voice Synthesis\r\n                try {\r\n                    const speech = new SpeechSynthesisUtterance(`Message from ${data.senderName || 'Partner'}`);\r\n                    speech.rate = 1.1;\r\n                    speech.pitch = 1.2;\r\n                    window.speechSynthesis.speak(speech);\r\n                } catch (e) { }\r\n            }\r\n        })\r\n\r\n        setSocket(socketInstance)\r\n\r\n        return () => {\r\n            socketInstance.disconnect()\r\n        }\r\n    }, [session?.user?.id])\r\n\r\n    const joinRoom = (roomId: string) => {\r\n        if (!joinedRoomsRef.current.has(roomId)) {\r\n            console.log(\"SocketProvider: Queuing/Joining Room\", roomId)\r\n            joinedRoomsRef.current.add(roomId)\r\n            if (socket) {\r\n                socket.emit(\"join-room\", roomId)\r\n            }\r\n        }\r\n    }\r\n\r\n    const answerCall = () => {\r\n        // Logic handled by components consuming the state\r\n        console.log(\"SocketProvider: Call Answered Action Triggered\")\r\n    }\r\n\r\n    const clearCall = () => {\r\n        setIncomingCall(null)\r\n    }\r\n\r\n    return (\r\n        <SocketContext.Provider value={{\r\n            socket,\r\n            isConnected,\r\n            incomingCall,\r\n            answerCall,\r\n            clearCall,\r\n            joinRoom\r\n        }}>\r\n            {children}\r\n        </SocketContext.Provider>\r\n    )\r\n}\r\n"],"names":[],"mappings":"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"}}]
}