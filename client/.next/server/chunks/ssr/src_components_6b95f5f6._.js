module.exports=[8987,a=>{"use strict";var b=a.i(187924),c=a.i(572131),d=a.i(346271),e=a.i(304334),f=a.i(883497),g=a.i(410227),h=a.i(660246),i=a.i(170106);let j=(0,i.default)("layout-dashboard",[["rect",{width:"7",height:"9",x:"3",y:"3",rx:"1",key:"10lvy0"}],["rect",{width:"7",height:"5",x:"14",y:"3",rx:"1",key:"16une8"}],["rect",{width:"7",height:"9",x:"14",y:"12",rx:"1",key:"1hutg5"}],["rect",{width:"7",height:"5",x:"3",y:"16",rx:"1",key:"ldoo1y"}]]);var k=a.i(941675);let l=(0,i.default)("arrow-up-right",[["path",{d:"M7 7h10v10",key:"1tivn9"}],["path",{d:"M7 17 17 7",key:"1vkiza"}]]),m=(0,i.default)("arrow-down-right",[["path",{d:"m7 7 10 10",key:"1fmybs"}],["path",{d:"M17 7v10H7",key:"6fjiku"}]]);var n=a.i(290669),o=a.i(915618),p=a.i(776803),q=a.i(923665),r=a.i(618155),s=a.i(48662),t=a.i(659854),u=a.i(758042),v=a.i(467149),w=a.i(238246);a.s(["default",0,function({earning:a,stats:i,chartData:x}){let[y,z]=(0,c.useState)("total"),A="today"===y?a.today:"sevenDays"===y?a.sevenDays:a.total,B=["bg-blue-500/10 text-blue-500","bg-green-500/10 text-green-500","bg-amber-500/10 text-amber-500","bg-emerald-500/10 text-emerald-500"],C=(Array.isArray(i)?i:[]).map((a,b)=>({...a,icon:[f.Package,h.Users,g.Truck,e.IndianRupee][b]||f.Package,color:B[b]||B[0],trend:b%2==0?"+12.5%":"+5.2%",isUp:!0}));return(0,b.jsx)("div",{className:"min-h-screen bg-zinc-50 pb-20 pt-[120px]",children:(0,b.jsxs)("div",{className:"w-[95%] md:w-[85%] mx-auto space-y-10",children:[(0,b.jsxs)("div",{className:"flex flex-col md:flex-row md:items-center justify-between gap-6",children:[(0,b.jsxs)("div",{className:"space-y-1",children:[(0,b.jsxs)("div",{className:"flex items-center gap-2 text-green-600 font-bold uppercase tracking-[0.2em] text-[10px]",children:[(0,b.jsx)(j,{size:14}),(0,b.jsx)("span",{children:"Platform Administration"})]}),(0,b.jsx)("h1",{className:"text-4xl font-black text-zinc-900 tracking-tight",children:"Control Center"}),(0,b.jsx)("p",{className:"text-zinc-500 text-sm font-medium",children:"Monitoring millet ecosystem metrics and chain performance."})]}),(0,b.jsxs)("div",{className:"flex flex-wrap items-center gap-3",children:[(0,b.jsx)(w.default,{href:"/admin/view-products",children:(0,b.jsxs)("button",{className:"bg-zinc-900 text-white px-6 py-4 rounded-2xl font-black uppercase tracking-widest text-[10px] flex items-center gap-2 shadow-xl shadow-zinc-900/20 hover:bg-zinc-800 transition-all",children:[(0,b.jsx)(f.Package,{size:14}),"Manage Products"]})}),(0,b.jsx)(w.default,{href:"/admin/manage-orders",children:(0,b.jsxs)("button",{className:"bg-white border border-zinc-200 text-zinc-600 px-6 py-4 rounded-2xl font-black uppercase tracking-widest text-[10px] flex items-center gap-2 shadow-sm hover:border-zinc-900 hover:text-zinc-900 transition-all",children:[(0,b.jsx)(p.ClipboardCheck,{size:14}),"Orders"]})}),(0,b.jsx)(w.default,{href:"/admin/add-product",children:(0,b.jsxs)("button",{className:"bg-green-600 text-white px-6 py-4 rounded-2xl font-black uppercase tracking-widest text-[10px] flex items-center gap-2 shadow-xl shadow-green-600/20 hover:bg-green-700 transition-all",children:[(0,b.jsx)(o.Plus,{size:14}),"New"]})})]}),(0,b.jsx)("div",{className:"flex items-center gap-2 bg-white p-1.5 rounded-2xl shadow-sm border border-zinc-100",children:["today","sevenDays","total"].map(a=>(0,b.jsx)("button",{onClick:()=>z(a),className:`px-6 py-2 rounded-xl text-xs font-black uppercase tracking-wider transition-all ${y===a?"bg-zinc-900 text-white shadow-lg":"text-zinc-400 hover:text-zinc-600 hover:bg-zinc-50"}`,children:"sevenDays"===a?"7 Days":a},a))})]}),(0,b.jsxs)("div",{className:"grid grid-cols-1 lg:grid-cols-3 gap-8",children:[(0,b.jsxs)(d.motion.div,{initial:{opacity:0,scale:.95},animate:{opacity:1,scale:1},className:"lg:col-span-1 bg-zinc-900 p-10 rounded-[3rem] text-white shadow-2xl relative overflow-hidden flex flex-col justify-between min-h-[280px]",children:[(0,b.jsx)("div",{className:"absolute top-0 right-0 w-40 h-40 bg-green-500/10 rounded-full blur-[60px] -mr-20 -mt-20"}),(0,b.jsxs)("div",{children:[(0,b.jsxs)("div",{className:"flex items-center gap-2 text-green-400 font-bold uppercase tracking-widest text-[10px] mb-4",children:[(0,b.jsx)(e.IndianRupee,{size:16}),(0,b.jsx)("span",{children:"Financial Overview"})]}),(0,b.jsx)("h2",{className:"text-zinc-400 text-sm font-medium mb-1",children:"today"===y?"Daily Revenue":"sevenDays"===y?"Weekly Revenue":"Lifetime Revenue"}),(0,b.jsxs)("div",{className:"flex items-baseline gap-2",children:[(0,b.jsxs)("span",{className:"text-5xl font-black tracking-tighter text-white",children:["₹",A.toLocaleString()]}),(0,b.jsxs)("span",{className:"text-green-400 font-bold text-sm bg-green-400/10 px-2 py-0.5 rounded-lg flex items-center gap-0.5",children:[(0,b.jsx)(l,{size:14})," 12%"]})]})]}),(0,b.jsxs)("div",{className:"pt-8 border-t border-white/10 flex items-center justify-between",children:[(0,b.jsxs)("div",{children:[(0,b.jsx)("div",{className:"text-[10px] font-black uppercase text-zinc-500 tracking-widest",children:"Active Scale"}),(0,b.jsx)("div",{className:"text-lg font-bold",children:"100% Load"})]}),(0,b.jsx)(n.Activity,{className:"text-green-400",size:24})]})]}),(0,b.jsxs)(d.motion.div,{initial:{opacity:0,y:20},animate:{opacity:1,y:0},className:"lg:col-span-2 bg-white p-8 rounded-[3rem] shadow-2xl shadow-zinc-900/5 border border-zinc-100",children:[(0,b.jsxs)("div",{className:"flex items-center justify-between mb-8",children:[(0,b.jsxs)("div",{children:[(0,b.jsx)("h3",{className:"text-xl font-black text-zinc-900 tracking-tight",children:"Orders Velocity"}),(0,b.jsx)("p",{className:"text-zinc-400 text-xs font-medium",children:"Daily order frequency for the current week."})]}),(0,b.jsxs)("div",{className:"flex items-center gap-2 bg-zinc-50 px-3 py-1.5 rounded-xl border border-zinc-100",children:[(0,b.jsx)(k.Calendar,{size:14,className:"text-zinc-400"}),(0,b.jsx)("span",{className:"text-[10px] font-black uppercase text-zinc-500",children:"Weekly Stats"})]})]}),(0,b.jsx)("div",{className:"h-[180px] w-full",children:(0,b.jsx)(s.ResponsiveContainer,{width:"100%",height:"100%",children:(0,b.jsxs)(r.BarChart,{data:x||[],children:[(0,b.jsx)(q.Bar,{dataKey:"orders",children:Array.isArray(x)&&x.map((a,c)=>(0,b.jsx)(v.Cell,{fill:c===x.length-1?"#16A34A":"#E4E4E7"},`cell-${c}`))}),(0,b.jsx)(u.XAxis,{dataKey:"day",axisLine:!1,tickLine:!1,tick:{fontSize:10,fontWeight:700,fill:"#A1A1AA"},dy:10}),(0,b.jsx)(t.Tooltip,{cursor:{fill:"transparent"},contentStyle:{borderRadius:"1rem",border:"none",boxShadow:"0 10px 15px -3px rgb(0 0 0 / 0.1)"}})]})})})]})]}),(0,b.jsx)("div",{className:"grid grid-cols-1 sm:grid-cols-2 lg:grid-cols-4 gap-6",children:C.map((a,c)=>{let e=a.icon;return(0,b.jsxs)(d.motion.div,{initial:{opacity:0,y:20},animate:{opacity:1,y:0},transition:{delay:.1*c},whileHover:{y:-5},className:"bg-white border border-zinc-100 shadow-xl shadow-zinc-900/5 rounded-[2.5rem] p-8 flex flex-col gap-6 relative group transition-all",children:[(0,b.jsx)("div",{className:`w-14 h-14 rounded-2xl ${a.color} flex items-center justify-center group-hover:scale-110 transition-transform`,children:(0,b.jsx)(e,{size:28})}),(0,b.jsxs)("div",{children:[(0,b.jsx)("p",{className:"text-zinc-500 text-[10px] font-black uppercase tracking-widest mb-1",children:a.title}),(0,b.jsxs)("div",{className:"flex items-end justify-between",children:[(0,b.jsx)("p",{className:"text-3xl font-black text-zinc-900 tracking-tight",children:a.value.toLocaleString()}),(0,b.jsxs)("div",{className:`flex items-center gap-0.5 text-[10px] font-black ${a.isUp?"text-green-500":"text-red-500"}`,children:[a.isUp?(0,b.jsx)(l,{size:12}):(0,b.jsx)(m,{size:12}),a.trend]})]})]})]},c)})})]})})}],8987)},715660,a=>{"use strict";var b=a.i(187924),c=a.i(212469),d=a.i(83490),e=a.i(572131),f=a.i(214174),g=a.i(819721),h=a.i(228193),i=a.i(692759),j=a.i(666523),k=a.i(262036),l=a.i(346271);let m=function({orderId:a,deliveryBoyId:f}){let[g,m]=(0,e.useState)(""),[n,o]=(0,e.useState)(),p=(0,e.useRef)(null),[q,r]=(0,e.useState)(!1),[s,t]=(0,e.useState)([]);(0,e.useEffect)(()=>{if(!a)return;let b=(0,c.getSocket)();return b.emit("join-room",a),b.on("send-message",b=>{b.roomId===a&&o(a=>[...a,b])}),()=>{b.off("send-message")}},[a]),(0,e.useEffect)(()=>{p.current?.scrollTo({top:p.current.scrollHeight,behavior:"smooth"})},[n]),(0,e.useEffect)(()=>{(async()=>{if(a)try{let b=await d.default.post("/api/chat/messages",{roomId:a});o(b.data)}catch(a){console.log(a)}})()},[a]);let u=async()=>{r(!0);try{let a=n?.filter(a=>a.senderId.toString()!==f)?.at(-1),b=await d.default.post("/api/chat/ai-suggestions",{message:a?.text,role:"delivery_boy"});t(b.data),r(!1)}catch(a){console.log(a),r(!1)}};return(0,b.jsxs)("div",{className:"bg-white rounded-3xl shadow-lg border p-4 h-[430px] flex flex-col",children:[(0,b.jsxs)("div",{className:"flex justify-between items-center mb-3",children:[(0,b.jsx)("span",{className:"font-semibold text-gray-700 text-sm",children:"Quick Replies"}),(0,b.jsxs)(l.motion.button,{whileTap:{scale:.9},disabled:q,onClick:u,className:"px-3 py-1 text-xs flex items-center gap-1 bg-purple-100 text-purple-700 rounded-full shadow-sm border border-purple-200",children:[(0,b.jsx)(j.Sparkle,{size:14}),q?(0,b.jsx)(h.Loader,{className:"w-5 h-5 animate-spin"}):"AI suggest"]})]}),(0,b.jsx)("div",{className:"flex gap-2 flex-wrap mb-3",children:s.map((a,c)=>(0,b.jsx)(l.motion.div,{whileTap:{scale:.92},className:"px-3 py-1 text-xs bg-green-50 border border-green-200 cursor-pointer text-green-700 rounded-full",onClick:()=>m(a),children:a},a))}),(0,b.jsx)("div",{className:"flex-1 overflow-y-auto p-2 space-y-3",ref:p,children:(0,b.jsx)(k.AnimatePresence,{children:Array.isArray(n)&&n.map((a,c)=>(0,b.jsx)(l.motion.div,{initial:{opacity:0,y:15},animate:{opacity:1,y:0},exit:{opacity:0},transition:{duration:.2},className:`flex ${(a?.senderId?.toString()||"")==f?"justify-end":"justify-start"}`,children:(0,b.jsxs)("div",{className:`px-4 py-2 max-w-[75%] rounded-2xl shadow 
                  ${(a?.senderId?.toString()||"")===f?"bg-green-600 text-white rounded-br-none":"bg-gray-100 text-gray-800 rounded-bl-none"}`,children:[(0,b.jsx)("p",{children:a.text}),(0,b.jsx)("p",{className:"text-[10px] opacity-70 mt-1 text-right",children:a.time})]})},a?._id?.toString()||c))})}),(0,b.jsxs)("div",{className:"flex gap-2 mt-3 border-t pt-3",children:[(0,b.jsx)("input",{type:"text",placeholder:"Type a Message...",className:"flex-1 bg-gray-100 px-4 py-2 rounded-xl outline-none focus:ring-2 focus:ring-green-500",value:g,onChange:a=>m(a.target.value)}),(0,b.jsx)("button",{className:"bg-green-600 hover:bg-green-700 p-3 rounded-xl text-white",onClick:()=>{let b=(0,c.getSocket)(),d={roomId:a,text:g,senderId:f,time:new Date().toLocaleTimeString([],{hour:"2-digit",minute:"2-digit"})};b.emit("send-message",d),m("")},children:(0,b.jsx)(i.Send,{size:18})})]})]})};var n=a.i(410227),o=a.i(468211),p=a.i(167453),q=a.i(124987),r=a.i(883497),s=a.i(328790);let t=(0,a.i(170106).default)("bell",[["path",{d:"M10.268 21a2 2 0 0 0 3.464 0",key:"vwvbt9"}],["path",{d:"M3.262 15.326A1 1 0 0 0 4 17h16a1 1 0 0 0 .74-1.673C19.41 13.956 18 12.499 18 8A6 6 0 0 0 6 8c0 4.499-1.411 5.956-2.738 7.326",key:"11g9vi"}]]);var u=a.i(104416),v=a.i(923665),w=a.i(618155),x=a.i(48662),y=a.i(659854),z=a.i(406704),A=a.i(311996);let B=(0,g.default)(async()=>{},{loadableGenerated:{modules:[229112]},ssr:!1}),C=[{targetId:"delivery-header",title:"Mission Control",content:"Welcome to your Logistics Hub. Track your daily earnings and active mission status here."},{targetId:"delivery-stats",title:"Performace Analytics",content:"Monitor your completed deliveries and total revenue for the current shift."},{targetId:"delivery-actions",title:"Status Controls",content:"Go online to start receiving orders or refresh to check for new broadcasts in your vicinity."},{targetId:"delivery-queue",title:"Assignment Broadcasts",content:"New delivery missions appear here. Accept them quickly before other agents claim them."}];function D(a){return(0,b.jsx)("svg",{...a,xmlns:"http://www.w3.org/2000/svg",width:"24",height:"24",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round",children:(0,b.jsx)("path",{d:"M22 12h-4l-3 9L9 3l-3 9H2"})})}a.s(["default",0,function({earning:a}){let[g,i]=(0,e.useState)([]),{userData:j}=(0,f.useSelector)(a=>a.user),[E,F]=(0,e.useState)(null),[G,H]=(0,e.useState)(!1),[I,J]=(0,e.useState)(""),[K,L]=(0,e.useState)(!1),[M,N]=(0,e.useState)(!1),[O,P]=(0,e.useState)(""),[Q,R]=(0,e.useState)({latitude:0,longitude:0}),[S,T]=(0,e.useState)({latitude:0,longitude:0}),U=async()=>{try{let a=await d.default.get("/api/delivery/get-assignments");i(a.data)}catch(a){console.error(a)}};(0,e.useEffect)(()=>{let a=(0,c.getSocket)();if(!j?._id||!navigator.geolocation)return;let b=navigator.geolocation.watchPosition(b=>{let c=b.coords.latitude,d=b.coords.longitude;T({latitude:c,longitude:d}),a.emit("update-location",{userId:j?._id,latitude:c,longitude:d})},a=>console.error(a),{enableHighAccuracy:!0});return()=>navigator.geolocation.clearWatch(b)},[j?._id]),(0,e.useEffect)(()=>{let a=(0,c.getSocket)();return a.on("new-assignment",a=>{i(b=>[...b,a]),z.default.success("New Delivery Assignment!")}),()=>a.off("new-assignment")},[]);let V=async a=>{try{await d.default.post(`/api/delivery/assignment/${a}/accept-assignment`),z.default.success("Assignment Accepted!"),await X(),await U()}catch(a){z.default.error("Failed to accept assignment")}},W=async a=>{try{await d.default.post(`/api/delivery/assignment/${a}/reject-assignment`),z.default.error("Assignment Rejected"),U()}catch(a){console.error(a)}},X=async()=>{try{let a=await d.default.get("/api/delivery/current-order");a.data?.active?(F(a.data.assignment),a.data.assignment?.order?.address&&R({latitude:a.data.assignment.order.address.latitude,longitude:a.data.assignment.order.address.longitude})):F(null)}catch(a){console.error(a)}};(0,e.useEffect)(()=>{X(),U()},[j]);let Y=async()=>{let a=E?.order?._id;if(console.log("Debugging Send OTP:",{activeOrder:E,orderId:a}),!a)return void z.default.error("Error: Order ID missing. Please refresh.");L(!0);try{await d.default.post("/api/delivery/otp/send",{orderId:a}),H(!0),z.default.success("OTP sent to Customer")}catch(a){console.error("Send OTP Error:",a),z.default.error(a.response?.data?.message||"Failed to send OTP")}finally{L(!1)}},Z=async()=>{N(!0);try{await d.default.post("/api/delivery/otp/verify",{orderId:E?.order?._id,otp:O}),z.default.success("Delivery Successful!"),F(null),i([]),H(!1),P(""),await X(),await U()}catch(a){J("Incorrect OTP provided"),z.default.error("Verification failed")}finally{N(!1)}};if(!E&&0===g.length){let c=[{name:"Today",earnings:a,deliveries:Math.round(a/40)}];return(0,b.jsxs)("div",{className:"min-h-screen bg-zinc-50 pt-[120px] pb-20",children:[(0,b.jsx)(A.default,{steps:C,tourName:"delivery_v1"}),(0,b.jsx)("div",{className:"w-[95%] md:w-[85%] mx-auto max-w-lg",children:(0,b.jsxs)(l.motion.div,{initial:{opacity:0,y:30},animate:{opacity:1,y:0},className:"bg-white p-10 rounded-[3rem] shadow-2xl shadow-zinc-900/5 border border-zinc-100 text-center space-y-8",children:[(0,b.jsxs)("div",{id:"delivery-header",className:"space-y-2",children:[(0,b.jsx)("div",{className:"w-24 h-24 bg-linear-to-br from-green-500 to-emerald-700 rounded-3xl shadow-xl shadow-green-500/20 flex items-center justify-center mx-auto mb-4",children:(0,b.jsx)(n.Truck,{className:"text-white",size:48})}),(0,b.jsx)("h2",{className:"text-3xl font-black text-zinc-900 tracking-tight",children:"Scanning for Orders"}),(0,b.jsx)("p",{className:"text-zinc-500 font-medium",children:"You are currently online. Stay nearby to grab high-value deliveries."})]}),(0,b.jsxs)("div",{id:"delivery-stats",className:"bg-zinc-50 border border-zinc-100 rounded-[2.5rem] p-8 space-y-6",children:[(0,b.jsxs)("div",{className:"flex items-center gap-2 text-green-600 font-black uppercase tracking-widest text-[10px] justify-center",children:[(0,b.jsx)(t,{size:14}),(0,b.jsx)("span",{children:"Shift Performance"})]}),(0,b.jsx)("div",{className:"h-[150px] min-h-[150px] w-full",children:(0,b.jsx)(x.ResponsiveContainer,{width:"100%",height:"100%",children:(0,b.jsxs)(w.BarChart,{data:Array.isArray(c)?c:[],children:[(0,b.jsx)(v.Bar,{dataKey:"earnings",fill:"#16A34A",radius:[10,10,0,0]}),(0,b.jsx)(y.Tooltip,{cursor:{fill:"transparent"},contentStyle:{borderRadius:"1rem",border:"none"}})]})})}),(0,b.jsxs)("div",{className:"flex justify-between items-center px-4",children:[(0,b.jsxs)("div",{className:"text-left",children:[(0,b.jsx)("div",{className:"text-[10px] font-black uppercase text-zinc-400",children:"Total"}),(0,b.jsxs)("div",{className:"text-xl font-black text-zinc-900",children:["₹",a]})]}),(0,b.jsxs)("div",{className:"text-right",children:[(0,b.jsx)("div",{className:"text-[10px] font-black uppercase text-zinc-400",children:"Deliveries"}),(0,b.jsx)("div",{className:"text-xl font-black text-green-600",children:Math.round(a/40)})]})]})]}),(0,b.jsxs)("div",{id:"delivery-actions",className:"grid grid-cols-2 gap-4",children:[(0,b.jsx)(l.motion.button,{whileHover:{scale:1.02},whileTap:{scale:.98},className:"bg-zinc-900 text-white font-black py-5 rounded-2xl shadow-xl",onClick:U,children:(0,b.jsxs)("div",{className:"flex flex-col items-center",children:[(0,b.jsx)(s.RefreshCcw,{size:20,className:"mb-1"}),(0,b.jsx)("span",{className:"text-[10px] uppercase tracking-widest leading-none",children:"Check New"})]})}),(0,b.jsx)(l.motion.button,{whileHover:{scale:1.02},whileTap:{scale:.98},className:"bg-white border border-zinc-200 text-zinc-900 font-black py-5 rounded-2xl shadow-xl",onClick:()=>window.location.reload(),children:(0,b.jsxs)("div",{className:"flex flex-col items-center",children:[(0,b.jsx)(D,{size:20,className:"mb-1"}),(0,b.jsx)("span",{className:"text-[10px] uppercase tracking-widest leading-none",children:"Go Online"})]})})]})]})})]})}return E&&Q?(0,b.jsxs)("div",{className:"min-h-screen bg-zinc-50 pt-[120px] pb-20",children:[(0,b.jsx)(A.default,{steps:C,tourName:"delivery_v1"}),(0,b.jsxs)("div",{className:"w-[95%] md:w-[85%] mx-auto max-w-4xl space-y-8",children:[(0,b.jsxs)("div",{className:"flex items-center justify-between",children:[(0,b.jsxs)("div",{className:"space-y-1",children:[(0,b.jsxs)("div",{className:"flex items-center gap-2 text-blue-600 font-bold uppercase tracking-[0.2em] text-[10px]",children:[(0,b.jsx)(D,{size:14,className:"animate-pulse"}),(0,b.jsx)("span",{children:"Active Delivery Protocol"})]}),(0,b.jsx)("h1",{className:"text-4xl font-black text-zinc-900 tracking-tight",children:"Live Mission"})]}),(0,b.jsxs)("div",{className:"bg-white px-4 py-2 rounded-2xl shadow-sm border border-zinc-100 flex items-center gap-3",children:[(0,b.jsx)("div",{className:"w-2 h-2 bg-green-500 rounded-full animate-ping"}),(0,b.jsxs)("span",{className:"text-xs font-black text-zinc-600 uppercase tracking-widest",children:["ID: #",E?.order?._id?.toString()?.slice(-6).toUpperCase()||"N/A"]})]})]}),(0,b.jsxs)("div",{className:"grid grid-cols-1 lg:grid-cols-3 gap-8",children:[(0,b.jsxs)("div",{className:"lg:col-span-2 space-y-8",children:[(0,b.jsx)("div",{className:"rounded-[3rem] border border-zinc-100 shadow-2xl shadow-blue-500/5 overflow-hidden h-[450px] relative bg-white",children:(0,b.jsx)(B,{userLocation:Q,deliveryBoyLocation:S})}),(0,b.jsx)(m,{orderId:E?.order?._id,deliveryBoyId:j?._id?.toString()})]}),(0,b.jsx)("div",{className:"space-y-8",children:(0,b.jsxs)(l.motion.div,{initial:{opacity:0,x:20},animate:{opacity:1,x:0},className:"bg-white p-8 rounded-[3rem] shadow-2xl shadow-zinc-900/5 border border-zinc-100 space-y-8",children:[(0,b.jsxs)("div",{className:"space-y-4",children:[(0,b.jsxs)("div",{className:"flex items-center gap-3 text-zinc-400 font-bold uppercase tracking-widest text-[10px]",children:[(0,b.jsx)(q.MapPin,{size:16}),(0,b.jsx)("span",{children:"Drop-off Point"})]}),(0,b.jsx)("p",{className:"text-lg font-bold text-zinc-900 leading-tight",children:E?.order?.address?.fullAddress})]}),(0,b.jsxs)("div",{className:"pt-8 border-t border-zinc-50 space-y-6",children:[!E?.order?.deliveryOtpVerification&&!G&&(0,b.jsx)(l.motion.button,{whileHover:{scale:1.02},whileTap:{scale:.98},onClick:Y,className:"w-full py-6 bg-green-600 font-black text-white rounded-3xl shadow-xl shadow-green-900/20 flex items-center justify-center gap-3",children:K?(0,b.jsx)(h.Loader,{size:20,className:"animate-spin"}):(0,b.jsxs)(b.Fragment,{children:[(0,b.jsx)("span",{children:"Arrived at Location"}),(0,b.jsx)(o.Navigation2,{size:20})]})}),(0,b.jsx)(k.AnimatePresence,{children:G&&(0,b.jsxs)(l.motion.div,{initial:{opacity:0,scale:.9},animate:{opacity:1,scale:1},className:"space-y-4 bg-zinc-50 p-6 rounded-[2rem] border border-zinc-100",children:[(0,b.jsxs)("div",{className:"flex items-center gap-2 text-zinc-500 font-bold uppercase tracking-widest text-[10px] justify-center mb-2",children:[(0,b.jsx)(u.ShieldCheck,{size:14}),(0,b.jsx)("span",{children:"Customer PIN Verification"})]}),(0,b.jsx)("input",{type:"text",className:"w-full py-5 bg-white border border-zinc-200 rounded-2xl text-center text-2xl font-black tracking-[1em] focus:ring-2 focus:ring-blue-500/20 focus:border-blue-500 outline-none transition-all",placeholder:"0000",maxLength:4,onChange:a=>P(a.target.value),value:O}),(0,b.jsx)("button",{className:"w-full bg-zinc-900 text-white font-black py-5 rounded-2xl shadow-xl transition-all active:scale-95",onClick:Z,children:M?(0,b.jsx)(h.Loader,{size:20,className:"animate-spin mx-auto"}):"Complete Delivery"}),I&&(0,b.jsx)("div",{className:"text-red-500 text-xs font-bold text-center",children:I})]})}),E?.order?.deliveryOtpVerification&&(0,b.jsxs)("div",{className:"p-6 bg-emerald-50 rounded-[2rem] border border-emerald-100 text-center flex flex-col items-center gap-3",children:[(0,b.jsx)(p.CheckCircle2,{size:48,className:"text-emerald-500"}),(0,b.jsx)("span",{className:"text-emerald-700 font-black uppercase tracking-widest text-xs",children:"Success Verification"})]})]})]})})]})]})]}):(0,b.jsxs)("div",{className:"min-h-screen bg-zinc-50 pt-[120px] pb-20",children:[(0,b.jsx)(A.default,{steps:C,tourName:"delivery_v1"}),(0,b.jsxs)("div",{className:"w-[95%] md:w-[85%] mx-auto space-y-10",children:[(0,b.jsxs)("div",{id:"delivery-header",className:"space-y-1 text-center md:text-left",children:[(0,b.jsxs)("div",{className:"flex items-center gap-2 text-green-600 font-bold uppercase tracking-[0.2em] text-[10px] justify-center md:justify-start",children:[(0,b.jsx)(r.Package,{size:14}),(0,b.jsx)("span",{children:"Broadcast Queue"})]}),(0,b.jsx)("h1",{className:"text-4xl md:text-5xl font-black text-zinc-900 tracking-tight",children:"Mission Assignments"}),(0,b.jsx)("p",{className:"text-zinc-500 font-medium",children:"Accept assignments quickly. High demand detected in your area."})]}),(0,b.jsx)("div",{id:"delivery-queue",className:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-3 gap-8",children:Array.isArray(g)&&g.map((a,c)=>(0,b.jsxs)(l.motion.div,{initial:{opacity:0,y:30},animate:{opacity:1,y:0},transition:{delay:.1*c},whileHover:{y:-5},className:"bg-white p-8 rounded-[3rem] shadow-2xl shadow-zinc-900/5 border border-zinc-100 flex flex-col justify-between relative overflow-hidden group",children:[(0,b.jsx)("div",{className:"absolute top-0 right-0 p-6 opacity-5 group-hover:scale-110 transition-transform",children:(0,b.jsx)(n.Truck,{size:64})}),(0,b.jsxs)("div",{className:"space-y-6",children:[(0,b.jsxs)("div",{children:[(0,b.jsx)("div",{className:"text-[10px] font-black uppercase text-zinc-400 tracking-widest mb-1",children:"Assignment ID"}),(0,b.jsxs)("div",{className:"text-xl font-black text-zinc-900",children:["#",a?.order?._id?.toString()?.slice(-6).toUpperCase()||"N/A"]})]}),(0,b.jsxs)("div",{className:"space-y-1",children:[(0,b.jsxs)("div",{className:"flex items-center gap-2 text-zinc-400 font-bold uppercase tracking-widest text-[10px]",children:[(0,b.jsx)(q.MapPin,{size:14}),(0,b.jsx)("span",{children:"Drop Point"})]}),(0,b.jsx)("p",{className:"text-zinc-600 text-sm font-medium line-clamp-2",children:a?.order?.address?.fullAddress})]})]}),(0,b.jsxs)("div",{className:"grid grid-cols-2 gap-4 mt-8 pt-8 border-t border-zinc-50",children:[(0,b.jsx)(l.motion.button,{whileHover:{scale:1.05},whileTap:{scale:.95},className:"bg-green-600 text-white font-black py-4 rounded-2xl shadow-xl shadow-green-900/10",onClick:()=>V(a._id),children:"Accept"}),(0,b.jsx)(l.motion.button,{whileHover:{scale:1.05},whileTap:{scale:.95},className:"bg-white border border-red-100 text-red-500 font-black py-4 rounded-2xl",onClick:()=>W(a._id),children:"Reject"})]})]},c))}),0===g.length&&(0,b.jsxs)("div",{className:"py-32 text-center bg-white rounded-[4rem] border-2 border-dashed border-zinc-200 shadow-inner",children:[(0,b.jsx)("div",{className:"w-24 h-24 bg-zinc-50 rounded-full flex items-center justify-center mx-auto mb-8",children:(0,b.jsx)(s.RefreshCcw,{className:"text-zinc-300 animate-spin-slow",size:40})}),(0,b.jsx)("h3",{className:"text-2xl font-black text-zinc-900 mb-2",children:"No missions broadcasted"}),(0,b.jsx)("p",{className:"text-zinc-500",children:"Wait for a few moments or move to a busier high-demand zone."})]})]})]})}],715660)},789819,a=>{"use strict";var b=a.i(187924),c=a.i(572131),d=a.i(346271),e=a.i(732860),f=a.i(170106);let g=(0,f.default)("bike",[["circle",{cx:"18.5",cy:"17.5",r:"3.5",key:"15x4ox"}],["circle",{cx:"5.5",cy:"17.5",r:"3.5",key:"1noe27"}],["circle",{cx:"15",cy:"5",r:"1",key:"19l28e"}],["path",{d:"M12 17.5V14l-3-3 4-3 2 3h2",key:"1npguv"}]]);var h=a.i(546842);let i=(0,f.default)("user-cog",[["path",{d:"M10 15H6a4 4 0 0 0-4 4v2",key:"1nfge6"}],["path",{d:"m14.305 16.53.923-.382",key:"1itpsq"}],["path",{d:"m15.228 13.852-.923-.383",key:"eplpkm"}],["path",{d:"m16.852 12.228-.383-.923",key:"13v3q0"}],["path",{d:"m16.852 17.772-.383.924",key:"1i8mnm"}],["path",{d:"m19.148 12.228.383-.923",key:"1q8j1v"}],["path",{d:"m19.53 18.696-.382-.924",key:"vk1qj3"}],["path",{d:"m20.772 13.852.924-.383",key:"n880s0"}],["path",{d:"m20.772 16.148.924.383",key:"1g6xey"}],["circle",{cx:"18",cy:"15",r:"3",key:"gjjjvw"}],["circle",{cx:"9",cy:"7",r:"4",key:"nufk8"}]]);var j=a.i(435050),k=a.i(660246),l=a.i(538784),m=a.i(682478),n=a.i(439760),o=a.i(808406),p=a.i(104416),q=a.i(83490),r=a.i(50944),s=a.i(718402);a.s(["default",0,function(){let[a,f]=(0,c.useState)([{id:"admin",label:"System Admin",icon:i,desc:"Platform oversight & control"},{id:"user",label:"Consumer",icon:h.User,desc:"Buy fresh millets & products"},{id:"farmer",label:"Farmer",icon:j.Wheat,desc:"Sell crop & monitor health"},{id:"shg",label:"SHG",icon:k.Users,desc:"Self-help group production"},{id:"buyer",label:"Corporate Buyer",icon:l.ShoppingCart,desc:"Bulk procurement & trade"},{id:"startup",label:"Startup",icon:m.Rocket,desc:"Agri-tech innovation"},{id:"processor",label:"Processor",icon:n.Factory,desc:"Value addition & milling"},{id:"deliveryBoy",label:"Logistics Partner",icon:g,desc:"Fulfillment & delivery"}]),[t,u]=(0,c.useState)(""),[v,w]=(0,c.useState)(""),{update:x}=(0,s.useSession)(),y=(0,r.useRouter)(),z=async()=>{try{await q.default.post("/api/user/edit-role-mobile",{role:t,mobile:v}),await x({role:t}),y.push("/")}catch(a){console.error(a)}};return(0,c.useEffect)(()=>{(async()=>{try{(await q.default.get("/api/check-for-admin")).data.adminExist&&f(a=>a.filter(a=>"admin"!==a.id))}catch(a){console.error(a)}})()},[]),(0,b.jsx)("div",{className:"min-h-screen bg-zinc-50 flex flex-col items-center py-20 px-6",children:(0,b.jsxs)("div",{className:"max-w-4xl w-full space-y-12",children:[(0,b.jsxs)("div",{className:"text-center space-y-4",children:[(0,b.jsxs)(d.motion.div,{initial:{opacity:0,scale:.9},animate:{opacity:1,scale:1},className:"inline-flex items-center gap-2 px-4 py-2 bg-green-50 rounded-full text-green-600 text-xs font-black uppercase tracking-widest border border-green-100 mb-4",children:[(0,b.jsx)(o.Sparkles,{size:14}),(0,b.jsx)("span",{children:"Personalize your experience"})]}),(0,b.jsxs)(d.motion.h1,{initial:{opacity:0,y:10},animate:{opacity:1,y:0},className:"text-4xl md:text-5xl font-black text-zinc-900 tracking-tight",children:["Who are you in the ",(0,b.jsx)("br",{}),(0,b.jsx)("span",{className:"text-green-600",children:"Millet Ecosystem?"})]}),(0,b.jsx)("p",{className:"text-zinc-500 font-medium max-w-md mx-auto",children:"Select your primary role to unlock specialized tools and marketplace features."})]}),(0,b.jsx)("div",{className:"grid grid-cols-2 lg:grid-cols-4 gap-4 md:gap-6",children:a.map((a,c)=>{let e=a.icon,f=t===a.id;return(0,b.jsxs)(d.motion.div,{initial:{opacity:0,y:20},animate:{opacity:1,y:0},transition:{delay:.05*c},whileTap:{scale:.96},onClick:()=>u(a.id),className:`group relative flex flex-col p-6 rounded-[2.5rem] border-2 cursor-pointer transition-all duration-300 ${f?"border-green-600 bg-white shadow-2xl shadow-green-900/10":"border-white bg-white hover:border-zinc-200 shadow-sm"}`,children:[(0,b.jsx)("div",{className:`w-12 h-12 rounded-2xl flex items-center justify-center mb-6 transition-colors ${f?"bg-green-600 text-white":"bg-zinc-50 text-zinc-400 group-hover:bg-zinc-100"}`,children:(0,b.jsx)(e,{size:24})}),(0,b.jsxs)("div",{className:"space-y-1",children:[(0,b.jsx)("h3",{className:`font-black text-sm tracking-tight ${f?"text-green-600":"text-zinc-900"}`,children:a.label}),(0,b.jsx)("p",{className:"text-[10px] text-zinc-400 font-medium leading-tight",children:a.desc})]}),f&&(0,b.jsx)("div",{className:"absolute top-4 right-4 text-green-600",children:(0,b.jsx)(p.ShieldCheck,{size:20})})]},a.id)})}),(0,b.jsxs)(d.motion.div,{initial:{opacity:0},animate:{opacity:1},className:"max-w-md mx-auto space-y-8 pt-8",children:[(0,b.jsxs)("div",{className:"space-y-4",children:[(0,b.jsx)("label",{className:"text-xs font-black uppercase text-zinc-400 tracking-[0.2em] ml-2",children:"Identity Verification"}),(0,b.jsxs)("div",{className:"relative group",children:[(0,b.jsx)("div",{className:"absolute left-6 top-1/2 -translate-y-1/2 text-zinc-400 group-focus-within:text-green-600 transition-colors",children:(0,b.jsx)(g,{size:20})}),(0,b.jsx)("input",{type:"tel",className:"w-full bg-white border border-zinc-200 rounded-3xl py-6 pl-16 pr-6 text-zinc-800 focus:ring-4 focus:ring-green-500/5 focus:border-green-500 outline-none transition-all font-bold text-lg placeholder:text-zinc-200",placeholder:"Enter 10-digit mobile number",maxLength:10,onChange:a=>w(a.target.value),value:v})]})]}),(0,b.jsxs)(d.motion.button,{whileHover:{scale:1.02},whileTap:{scale:.98},disabled:10!==v.length||!t,className:`w-full py-6 rounded-3xl font-black uppercase tracking-widest text-sm flex items-center justify-center gap-3 shadow-2xl transition-all ${t&&10===v.length?"bg-zinc-900 text-white shadow-zinc-900/20 hover:bg-green-600":"bg-zinc-200 text-zinc-400 cursor-not-allowed shadow-none"}`,onClick:z,children:[(0,b.jsx)("span",{children:"Complete Setup"}),(0,b.jsx)(e.ArrowRight,{size:18})]})]})]})})}],789819)}];

//# sourceMappingURL=src_components_6b95f5f6._.js.map