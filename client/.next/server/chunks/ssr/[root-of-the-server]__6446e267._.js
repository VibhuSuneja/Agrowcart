module.exports=[400210,a=>{"use strict";let b=(0,a.i(170106).default)("arrow-left",[["path",{d:"m12 19-7-7 7-7",key:"1l729n"}],["path",{d:"M19 12H5",key:"x3x0zl"}]]);a.s(["ArrowLeft",()=>b],400210)},192434,(a,b,c)=>{"use strict";Object.defineProperty(c,"__esModule",{value:!0}),Object.defineProperty(c,"warnOnce",{enumerable:!0,get:function(){return d}});let d=a=>{}},808591,(a,b,c)=>{"use strict";Object.defineProperty(c,"__esModule",{value:!0}),Object.defineProperty(c,"useMergedRef",{enumerable:!0,get:function(){return e}});let d=a.r(572131);function e(a,b){let c=(0,d.useRef)(null),e=(0,d.useRef)(null);return(0,d.useCallback)(d=>{if(null===d){let a=c.current;a&&(c.current=null,a());let b=e.current;b&&(e.current=null,b())}else a&&(c.current=f(a,d)),b&&(e.current=f(b,d))},[a,b])}function f(a,b){if("function"!=typeof a)return a.current=b,()=>{a.current=null};{let c=a(b);return"function"==typeof c?c:()=>a(null)}}("function"==typeof c.default||"object"==typeof c.default&&null!==c.default)&&void 0===c.default.__esModule&&(Object.defineProperty(c.default,"__esModule",{value:!0}),Object.assign(c.default,c),b.exports=c.default)},883497,a=>{"use strict";let b=(0,a.i(170106).default)("package",[["path",{d:"M11 21.73a2 2 0 0 0 2 0l7-4A2 2 0 0 0 21 16V8a2 2 0 0 0-1-1.73l-7-4a2 2 0 0 0-2 0l-7 4A2 2 0 0 0 3 8v8a2 2 0 0 0 1 1.73z",key:"1a0edw"}],["path",{d:"M12 22V12",key:"d0xqtd"}],["polyline",{points:"3.29 7 12 12 20.71 7",key:"ousv84"}],["path",{d:"m7.5 4.27 9 5.15",key:"1c824w"}]]);a.s(["Package",()=>b],883497)},405784,a=>{"use strict";let b=(0,a.i(170106).default)("chevron-down",[["path",{d:"m6 9 6 6 6-6",key:"qrunsl"}]]);a.s(["ChevronDown",()=>b],405784)},124987,a=>{"use strict";let b=(0,a.i(170106).default)("map-pin",[["path",{d:"M20 10c0 4.993-5.539 10.193-7.399 11.799a1 1 0 0 1-1.202 0C9.539 20.193 4 14.993 4 10a8 8 0 0 1 16 0",key:"1r0f0z"}],["circle",{cx:"12",cy:"10",r:"3",key:"ilqhr7"}]]);a.s(["MapPin",()=>b],124987)},963519,a=>{"use strict";let b=(0,a.i(170106).default)("phone",[["path",{d:"M13.832 16.568a1 1 0 0 0 1.213-.303l.355-.465A2 2 0 0 1 17 15h3a2 2 0 0 1 2 2v3a2 2 0 0 1-2 2A18 18 0 0 1 2 4a2 2 0 0 1 2-2h3a2 2 0 0 1 2 2v3a2 2 0 0 1-.8 1.6l-.468.351a1 1 0 0 0-.292 1.233 14 14 0 0 0 6.392 6.384",key:"9njp5v"}]]);a.s(["Phone",()=>b],963519)},233405,(a,b,c)=>{b.exports=a.x("child_process",()=>require("child_process"))},504446,(a,b,c)=>{b.exports=a.x("net",()=>require("net"))},755004,(a,b,c)=>{b.exports=a.x("tls",()=>require("tls"))},46864,a=>{"use strict";let b=(0,a.i(170106).default)("user-check",[["path",{d:"m16 11 2 2 4-4",key:"9rsbq5"}],["path",{d:"M16 21v-2a4 4 0 0 0-4-4H6a4 4 0 0 0-4 4v2",key:"1yyitq"}],["circle",{cx:"9",cy:"7",r:"4",key:"nufk8"}]]);a.s(["UserCheck",()=>b],46864)},410227,a=>{"use strict";let b=(0,a.i(170106).default)("truck",[["path",{d:"M14 18V6a2 2 0 0 0-2-2H4a2 2 0 0 0-2 2v11a1 1 0 0 0 1 1h2",key:"wrbu53"}],["path",{d:"M15 18H9",key:"1lyqi6"}],["path",{d:"M19 18h2a1 1 0 0 0 1-1v-3.65a1 1 0 0 0-.22-.624l-3.48-4.35A1 1 0 0 0 17.52 8H14",key:"lysw3i"}],["circle",{cx:"17",cy:"18",r:"2",key:"332jqn"}],["circle",{cx:"7",cy:"18",r:"2",key:"19iecd"}]]);a.s(["Truck",()=>b],410227)},911156,622282,a=>{"use strict";let b=(0,a.i(170106).default)("credit-card",[["rect",{width:"20",height:"14",x:"2",y:"5",rx:"2",key:"ynyp8z"}],["line",{x1:"2",x2:"22",y1:"10",y2:"10",key:"1b3vmo"}]]);a.s(["default",()=>b],622282),a.s(["CreditCard",()=>b],911156)},767552,a=>{"use strict";let b=(0,a.i(170106).default)("chevron-up",[["path",{d:"m18 15-6-6-6 6",key:"153udz"}]]);a.s(["ChevronUp",()=>b],767552)},360332,a=>{"use strict";var b=a.i(187924),c=a.i(572131),d=a.i(346271),e=a.i(405784),f=a.i(767552),g=a.i(911156),h=a.i(124987),i=a.i(883497),j=a.i(963519),k=a.i(410227),l=a.i(546842),m=a.i(46864),n=a.i(571987),o=a.i(83490),p=a.i(212469);let q=function({order:a}){let[q,r]=(0,c.useState)(!1),[s,t]=(0,c.useState)("pending"),u=async(a,b)=>{try{let c=await o.default.post(`/api/admin/update-order-status/${a}`,{status:b});console.log(c.data),t(b)}catch(a){console.log(a)}};return(0,c.useEffect)(()=>{t(a.status)},[a]),(0,c.useEffect)(()=>{let b=(0,p.getSocket)();return b.on("order-status-update",b=>{b.orderId.toString()==a?._id.toString()&&t(b.status)}),()=>b.off("order-status-update")},[]),(0,b.jsxs)(d.motion.div,{initial:{opacity:0,y:20},animate:{opacity:1,y:0},transition:{duration:.4},className:"bg-white shadow-md hover:shadow-lg border border-gray-100 rounded-2xl p-6 transition-all ",children:[(0,b.jsxs)("div",{className:"flex flex-col md:flex-row md:items-start md:justify-between gap-4",children:[(0,b.jsxs)("div",{className:"space-y-1",children:[(0,b.jsxs)("p",{className:"text-lg font-bold flex items-center gap-2 text-green-700",children:[(0,b.jsx)(i.Package,{size:20}),"Order #",a._id?.toString().slice(-6)]}),"delivered"!=s&&(0,b.jsx)("span",{className:`inline-block text-xs font-semibold px-3 py-1 rounded-full border ${a.isPaid?"bg-green-100 text-green-700 border-green-300":"bg-red-100 text-red-700 border-red-300"}`,children:a.isPaid?"Paid":"Unpaid"}),(0,b.jsx)("p",{className:"text-gray-500 text-sm",children:new Date(a.createdAt).toLocaleString()}),(0,b.jsxs)("div",{className:"mt-3 space-y-1 text-gray-700 text-sm",children:[(0,b.jsxs)("p",{className:"flex items-center gap-2 font-semibold",children:[(0,b.jsx)(l.User,{size:16,className:"text-green-600"}),(0,b.jsx)("span",{children:a?.address.fullName})]}),(0,b.jsxs)("p",{className:"flex items-center gap-2 font-semibold",children:[(0,b.jsx)(j.Phone,{size:16,className:"text-green-600"}),(0,b.jsx)("span",{children:a?.address.mobile})]}),(0,b.jsxs)("p",{className:"flex items-center gap-2 font-semibold",children:[(0,b.jsx)(h.MapPin,{size:16,className:"text-green-600"}),(0,b.jsx)("span",{children:a?.address.fullAddress})]})]}),(0,b.jsxs)("p",{className:"mt-3 flex items-center gap-2 text-sm text-gray-700",children:[(0,b.jsx)(g.CreditCard,{size:16,className:"text-green-600"}),(0,b.jsx)("span",{children:"cod"===a.paymentMethod?"Cash On Delivery":"Online Payment"})]}),a.assignedDeliveryBoy&&(0,b.jsxs)("div",{className:"mt-4 bg-blue-50 border border-blue-200 rounded-xl p-4 flex items-center justify-between",children:[(0,b.jsxs)("div",{className:"flex items-center gap-3 text-sm text-gray-700",children:[(0,b.jsx)(m.UserCheck,{className:"text-blue-600",size:18}),(0,b.jsxs)("div",{className:"font-semibold text-gray-800",children:[(0,b.jsxs)("p",{className:"",children:["Assigned to : ",(0,b.jsx)("span",{children:a.assignedDeliveryBoy.name})]}),(0,b.jsxs)("p",{className:"text-xs text-gray-600",children:["ðŸ“ž +91 ",a.assignedDeliveryBoy.mobile]})]})]}),(0,b.jsx)("a",{href:`tel:${a.assignedDeliveryBoy.mobile}`,className:"bg-blue-600 text-white text-xs px-3 py-1.5 rounded-lg hover:bg-blue-700 transition",children:"Call"})]})]}),(0,b.jsxs)("div",{className:"flex flex-col items-start md:items-end gap-2",children:[(0,b.jsx)("span",{className:`text-xs font-semibold px-3 py-1 rounded-full capitalize ${"delivered"===s?"bg-green-100 text-green-700":"pending"===s?"bg-yellow-100 text-yellow-700":"bg-blue-100 text-blue-700"}`,children:s}),"delivered"!=s&&(0,b.jsx)("select",{className:"border border-gray-300 rounded-lg px-3 py-1 text-sm shadow-sm hover:border-green-400 transition focus:ring-2 focus:ring-green-500 outline-none",value:s,onChange:b=>u(a._id?.toString(),b.target.value),children:["pending","out of delivery"].map(a=>(0,b.jsx)("option",{value:a,children:a.toUpperCase()},a))})]})]}),(0,b.jsxs)("div",{className:"border-t border-gray-200 mt-3 pt-3",children:[(0,b.jsxs)("button",{onClick:()=>r(a=>!a),className:"w-full flex justify-between items-center text-sm font-medium text-gray-700 hover:text-green-700 transition",children:[(0,b.jsxs)("span",{className:"flex items-center gap-2",children:[(0,b.jsx)(i.Package,{size:16,className:"text-green-600"}),q?"Hide Order Items":`view ${a.items.length} Items`]}),q?(0,b.jsx)(f.ChevronUp,{size:16,className:"text-green-600"}):(0,b.jsx)(e.ChevronDown,{size:16,className:"text-green-600"})]}),(0,b.jsx)(d.motion.div,{initial:{height:0,opacity:0},animate:{height:q?"auto":0,opacity:+!!q},transition:{duration:.3},className:"overflow-hidden",children:(0,b.jsx)("div",{className:"mt-3 space-y-3",children:a.items.map((a,c)=>(0,b.jsxs)("div",{className:"flex justify-between items-center bg-gray-50 rounded-xl px-3 py-2 hover:bg-gray-100 transition",children:[(0,b.jsxs)("div",{className:"flex items-center gap-3",children:[(0,b.jsx)(n.default,{src:a.image,alt:a.name,width:48,height:48,className:" rounded-lg object-cover border border-gray-200"}),(0,b.jsxs)("div",{children:[(0,b.jsx)("p",{className:"text-sm font-medium text-gray-800",children:a.name}),(0,b.jsxs)("p",{className:"text-xs text-gray-500",children:[a.quantity," x ",a.unit]})]})]}),(0,b.jsxs)("p",{className:"text-sm font-semibold text-gray-800",children:["â‚¹",Number(a.price)*a.quantity]})]},c))})})]}),(0,b.jsxs)("div",{className:"border-t pt-3 mt-3 flex justify-between items-center text-sm font-semibold text-gray-800",children:[(0,b.jsxs)("div",{className:"flex items-center gap-2 text-gray-700 text-sm",children:[(0,b.jsx)(k.Truck,{size:16,className:"text-green-600"}),(0,b.jsxs)("span",{children:["Delivery: ",(0,b.jsx)("span",{className:"text-green-700 font-semibold",children:s})]})]}),(0,b.jsxs)("div",{children:["Total: ",(0,b.jsxs)("span",{className:"text-green-700 font-bold",children:["â‚¹",a.totalAmount]})]})]})]},a._id?.toString())};var r=a.i(400210),s=a.i(50944);a.s(["default",0,function(){let[a,d]=(0,c.useState)(),e=(0,s.useRouter)();return(0,c.useEffect)(()=>{(async()=>{try{let a=await o.default.get("/api/admin/get-orders");d(a.data)}catch(a){console.log(a)}})()},[]),(0,c.useEffect)(()=>{let a=(0,p.getSocket)();return a?.on("new-order",a=>{d(b=>[a,...b])}),a.on("order-assigned",({orderId:a,assignedDeliveryBoy:b})=>{d(c=>c?.map(c=>c._id==a?{...c,assignedDeliveryBoy:b}:c))}),()=>{a.off("new-order"),a.off("order-assigned")}},[]),(0,b.jsxs)("div",{className:"min-h-screen bg-gray-50 w-full",children:[(0,b.jsx)("div",{className:"fixed top-0 left-0 w-full backdrop-blur-lg bg-white/70 shadow-sm border-b z-50",children:(0,b.jsxs)("div",{className:"max-w-3xl mx-auto flex items-center gap-4 px-4 py-3",children:[(0,b.jsx)("button",{className:"p-2 bg-gray-100 rounded-full hover:bg-gray-200 active:scale-95 transition",onClick:()=>e.push("/"),children:(0,b.jsx)(r.ArrowLeft,{size:24,className:"text-green-700"})}),(0,b.jsx)("h1",{className:"text-xl font-bold text-gray-800",children:"Manage Orders"})]})}),(0,b.jsx)("div",{className:"max-w-6xl mx-auto px-4 pt-24 pb-16 space-y-8",children:(0,b.jsx)("div",{className:"space-y-6",children:a?.map((a,c)=>(0,b.jsx)(q,{order:a},c))})})]})}],360332)}];

//# sourceMappingURL=%5Broot-of-the-server%5D__6446e267._.js.map