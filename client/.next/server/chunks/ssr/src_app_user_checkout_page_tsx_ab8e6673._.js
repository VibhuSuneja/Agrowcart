module.exports=[745771,a=>{"use strict";var b=a.i(187924),c=a.i(572131),d=a.i(346271),e=a.i(400210),f=a.i(622282),f=f,g=a.i(170106);let h=(0,g.default)("house",[["path",{d:"M15 21v-8a1 1 0 0 0-1-1h-4a1 1 0 0 0-1 1v8",key:"5wwlr5"}],["path",{d:"M3 10a2 2 0 0 1 .709-1.528l7-6a2 2 0 0 1 2.582 0l7 6A2 2 0 0 1 21 10v9a2 2 0 0 1-2 2H5a2 2 0 0 1-2-2z",key:"r6nss1"}]]);var i=a.i(596221);let j=(0,g.default)("locate-fixed",[["line",{x1:"2",x2:"5",y1:"12",y2:"12",key:"bvdh0s"}],["line",{x1:"19",x2:"22",y1:"12",y2:"12",key:"1tbv5k"}],["line",{x1:"12",x2:"12",y1:"2",y2:"5",key:"11lu5j"}],["line",{x1:"12",x2:"12",y1:"19",y2:"22",key:"x3vr5v"}],["circle",{cx:"12",cy:"12",r:"7",key:"fim9np"}],["circle",{cx:"12",cy:"12",r:"3",key:"1v7zrd"}]]);var k=a.i(963519),l=a.i(587532),m=a.i(410227),n=a.i(546842),o=a.i(104416),p=a.i(808406);let q=(0,g.default)("map",[["path",{d:"M14.106 5.553a2 2 0 0 0 1.788 0l3.659-1.83A1 1 0 0 1 21 4.619v12.764a1 1 0 0 1-.553.894l-4.553 2.277a2 2 0 0 1-1.788 0l-4.212-2.106a2 2 0 0 0-1.788 0l-3.659 1.83A1 1 0 0 1 3 19.381V6.618a1 1 0 0 1 .553-.894l4.553-2.277a2 2 0 0 1 1.788 0z",key:"169xi5"}],["path",{d:"M15 5.764v15",key:"1pn4in"}],["path",{d:"M9 3.236v15",key:"1uimfh"}]]);var r=a.i(911156),s=a.i(50944),t=a.i(214174),u=a.i(406704),v=a.i(83490),w=a.i(819721),x=a.i(88729);let y=(0,w.default)(async()=>{},{loadableGenerated:{modules:[206695]},ssr:!1});a.s(["default",0,function(){let g=(0,s.useRouter)(),{userData:w}=(0,t.useSelector)(a=>a.user),{subTotal:z,deliveryFee:A,finalTotal:B,cartData:C}=(0,t.useSelector)(a=>a.cart),[D,E]=(0,c.useState)({fullName:"",mobile:"",city:"",state:"",pincode:"",fullAddress:""}),[F,G]=(0,c.useState)(!1),[H,I]=(0,c.useState)(""),[J,K]=(0,c.useState)(null),[L,M]=(0,c.useState)("cod"),[N,O]=(0,c.useState)(!1);(0,c.useEffect)(()=>{navigator.geolocation&&navigator.geolocation.getCurrentPosition(a=>{let{latitude:b,longitude:c}=a.coords;K([b,c])},a=>{console.log("location error",a)},{enableHighAccuracy:!0,maximumAge:0,timeout:1e4})},[]),(0,c.useEffect)(()=>{w&&E(a=>({...a,fullName:w?.name||"",mobile:w?.mobile||""}))},[w]);let P=async()=>{if(H){G(!0);try{let{OpenStreetMapProvider:b}=await a.A(510205),c=new b,d=await c.search({query:H});d&&d.length>0?(K([d[0].y,d[0].x]),u.default.success("Location found!")):u.default.error("Location not found")}catch(a){u.default.error("Search failed")}finally{G(!1)}}};(0,c.useEffect)(()=>{(async()=>{if(J)try{let a=await v.default.get(`https://nominatim.openstreetmap.org/reverse?lat=${J[0]}&lon=${J[1]}&format=json`);E(b=>({...b,city:a.data.address.city||a.data.address.town||a.data.address.village,state:a.data.address.state,pincode:a.data.address.postcode,fullAddress:a.data.display_name}))}catch(a){console.error(a)}})()},[J]);let Q=async()=>{if(!J)return u.default.error("Set delivery location first");if(!D.fullName||!D.mobile||!D.fullAddress)return u.default.error("Complete all fields");try{O(!0),await v.default.post("/api/user/order",{userId:w?._id,items:C.map(a=>({product:a._id,name:a.name,price:a.price,unit:a.unit,quantity:a.quantity,image:a.image})),totalAmount:B,address:{...D,latitude:J[0],longitude:J[1]},paymentMethod:L}),u.default.success("Order placed successfully!"),g.push("/user/order-success")}catch(a){u.default.error("Failed to place order")}finally{O(!1)}},R=async()=>{if(!J)return u.default.error("Set delivery location first");if(!D.fullName||!D.mobile||!D.fullAddress)return u.default.error("Complete all fields");try{O(!0);let a=await v.default.post("/api/user/payment",{userId:w?._id,items:C.map(a=>({product:a._id,name:a.name,price:a.price,unit:a.unit,quantity:a.quantity,image:a.image})),totalAmount:B,address:{...D,latitude:J[0],longitude:J[1]},paymentMethod:L});u.default.success("Redirecting to Stripe..."),window.location.href=a.data.url}catch(a){u.default.error("Payment initialization failed"),O(!1)}};return(0,b.jsxs)("div",{className:"min-h-screen bg-zinc-50 pb-24 pt-12",children:[(0,b.jsx)(x.default,{user:w}),(0,b.jsxs)("div",{className:"w-[95%] sm:w-[90%] md:w-[85%] mx-auto relative pt-24",children:[(0,b.jsxs)(d.motion.button,{whileTap:{scale:.95},className:"inline-flex items-center gap-2 text-zinc-500 hover:text-green-600 font-bold transition-all group mb-12",onClick:()=>g.push("/user/cart"),children:[(0,b.jsx)("div",{className:"w-8 h-8 rounded-full bg-white border border-zinc-200 flex items-center justify-center group-hover:border-green-600 transition-colors",children:(0,b.jsx)(e.ArrowLeft,{size:16})}),(0,b.jsx)("span",{className:"text-sm uppercase tracking-widest",children:"Back to Cart"})]}),(0,b.jsxs)("div",{className:"mb-12",children:[(0,b.jsxs)("div",{className:"flex items-center gap-2 text-green-600 font-bold uppercase tracking-[0.2em] text-[10px] mb-2",children:[(0,b.jsx)(o.ShieldCheck,{size:14}),(0,b.jsx)("span",{children:"Highly Secure Checkout"})]}),(0,b.jsx)("h1",{className:"text-4xl md:text-5xl font-black text-zinc-900 tracking-tight",children:"Confirm Order"})]}),(0,b.jsxs)("div",{className:"grid grid-cols-1 lg:grid-cols-5 gap-12",children:[(0,b.jsx)("div",{className:"lg:col-span-3 space-y-8",children:(0,b.jsxs)(d.motion.div,{initial:{opacity:0,y:20},animate:{opacity:1,y:0},className:"bg-white rounded-[3rem] shadow-2xl shadow-zinc-900/5 p-8 md:p-10 border border-zinc-100",children:[(0,b.jsxs)("div",{className:"flex items-center gap-4 mb-8",children:[(0,b.jsx)("div",{className:"w-12 h-12 bg-green-50 rounded-2xl flex items-center justify-center text-green-600",children:(0,b.jsx)(q,{size:24})}),(0,b.jsxs)("div",{children:[(0,b.jsx)("h2",{className:"text-2xl font-black text-zinc-900 tracking-tight",children:"Delivery Details"}),(0,b.jsx)("p",{className:"text-zinc-500 text-sm font-medium",children:"Where should we deliver your millets?"})]})]}),(0,b.jsxs)("div",{className:"space-y-4",children:[(0,b.jsxs)("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4",children:[(0,b.jsxs)("div",{className:"relative group",children:[(0,b.jsx)(n.User,{className:"absolute left-4 top-1/2 -translate-y-1/2 text-zinc-400 group-focus-within:text-green-500 transition-colors",size:18}),(0,b.jsx)("input",{type:"text",placeholder:"Full Name",value:D.fullName,onChange:a=>E(b=>({...b,fullName:a.target.value})),className:"w-full bg-zinc-50 border border-zinc-200 rounded-2xl py-4 pl-12 pr-4 text-zinc-800 placeholder:text-zinc-400 focus:bg-white focus:ring-2 focus:ring-green-500/10 focus:border-green-500 focus:outline-none transition-all font-medium text-sm"})]}),(0,b.jsxs)("div",{className:"relative group",children:[(0,b.jsx)(k.Phone,{className:"absolute left-4 top-1/2 -translate-y-1/2 text-zinc-400 group-focus-within:text-green-500 transition-colors",size:18}),(0,b.jsx)("input",{type:"text",placeholder:"Mobile Number",value:D.mobile,onChange:a=>E(b=>({...b,mobile:a.target.value})),className:"w-full bg-zinc-50 border border-zinc-200 rounded-2xl py-4 pl-12 pr-4 text-zinc-800 placeholder:text-zinc-400 focus:bg-white focus:ring-2 focus:ring-green-500/10 focus:border-green-500 focus:outline-none transition-all font-medium text-sm"})]})]}),(0,b.jsxs)("div",{className:"relative group",children:[(0,b.jsx)(h,{className:"absolute left-4 top-1/2 -translate-y-1/2 text-zinc-400 group-focus-within:text-green-500 transition-colors",size:18}),(0,b.jsx)("input",{type:"text",placeholder:"Full Detailed Address",value:D.fullAddress,onChange:a=>E(b=>({...b,fullAddress:a.target.value})),className:"w-full bg-zinc-50 border border-zinc-200 rounded-2xl py-4 pl-12 pr-4 text-zinc-800 placeholder:text-zinc-400 focus:bg-white focus:ring-2 focus:ring-green-500/10 focus:border-green-500 focus:outline-none transition-all font-medium text-sm"})]}),(0,b.jsxs)("div",{className:"grid grid-cols-3 gap-4",children:[(0,b.jsx)("input",{type:"text",value:D.city,placeholder:"City",onChange:a=>E(b=>({...b,city:a.target.value})),className:"bg-zinc-50 border border-zinc-200 rounded-2xl py-4 px-6 text-zinc-800 focus:bg-white focus:border-green-500 focus:outline-none transition-all font-medium text-sm"}),(0,b.jsx)("input",{type:"text",value:D.state,placeholder:"State",onChange:a=>E(b=>({...b,state:a.target.value})),className:"bg-zinc-50 border border-zinc-200 rounded-2xl py-4 px-6 text-zinc-800 focus:bg-white focus:border-green-500 focus:outline-none transition-all font-medium text-sm"}),(0,b.jsx)("input",{type:"text",value:D.pincode,placeholder:"Pincode",onChange:a=>E(b=>({...b,pincode:a.target.value})),className:"bg-zinc-50 border border-zinc-200 rounded-2xl py-4 px-6 text-zinc-800 focus:bg-white focus:border-green-500 focus:outline-none transition-all font-medium text-sm"})]}),(0,b.jsxs)("div",{className:"flex gap-2 mt-8",children:[(0,b.jsxs)("div",{className:"relative flex-1 group",children:[(0,b.jsx)(l.Search,{className:"absolute left-4 top-1/2 -translate-y-1/2 text-zinc-400 group-focus-within:text-green-500 transition-colors",size:18}),(0,b.jsx)("input",{type:"text",placeholder:"Search your location...",className:"w-full bg-zinc-50 border border-zinc-200 rounded-2xl py-4 pl-12 pr-4 text-zinc-800 focus:bg-white focus:border-green-500 focus:outline-none transition-all font-medium text-sm",value:H,onChange:a=>I(a.target.value)})]}),(0,b.jsx)(d.motion.button,{whileTap:{scale:.95},className:"bg-zinc-900 text-white px-8 rounded-2xl font-bold shadow-xl shadow-zinc-900/10 hover:bg-green-600 transition-all flex items-center justify-center",onClick:P,children:F?(0,b.jsx)(i.Loader2,{size:18,className:"animate-spin"}):"Locate"})]}),(0,b.jsxs)("div",{className:"relative mt-6 h-[400px] rounded-[2.5rem] overflow-hidden border border-zinc-200 shadow-inner group",children:[J&&(0,b.jsx)(y,{position:J,setPosition:K}),(0,b.jsx)(d.motion.button,{whileHover:{scale:1.1},whileTap:{scale:.9},className:"absolute bottom-6 right-6 bg-green-600 text-white shadow-2xl rounded-2xl p-4 hover:bg-green-700 transition-all flex items-center justify-center z-10",onClick:()=>{navigator.geolocation&&navigator.geolocation.getCurrentPosition(a=>{K([a.coords.latitude,a.coords.longitude]),u.default.success("Location updated!")})},children:(0,b.jsx)(j,{size:24})})]})]})]})}),(0,b.jsx)("div",{className:"lg:col-span-2 space-y-8",children:(0,b.jsxs)(d.motion.div,{initial:{opacity:0,x:20},animate:{opacity:1,x:0},className:"bg-white rounded-[3rem] shadow-2xl shadow-zinc-900/5 p-8 border border-zinc-100",children:[(0,b.jsxs)("div",{className:"flex items-center gap-4 mb-8",children:[(0,b.jsx)("div",{className:"w-12 h-12 bg-blue-50 rounded-2xl flex items-center justify-center text-blue-600",children:(0,b.jsx)(r.CreditCard,{size:24})}),(0,b.jsxs)("div",{children:[(0,b.jsx)("h2",{className:"text-2xl font-black text-zinc-900 tracking-tight",children:"Payment Hub"}),(0,b.jsx)("p",{className:"text-zinc-500 text-sm font-medium",children:"Choose your preferred settlement method."})]})]}),(0,b.jsxs)("div",{className:"space-y-4 mb-10",children:[(0,b.jsxs)("button",{onClick:()=>M("online"),className:`flex items-center justify-between w-full border-2 rounded-[1.5rem] p-6 transition-all ${"online"===L?"border-green-600 bg-green-50 shadow-lg shadow-green-900/5":"border-zinc-50 hover:bg-zinc-50"}`,children:[(0,b.jsxs)("div",{className:"flex items-center gap-4",children:[(0,b.jsx)(f.default,{className:"online"===L?"text-green-600":"text-zinc-400"}),(0,b.jsxs)("div",{className:"text-left",children:[(0,b.jsx)("div",{className:"font-black text-zinc-900 text-sm",children:"Online Payment"}),(0,b.jsx)("div",{className:"text-[10px] uppercase font-bold text-zinc-400",children:"Secure via Stripe"})]})]}),"online"===L&&(0,b.jsx)("div",{className:"w-4 h-4 bg-green-600 rounded-full border-4 border-white shadow-sm"})]}),(0,b.jsxs)("button",{onClick:()=>M("cod"),className:`flex items-center justify-between w-full border-2 rounded-[1.5rem] p-6 transition-all ${"cod"===L?"border-green-600 bg-green-50 shadow-lg shadow-green-900/5":"border-zinc-50 hover:bg-zinc-50"}`,children:[(0,b.jsxs)("div",{className:"flex items-center gap-4",children:[(0,b.jsx)(m.Truck,{className:"cod"===L?"text-green-600":"text-zinc-400"}),(0,b.jsxs)("div",{className:"text-left",children:[(0,b.jsx)("div",{className:"font-black text-zinc-900 text-sm",children:"Cash on Delivery"}),(0,b.jsx)("div",{className:"text-[10px] uppercase font-bold text-zinc-400",children:"Pay at your doorstep"})]})]}),"cod"===L&&(0,b.jsx)("div",{className:"w-4 h-4 bg-green-600 rounded-full border-4 border-white shadow-sm"})]})]}),(0,b.jsxs)("div",{className:"bg-zinc-50 p-8 rounded-[2rem] space-y-4 border border-zinc-100",children:[(0,b.jsxs)("div",{className:"flex justify-between items-center text-zinc-500",children:[(0,b.jsx)("span",{className:"font-bold text-xs uppercase tracking-widest",children:"Subtotal"}),(0,b.jsxs)("span",{className:"font-black text-zinc-900",children:["₹",z]})]}),(0,b.jsxs)("div",{className:"flex justify-between items-center text-zinc-500",children:[(0,b.jsx)("span",{className:"font-bold text-xs uppercase tracking-widest",children:"Logistic Fee"}),(0,b.jsxs)("span",{className:"font-black text-zinc-900",children:["₹",A]})]}),(0,b.jsxs)("div",{className:"flex justify-between items-center border-t border-zinc-200 pt-6",children:[(0,b.jsx)("span",{className:"font-black text-zinc-900 text-lg",children:"Order Total"}),(0,b.jsxs)("span",{className:"text-3xl font-black text-green-600 tracking-tighter",children:["₹",B]})]})]}),(0,b.jsx)(d.motion.button,{whileHover:{scale:1.02},whileTap:{scale:.98},disabled:N,className:"w-full mt-10 bg-green-600 text-white py-6 rounded-2xl font-black uppercase tracking-widest text-sm shadow-xl shadow-green-900/20 disabled:opacity-50 transition-all flex items-center justify-center gap-3 hover:bg-green-700",onClick:()=>"cod"===L?Q():R(),children:N?(0,b.jsx)(i.Loader2,{className:"animate-spin",size:20}):(0,b.jsxs)(b.Fragment,{children:[(0,b.jsx)("span",{children:"cod"===L?"Place Order":"Initiate Payment"}),(0,b.jsx)(p.Sparkles,{size:18})]})})]})})]})]})]})}],745771)}];

//# sourceMappingURL=src_app_user_checkout_page_tsx_ab8e6673._.js.map