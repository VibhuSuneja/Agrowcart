{
  "version": 3,
  "sources": [],
  "sections": [
    {"offset": {"line": 16, "column": 0}, "map": {"version":3,"sources":["turbopack:///[project]/src/middleware.ts"],"sourcesContent":["import { getToken } from \"next-auth/jwt\"\r\nimport { NextRequest, NextResponse } from \"next/server\"\r\n\r\nexport async function middleware(req:NextRequest){\r\n\r\n    const {pathname}=req.nextUrl\r\n   \r\n    const publicRoutes=[\"/login\",\"/register\",\"/api/auth\"]\r\n     if(publicRoutes.some((path)=>pathname.startsWith(path))){\r\n        return NextResponse.next()\r\n     }\r\nconst token=await getToken({req,secret:process.env.NEXTAUTH_SECRET})\r\nconsole.log(token)\r\nconsole.log(req.url)\r\nif(!token){\r\n  const loginUrl=new URL(\"/login\",req.url)\r\n   loginUrl.searchParams.set(\"callbackUrl\",req.url)\r\n   return NextResponse.redirect(loginUrl)\r\n}\r\n\r\nconst role=token.role\r\nif(pathname.startsWith(\"/user\") && role!==\"user\"){\r\n  return NextResponse.redirect(new URL(\"/unauthorized\",req.url))\r\n}\r\nif(pathname.startsWith(\"/delivery\") && role!==\"deliveryBoy\"){\r\n  return NextResponse.redirect(new URL(\"/unauthorized\",req.url))\r\n}\r\nif(pathname.startsWith(\"/admin\") && role!==\"admin\"){\r\n  return NextResponse.redirect(new URL(\"/unauthorized\",req.url))\r\n}\r\n\r\n\r\nreturn NextResponse.next()\r\n\r\n}\r\n\r\nexport const config = {\r\n  matcher:'/((?!api|_next/static|_next/image|favicon.ico).*)',\r\n}\r\n\r\n\r\n// req------middleware------server"],"names":[],"mappings":";;;;;;AAAA;AAAA;AACA;AAAA;;;AAEO,eAAe,WAAW,GAAe;IAE5C,MAAM,EAAC,QAAQ,EAAC,GAAC,IAAI,OAAO;IAE5B,MAAM,eAAa;QAAC;QAAS;QAAY;KAAY;IACpD,IAAG,aAAa,IAAI,CAAC,CAAC,OAAO,SAAS,UAAU,CAAC,QAAO;QACrD,OAAO,gMAAY,CAAC,IAAI;IAC3B;IACL,MAAM,QAAM,MAAM,IAAA,yJAAQ,EAAC;QAAC;QAAI,QAAO,QAAQ,GAAG,CAAC,eAAe;IAAA;IAClE,QAAQ,GAAG,CAAC;IACZ,QAAQ,GAAG,CAAC,IAAI,GAAG;IACnB,IAAG,CAAC,OAAM;QACR,MAAM,WAAS,IAAI,IAAI,UAAS,IAAI,GAAG;QACtC,SAAS,YAAY,CAAC,GAAG,CAAC,eAAc,IAAI,GAAG;QAC/C,OAAO,gMAAY,CAAC,QAAQ,CAAC;IAChC;IAEA,MAAM,OAAK,MAAM,IAAI;IACrB,IAAG,SAAS,UAAU,CAAC,YAAY,SAAO,QAAO;QAC/C,OAAO,gMAAY,CAAC,QAAQ,CAAC,IAAI,IAAI,iBAAgB,IAAI,GAAG;IAC9D;IACA,IAAG,SAAS,UAAU,CAAC,gBAAgB,SAAO,eAAc;QAC1D,OAAO,gMAAY,CAAC,QAAQ,CAAC,IAAI,IAAI,iBAAgB,IAAI,GAAG;IAC9D;IACA,IAAG,SAAS,UAAU,CAAC,aAAa,SAAO,SAAQ;QACjD,OAAO,gMAAY,CAAC,QAAQ,CAAC,IAAI,IAAI,iBAAgB,IAAI,GAAG;IAC9D;IAGA,OAAO,gMAAY,CAAC,IAAI;AAExB;AAEO,MAAM,SAAS;IACpB,SAAQ;AACV,EAGA,kCAAkC"}}]
}