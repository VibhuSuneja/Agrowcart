{
  "version": 3,
  "sources": [],
  "sections": [
    {"offset": {"line": 46, "column": 0}, "map": {"version":3,"sources":["file:///D:/grocery%20delivery/1.snapcartFolder/1.snapcartFolder/1.snapcart/src/app/api/ai/millet-recipe/route.ts"],"sourcesContent":["import { NextRequest, NextResponse } from \"next/server\";\r\nimport { GoogleGenerativeAI } from \"@google/generative-ai\";\r\n\r\nconst genAI = new GoogleGenerativeAI(process.env.GEMINI_API_KEY!);\r\n\r\nexport async function POST(req: NextRequest) {\r\n    try {\r\n        const { productName, category } = await req.json();\r\n\r\n        if (!productName) {\r\n            return NextResponse.json({ message: \"Product name is required\" }, { status: 400 });\r\n        }\r\n\r\n        const model = genAI.getGenerativeModel({ model: \"gemini-pro\" });\r\n\r\n        const prompt = `You are a professional chef specializing in Indian Millets. \r\n        The user has purchased ${productName} (Category: ${category}). \r\n        Please provide a unique, healthy, and easy-to-make recipe using this millet.\r\n        Format the response in JSON with the following structure:\r\n        {\r\n            \"recipeName\": \"string\",\r\n            \"preparationTime\": \"string\",\r\n            \"difficulty\": \"Easy/Medium/Hard\",\r\n            \"ingredients\": [\"string\"],\r\n            \"instructions\": [\"string\"],\r\n            \"nutritionalBenefit\": \"string\"\r\n        }\r\n        Only return the JSON.`;\r\n\r\n        const result = await model.generateContent(prompt);\r\n        const response = await result.response;\r\n        const text = response.text();\r\n\r\n        // Basic cleanup of potential markdown code blocks\r\n        const jsonString = text.replace(/```json/g, \"\").replace(/```/g, \"\").trim();\r\n        const recipe = JSON.parse(jsonString);\r\n\r\n        return NextResponse.json(recipe);\r\n    } catch (error: any) {\r\n        console.error(\"AI Recipe Error:\", error);\r\n        return NextResponse.json({ message: \"Failed to generate recipe\" }, { status: 500 });\r\n    }\r\n}\r\n"],"names":[],"mappings":";;;;AAAA;AACA;;;AAEA,MAAM,QAAQ,IAAI,sLAAkB,CAAC,QAAQ,GAAG,CAAC,cAAc;AAExD,eAAe,KAAK,GAAgB;IACvC,IAAI;QACA,MAAM,EAAE,WAAW,EAAE,QAAQ,EAAE,GAAG,MAAM,IAAI,IAAI;QAEhD,IAAI,CAAC,aAAa;YACd,OAAO,gJAAY,CAAC,IAAI,CAAC;gBAAE,SAAS;YAA2B,GAAG;gBAAE,QAAQ;YAAI;QACpF;QAEA,MAAM,QAAQ,MAAM,kBAAkB,CAAC;YAAE,OAAO;QAAa;QAE7D,MAAM,SAAS,CAAC;+BACO,EAAE,YAAY,YAAY,EAAE,SAAS;;;;;;;;;;;6BAWvC,CAAC;QAEtB,MAAM,SAAS,MAAM,MAAM,eAAe,CAAC;QAC3C,MAAM,WAAW,MAAM,OAAO,QAAQ;QACtC,MAAM,OAAO,SAAS,IAAI;QAE1B,kDAAkD;QAClD,MAAM,aAAa,KAAK,OAAO,CAAC,YAAY,IAAI,OAAO,CAAC,QAAQ,IAAI,IAAI;QACxE,MAAM,SAAS,KAAK,KAAK,CAAC;QAE1B,OAAO,gJAAY,CAAC,IAAI,CAAC;IAC7B,EAAE,OAAO,OAAY;QACjB,QAAQ,KAAK,CAAC,oBAAoB;QAClC,OAAO,gJAAY,CAAC,IAAI,CAAC;YAAE,SAAS;QAA4B,GAAG;YAAE,QAAQ;QAAI;IACrF;AACJ"}}]
}