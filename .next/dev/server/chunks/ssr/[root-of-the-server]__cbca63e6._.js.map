{
  "version": 3,
  "sources": [],
  "sections": [
    {"offset": {"line": 22, "column": 0}, "map": {"version":3,"sources":["file:///D:/grocery%20delivery/1.snapcartFolder/1.snapcartFolder/1.snapcart/src/app/admin/view-grocery/page.tsx"],"sourcesContent":["'use client'\r\nimport axios from 'axios'\r\nimport React, { useEffect, useState } from 'react'\r\nimport { AnimatePresence, motion } from \"motion/react\"\r\nimport { ArrowLeft, Loader, Package, Pencil, Search, Upload, X } from 'lucide-react'\r\nimport { useRouter } from 'next/navigation'\r\nimport { IGrocery } from '@/models/grocery.model'\r\nimport Image from 'next/image'\r\nconst categories = [\r\n    \"Fruits & Vegetables\",\r\n    \"Dairy & Eggs\",\r\n    \"Rice, Atta & Grains\",\r\n    \"Snacks & Biscuits\",\r\n    \"Spices & Masalas\",\r\n    \"Beverages & Drinks\",\r\n    \"Personal Care\",\r\n    \"Household Essentials\",\r\n    \"Instant & Packaged Food\",\r\n    \"Baby & Pet Care\"\r\n]\r\nconst units = [\r\n    \"kg\", \"g\", \"liter\", \"ml\", \"piece\", \"pack\"\r\n]\r\nfunction ViewGrocery() {\r\n    const router = useRouter()\r\n    const [groceries, setGroceries] = useState<IGrocery[]>()\r\n    const [search,setSearch]=useState(\"\")\r\n    const [editing, setEditing] = useState<IGrocery | null>(null)\r\n    const [imagePreview,setImagePreview]=useState<string | null>(null)\r\n    const [backendImage,setBackendImage]=useState<Blob | null>(null)\r\n    const [loading,setLoading]=useState(false)\r\n    const [deleteLoading,setDeleteLoading]=useState(false)\r\n    const [fillterd,setFilltered]=useState<IGrocery[]>()\r\n    useEffect(() => {\r\n        const getGroceries = async () => {\r\n            try {\r\n                const result = await axios.get(\"/api/admin/get-groceries\")\r\n                setGroceries(result.data)\r\n                setFilltered(result.data)\r\n            } catch (error) {\r\n                console.log(error)\r\n            }\r\n        }\r\n        getGroceries()\r\n    }, [])\r\n\r\n    useEffect(()=>{\r\nif(editing){\r\n    setImagePreview(editing.image)\r\n}\r\n    },[editing])\r\n\r\n\r\n    const handleImageUpload=(e:React.ChangeEvent<HTMLInputElement>)=>{\r\n        const file=e.target.files?.[0]\r\n        if(file){\r\n            setBackendImage(file)\r\n            setImagePreview(URL.createObjectURL(file))\r\n        }\r\n    }\r\n\r\n    const handleEdit=async ()=>{\r\n        setLoading(true)\r\n        if(!editing) return\r\n        try {\r\n           const formData=new FormData()\r\n            formData.append(\"groceryId\",editing?._id?.toString()!)\r\n    formData.append(\"name\",editing?.name)\r\n    formData.append(\"category\",editing.category)\r\n    formData.append(\"price\",editing.price)\r\n    formData.append(\"unit\",editing.unit)\r\n    if(backendImage){\r\nformData.append(\"image\",backendImage)\r\n    }\r\n            const result=await axios.post(\"/api/admin/edit-grocery\",formData)\r\n            setLoading(false)\r\n            window.location.reload()\r\n        } catch (error) {\r\n            console.log(error)\r\n        }\r\n    }\r\n    const handleDelete=async ()=>{\r\n        setDeleteLoading(true)\r\n        if(!editing) return\r\n        try {\r\n            const result=await axios.post(\"/api/admin/delete-grocery\",{groceryId:editing._id})\r\n            setDeleteLoading(false)\r\n            window.location.reload()\r\n        } catch (error) {\r\n            console.log(error)\r\n        }\r\n    }\r\n\r\n    const handleSearch=(e:React.FormEvent)=>{\r\n        e.preventDefault()\r\n        const q=search.toLowerCase()\r\n\r\n        setFilltered(\r\n            groceries?.filter(\r\n                (g)=>g.name.toLowerCase().includes(q) || g.category.toLowerCase().includes(q)\r\n                \r\n\r\n            )\r\n        )\r\n\r\n    }\r\n    return (\r\n        <div className=\"pt-4 w-[95%] md:w-[85%] mx-auto pb-20\">\r\n            <motion.div\r\n                initial={{ opacity: 0, x: -20 }}\r\n                animate={{ opacity: 1, x: 0 }}\r\n                transition={{ duration: 0.4 }}\r\n                className=\"flex flex-col sm:flex-row items-center justify-between gap-4 mb-8 text-center sm:text-left\"\r\n            >\r\n                <button\r\n                    onClick={() => router.push(\"/\")}\r\n                    className='flex items-center justify-center gap-2 bg-green-100 hover:bg-green-200 text-green-700 font-semibold px-4 py-2 rounded-full transition w-full sm:w-auto'\r\n                ><ArrowLeft size={18} /><span>Back</span></button>\r\n                <h1 className='text-2xl md:text-3xl font-extrabold text-green-700 flex items-center justify-center gap-2'><Package size={28} className='text-green-600' />Manage Groceries</h1>\r\n            </motion.div>\r\n\r\n            <motion.form initial={{ opacity: 0, y: 10 }}\r\n                animate={{ opacity: 1, y: 0 }}\r\n                transition={{ duration: 0.4 }}\r\n                onSubmit={handleSearch}\r\n                className=\"flex items-center bg-white border border-gray-200 rounded-full px-5 py-3 shadow-sm mb-10 hover:shadow-lg transition-all max-w-lg mx-auto w-full\">\r\n                <Search className=\"text-gray-500 w-5 h-5 mr-2\" />\r\n                <input type=\"text\" className='w-full outline-none text-gray-700 placeholder-gray-400' placeholder='Search by name or category...' value={search} onChange={(e)=>setSearch(e.target.value)}/>\r\n            </motion.form>\r\n            <div className='space-y-4'>\r\n                {fillterd?.map((g, i) => (\r\n                    <motion.div\r\n                        key={i}\r\n                        whileHover={{ scale: 1.01 }}\r\n                        transition={{ type: \"spring\", stiffness: 100 }}\r\n                        className=\"bg-white rounded-2xl shadow-md hover:shadow-xl border border-gray-100 flex flex-col sm:flex-row items-center sm:items-start gap-5 p-5 transition-all\"\r\n                    >\r\n                        <div className='relative w-full sm:w-44 aspect-square rounded-xl overflow-hidden border border-gray-200'>\r\n                            <Image\r\n                                src={g.image}\r\n                                alt={g.name}\r\n                                fill\r\n                                className='object-cover hover:scale-110 transition-transform duration-500'\r\n                            />\r\n                        </div>\r\n\r\n                        <div className='flex-1 flex flex-col justify-between w-full'>\r\n                            <div>\r\n                                <h3 className='font-semibold text-gray-800 text-lg truncate'>{g.name}</h3>\r\n                                <p className='text-gray-500 text-sm capitalize'>{g.category}</p>\r\n                            </div>\r\n\r\n                            <div className='mt-3 flex flex-col sm:flex-row sm:items-center sm:justify-between gap-2'>\r\n                                <p className='text-green-700 font-bold text-lg'>\r\n                                    â‚¹{g.price}/ <span className='text-gray-500 text-sm font-medium ml-1'>{g.unit}</span>\r\n                                </p>\r\n                                <button className='bg-green-600 text-white px-4 py-2 rounded-lg text-sm font-semibold flex items-center justify-center gap-2 hover:bg-green-700 transition-all' onClick={() => setEditing(g)}>\r\n                                    <Pencil size={15} /> Edit\r\n                                </button>\r\n                            </div>\r\n                        </div>\r\n\r\n                    </motion.div>\r\n                ))}\r\n            </div>\r\n\r\n            <AnimatePresence>\r\n                {editing && (\r\n                    <motion.div\r\n                        initial={{ opacity: 0 }}\r\n                        animate={{ opacity: 1 }}\r\n                        exit={{ opacity: 0 }}\r\n                        className=\"fixed inset-0 bg-black/40 flex items-center justify-center z-50 backdrop-blur-sm px-4\"\r\n                    >\r\n\r\n                        <motion.div\r\n                            initial={{ y: 40, opacity: 0 }}\r\n                            animate={{ y: 0, opacity: 1 }}\r\n                            exit={{ y: 40, opacity: 0 }}\r\n                            transition={{ duration: 0.3 }}\r\n                            className=\"bg-white rounded-2xl shadow-2xl w-full max-w-md p-7 relative\"\r\n                        >\r\n                        <div className='flex justify-between items-center mb-4'>\r\n                            <h2 className='text-2xl font-bold text-green-700'>Edit Grocery</h2>\r\n                            <button className='text-gray-600 hover:text-red-600' onClick={()=>setEditing(null)}>\r\n                            <X size={18}/>\r\n                            </button>\r\n                        </div>\r\n                        <div className='relative aspect-square w-full rounded-lg overflow-hidden mb-4 border border-gray-200 group'>\r\n                         {imagePreview && <Image\r\n                         src={imagePreview}\r\n                         alt={editing.name}\r\n                         fill\r\n                         className='object-cover'\r\n                         />}\r\n                         <label htmlFor='imageUpload' className='absolute inset-0 bg-black/40 opacity-0 group-hover:opacity-100 flex items-center justify-center cursor-pointer transition-opacity'><Upload size={28} className='text-green-500'/></label>\r\n                         <input type=\"file\" accept='image/*' hidden id='imageUpload' onChange={handleImageUpload}/>\r\n                        </div>\r\n\r\n                        <div className='space-y-4'>\r\n                           <input \r\n                           type=\"text\" \r\n                           placeholder='Enter Grocery Name'\r\n                           value={editing.name}\r\n                           onChange={(e)=>setEditing({...editing,name:e.target.value})}\r\n                           className='w-full border border-gray-300 rounded-lg p-2.5 focus:ring-2 focus:ring-green-500 outline-none'/>\r\n\r\n                           <select \r\n                           className='w-full border border-gray-300 rounded-lg p-2.5 focus:ring-2 focus:ring-green-500 outline-none bg-white'\r\n                           value={editing.category}\r\n                           onChange={(e)=>setEditing({...editing,category:e.target.value})}\r\n                           >\r\n                            <option>Select Category</option>\r\n                             {categories.map((c,i)=>(\r\n                                <option key={i} value={c}>{c}</option>\r\n                             ))}\r\n                           </select>\r\n                            <input \r\n                           type=\"text\" \r\n                           placeholder='Price'\r\n                           value={editing.price}\r\n                           onChange={(e)=>setEditing({...editing,price:e.target.value})}\r\n                           className='w-full border border-gray-300 rounded-lg p-2.5 focus:ring-2 focus:ring-green-500 outline-none'/>\r\n                            <select \r\n                           className='w-full border border-gray-300 rounded-lg p-2.5 focus:ring-2 focus:ring-green-500 outline-none bg-white'\r\n                           value={editing.unit}\r\n                           onChange={(e)=>setEditing({...editing,unit:e.target.value})}\r\n                           >\r\n                            <option>Select Category</option>\r\n                             {units.map((u,i)=>(\r\n                                <option key={i} value={u}>{u}</option>\r\n                             ))}\r\n                           </select>\r\n                        </div>\r\n                        <div className='flex justify-end gap-3 mt-6'>\r\n                        <button className=\"px-4 py-2 rounded-lg bg-green-600 text-white flex items-center gap-2 hover:bg-green-700 transition-all\"\r\n                        onClick={handleEdit}\r\n                        disabled={loading}\r\n                        >\r\n                         {loading?<Loader size={14}/>:\"Edit Grocery\"}  \r\n                        </button>\r\n                        <button className=\"px-4 py-2 rounded-lg  bg-red-600 text-white flex items-center gap-2 hover:bg-red-700  transition\"\r\n                        onClick={handleDelete}\r\n                        disabled={deleteLoading}\r\n                        >\r\n                            {deleteLoading?<Loader size={14}/>:\"Delete Grocery\"}  \r\n                        </button>\r\n                       </div>\r\n                        </motion.div>\r\n\r\n\r\n                    </motion.div>\r\n                )}\r\n            </AnimatePresence>\r\n\r\n\r\n        </div>\r\n    )\r\n}\r\n\r\nexport default ViewGrocery\r\n"],"names":[],"mappings":"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"}}]
}