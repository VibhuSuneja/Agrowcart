{
  "version": 3,
  "sources": [],
  "sections": [
    {"offset": {"line": 46, "column": 0}, "map": {"version":3,"sources":["file:///D:/Agrowcart/AgrowCart/Agrowcart/Agrowcart/src/lib/db.ts"],"sourcesContent":["import mongoose from \"mongoose\";\r\n\r\nconst mongodbUrl=process.env.MONGODB_URL\r\n\r\nif(!mongodbUrl){\r\n throw new Error(\"db error\")\r\n}\r\n\r\n\r\n\r\nlet cached=global.mongoose\r\nif(!cached){\r\n    cached=global.mongoose={conn:null,promise:null}\r\n}\r\n\r\nconst connectDb=async ()=>{\r\n    if(cached.conn){\r\n       \r\n        return cached.conn\r\n    }\r\n\r\n    if(!cached.promise){\r\n      \r\n        cached.promise=mongoose.connect(mongodbUrl).then((conn)=>conn.connection)\r\n    }\r\n    try {\r\n        const conn=await cached.promise\r\n        return conn\r\n    } catch (error) {\r\n        console.log(error)\r\n    }\r\n\r\n}\r\n\r\nexport default connectDb"],"names":[],"mappings":";;;;AAAA;;AAEA,MAAM,aAAW,QAAQ,GAAG,CAAC,WAAW;AAExC,IAAG,CAAC,YAAW;IACd,MAAM,IAAI,MAAM;AACjB;AAIA,IAAI,SAAO,yDAAO,QAAQ;AAC1B,IAAG,CAAC,QAAO;IACP,SAAO,yDAAO,QAAQ,GAAC;QAAC,MAAK;QAAK,SAAQ;IAAI;AAClD;AAEA,MAAM,YAAU;IACZ,IAAG,OAAO,IAAI,EAAC;QAEX,OAAO,OAAO,IAAI;IACtB;IAEA,IAAG,CAAC,OAAO,OAAO,EAAC;QAEf,OAAO,OAAO,GAAC,oHAAQ,CAAC,OAAO,CAAC,YAAY,IAAI,CAAC,CAAC,OAAO,KAAK,UAAU;IAC5E;IACA,IAAI;QACA,MAAM,OAAK,MAAM,OAAO,OAAO;QAC/B,OAAO;IACX,EAAE,OAAO,OAAO;QACZ,QAAQ,GAAG,CAAC;IAChB;AAEJ;uCAEe"}},
    {"offset": {"line": 82, "column": 0}, "map": {"version":3,"sources":["file:///D:/Agrowcart/AgrowCart/Agrowcart/Agrowcart/src/models/product.model.ts"],"sourcesContent":["import mongoose from \"mongoose\";\r\n\r\nexport interface IProduct {\r\n    _id?: mongoose.Types.ObjectId,\r\n    name: string,\r\n    category: string,\r\n    price: string,\r\n    unit: string,\r\n    image: string,\r\n    priceAI?: string,\r\n    farmId?: string,\r\n    harvestDate?: Date,\r\n    qualityCertification?: string,\r\n    rating?: number,\r\n    reviewCount?: number,\r\n    scientificBenefits?: string,\r\n    createdAt?: Date,\r\n    updatedAt?: Date,\r\n    owner?: mongoose.Types.ObjectId,\r\n    // Legal & Compliance Fields\r\n    fssaiLicense?: string,\r\n    batchNumber?: string,\r\n    isCompliant?: boolean,\r\n    disclaimer?: string,\r\n    originState?: string,\r\n    originCity?: string,\r\n}\r\n\r\nconst productSchema = new mongoose.Schema<IProduct>({\r\n    name: {\r\n        type: String,\r\n        required: true\r\n    },\r\n    category: {\r\n        type: String,\r\n        enum: [\r\n            \"Raw Millets\",\r\n            \"Millet Rice\",\r\n            \"Millet Flour\",\r\n            \"Millet Snacks\",\r\n            \"Value-Added\",\r\n            \"Seeds\",\r\n            \"Organic Mix\"\r\n        ],\r\n        required: true\r\n    },\r\n    price: {\r\n        type: String,\r\n        required: true\r\n\r\n    }\r\n    ,\r\n    unit: {\r\n        type: String,\r\n        required: true,\r\n        enum: [\r\n            \"kg\", \"g\", \"liter\", \"ml\", \"piece\", \"pack\", \"quintal\"\r\n        ]\r\n\r\n    }\r\n    ,\r\n    image: {\r\n        type: String,\r\n        required: true\r\n\r\n    },\r\n    priceAI: {\r\n        type: String\r\n    },\r\n    farmId: {\r\n        type: String\r\n    },\r\n    harvestDate: {\r\n        type: Date\r\n    },\r\n    qualityCertification: {\r\n        type: String\r\n    },\r\n    owner: {\r\n        type: mongoose.Schema.Types.ObjectId,\r\n        ref: \"User\"\r\n    },\r\n    rating: {\r\n        type: Number,\r\n        default: 0,\r\n        min: 0,\r\n        max: 5\r\n    },\r\n    reviewCount: {\r\n        type: Number,\r\n        default: 0\r\n    },\r\n    scientificBenefits: {\r\n        type: String,\r\n        default: \"Cultivated for millennia, this millet is power-packed with essential minerals and fiber, promoting digestive health and sustained energy release.\"\r\n    },\r\n    // Legal & Compliance Schema Addition\r\n    fssaiLicense: {\r\n        type: String,\r\n        required: false // Optional for raw farmers, mandatory for processors\r\n    },\r\n    batchNumber: {\r\n        type: String,\r\n        required: false\r\n    },\r\n    isCompliant: {\r\n        type: Boolean,\r\n        default: false // Requires admin/system approval\r\n    },\r\n    disclaimer: {\r\n        type: String,\r\n        default: \"Product information is provided by the seller. AgrowCart is a marketplace and not responsible for seller claims.\"\r\n    },\r\n    originState: {\r\n        type: String,\r\n        default: \"Haryana\"\r\n    },\r\n    originCity: {\r\n        type: String,\r\n        default: \"\"\r\n    }\r\n}, {\r\n    timestamps: true\r\n})\r\n\r\n\r\nconst Product = mongoose.models.Product || mongoose.model(\"Product\", productSchema)\r\nexport default Product\r\n\r\n"],"names":[],"mappings":";;;;AAAA;;AA4BA,MAAM,gBAAgB,IAAI,oHAAQ,CAAC,MAAM,CAAW;IAChD,MAAM;QACF,MAAM;QACN,UAAU;IACd;IACA,UAAU;QACN,MAAM;QACN,MAAM;YACF;YACA;YACA;YACA;YACA;YACA;YACA;SACH;QACD,UAAU;IACd;IACA,OAAO;QACH,MAAM;QACN,UAAU;IAEd;IAEA,MAAM;QACF,MAAM;QACN,UAAU;QACV,MAAM;YACF;YAAM;YAAK;YAAS;YAAM;YAAS;YAAQ;SAC9C;IAEL;IAEA,OAAO;QACH,MAAM;QACN,UAAU;IAEd;IACA,SAAS;QACL,MAAM;IACV;IACA,QAAQ;QACJ,MAAM;IACV;IACA,aAAa;QACT,MAAM;IACV;IACA,sBAAsB;QAClB,MAAM;IACV;IACA,OAAO;QACH,MAAM,oHAAQ,CAAC,MAAM,CAAC,KAAK,CAAC,QAAQ;QACpC,KAAK;IACT;IACA,QAAQ;QACJ,MAAM;QACN,SAAS;QACT,KAAK;QACL,KAAK;IACT;IACA,aAAa;QACT,MAAM;QACN,SAAS;IACb;IACA,oBAAoB;QAChB,MAAM;QACN,SAAS;IACb;IACA,qCAAqC;IACrC,cAAc;QACV,MAAM;QACN,UAAU,MAAM,qDAAqD;IACzE;IACA,aAAa;QACT,MAAM;QACN,UAAU;IACd;IACA,aAAa;QACT,MAAM;QACN,SAAS,MAAM,iCAAiC;IACpD;IACA,YAAY;QACR,MAAM;QACN,SAAS;IACb;IACA,aAAa;QACT,MAAM;QACN,SAAS;IACb;IACA,YAAY;QACR,MAAM;QACN,SAAS;IACb;AACJ,GAAG;IACC,YAAY;AAChB;AAGA,MAAM,UAAU,oHAAQ,CAAC,MAAM,CAAC,OAAO,IAAI,oHAAQ,CAAC,KAAK,CAAC,WAAW;uCACtD"}},
    {"offset": {"line": 197, "column": 0}, "map": {"version":3,"sources":["file:///D:/Agrowcart/AgrowCart/Agrowcart/Agrowcart/src/app/api/product/%5Bid%5D/route.ts"],"sourcesContent":["import connectDb from \"@/lib/db\";\r\nimport Product from \"@/models/product.model\";\r\nimport { NextRequest, NextResponse } from \"next/server\";\r\n\r\nexport async function GET(req: NextRequest, { params }: { params: Promise<{ id: string }> }) {\r\n    try {\r\n        await connectDb()\r\n        const { id } = await params\r\n        const product = await Product.findById(id).populate(\"owner\", \"name image role\")\r\n        if (!product) {\r\n            return NextResponse.json({ message: \"Product not found\" }, { status: 404 })\r\n        }\r\n        return NextResponse.json(product)\r\n    } catch (error) {\r\n        return NextResponse.json({ message: \"Internal server error\" }, { status: 500 })\r\n    }\r\n}\r\n"],"names":[],"mappings":";;;;AAAA;AACA;AACA;;;;AAEO,eAAe,IAAI,GAAgB,EAAE,EAAE,MAAM,EAAuC;IACvF,IAAI;QACA,MAAM,IAAA,6HAAS;QACf,MAAM,EAAE,EAAE,EAAE,GAAG,MAAM;QACrB,MAAM,UAAU,MAAM,8IAAO,CAAC,QAAQ,CAAC,IAAI,QAAQ,CAAC,SAAS;QAC7D,IAAI,CAAC,SAAS;YACV,OAAO,gJAAY,CAAC,IAAI,CAAC;gBAAE,SAAS;YAAoB,GAAG;gBAAE,QAAQ;YAAI;QAC7E;QACA,OAAO,gJAAY,CAAC,IAAI,CAAC;IAC7B,EAAE,OAAO,OAAO;QACZ,OAAO,gJAAY,CAAC,IAAI,CAAC;YAAE,SAAS;QAAwB,GAAG;YAAE,QAAQ;QAAI;IACjF;AACJ"}}]
}