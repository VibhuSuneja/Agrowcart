{
  "version": 3,
  "sources": [],
  "sections": [
    {"offset": {"line": 46, "column": 0}, "map": {"version":3,"sources":["file:///D:/Agrowcart/AgrowCart/Agrowcart/Agrowcart/src/app/api/ai/forum-assist/route.ts"],"sourcesContent":["import { NextRequest, NextResponse } from \"next/server\";\r\n\r\nexport async function POST(req: NextRequest) {\r\n    try {\r\n        const { question, description } = await req.json();\r\n\r\n        if (!question) {\r\n            return NextResponse.json({ message: \"Question is required\" }, { status: 400 });\r\n        }\r\n\r\n        // Construct the prompt for Gemini\r\n        const prompt = `You are a helpful expert on Millets. A user asks: \"${question}\".\r\n        Details: \"${description || ''}\".\r\n        Provide a clear, accurate, and encouraging answer under 200 words. Use markdown.`;\r\n\r\n        const apiKey = process.env.GEMINI_API_KEY;\r\n        if (!apiKey) {\r\n            console.error(\"Gemini API Key is missing\");\r\n            return NextResponse.json({ message: \"Server configuration error\" }, { status: 500 });\r\n        }\r\n\r\n        const url = `https://generativelanguage.googleapis.com/v1beta/models/gemini-2.5-flash:generateContent?key=${apiKey}`;\r\n\r\n        const response = await fetch(url, {\r\n            method: \"POST\",\r\n            headers: {\r\n                \"Content-Type\": \"application/json\"\r\n            },\r\n            body: JSON.stringify({\r\n                contents: [{\r\n                    parts: [{ text: prompt }]\r\n                }]\r\n            })\r\n        });\r\n\r\n        if (!response.ok) {\r\n            const errorText = await response.text();\r\n            console.error(\"Gemini API Error:\", errorText);\r\n            return NextResponse.json({ message: `Gemini API Error: ${response.status} - ${errorText}` }, { status: response.status });\r\n        }\r\n\r\n        const data = await response.json();\r\n        const aiAnswer = data.candidates?.[0]?.content?.parts?.[0]?.text || \"I could not generate an answer.\";\r\n\r\n        return NextResponse.json({ result: aiAnswer }, { status: 200 });\r\n\r\n    } catch (error) {\r\n        console.error(\"AI Error:\", error);\r\n        return NextResponse.json({ message: \"Error generating answer\" }, { status: 500 });\r\n    }\r\n}\r\n"],"names":[],"mappings":";;;;AAAA;;AAEO,eAAe,KAAK,GAAgB;IACvC,IAAI;QACA,MAAM,EAAE,QAAQ,EAAE,WAAW,EAAE,GAAG,MAAM,IAAI,IAAI;QAEhD,IAAI,CAAC,UAAU;YACX,OAAO,gJAAY,CAAC,IAAI,CAAC;gBAAE,SAAS;YAAuB,GAAG;gBAAE,QAAQ;YAAI;QAChF;QAEA,kCAAkC;QAClC,MAAM,SAAS,CAAC,mDAAmD,EAAE,SAAS;kBACpE,EAAE,eAAe,GAAG;wFACkD,CAAC;QAEjF,MAAM,SAAS,QAAQ,GAAG,CAAC,cAAc;QACzC,IAAI,CAAC,QAAQ;YACT,QAAQ,KAAK,CAAC;YACd,OAAO,gJAAY,CAAC,IAAI,CAAC;gBAAE,SAAS;YAA6B,GAAG;gBAAE,QAAQ;YAAI;QACtF;QAEA,MAAM,MAAM,CAAC,6FAA6F,EAAE,QAAQ;QAEpH,MAAM,WAAW,MAAM,MAAM,KAAK;YAC9B,QAAQ;YACR,SAAS;gBACL,gBAAgB;YACpB;YACA,MAAM,KAAK,SAAS,CAAC;gBACjB,UAAU;oBAAC;wBACP,OAAO;4BAAC;gCAAE,MAAM;4BAAO;yBAAE;oBAC7B;iBAAE;YACN;QACJ;QAEA,IAAI,CAAC,SAAS,EAAE,EAAE;YACd,MAAM,YAAY,MAAM,SAAS,IAAI;YACrC,QAAQ,KAAK,CAAC,qBAAqB;YACnC,OAAO,gJAAY,CAAC,IAAI,CAAC;gBAAE,SAAS,CAAC,kBAAkB,EAAE,SAAS,MAAM,CAAC,GAAG,EAAE,WAAW;YAAC,GAAG;gBAAE,QAAQ,SAAS,MAAM;YAAC;QAC3H;QAEA,MAAM,OAAO,MAAM,SAAS,IAAI;QAChC,MAAM,WAAW,KAAK,UAAU,EAAE,CAAC,EAAE,EAAE,SAAS,OAAO,CAAC,EAAE,EAAE,QAAQ;QAEpE,OAAO,gJAAY,CAAC,IAAI,CAAC;YAAE,QAAQ;QAAS,GAAG;YAAE,QAAQ;QAAI;IAEjE,EAAE,OAAO,OAAO;QACZ,QAAQ,KAAK,CAAC,aAAa;QAC3B,OAAO,gJAAY,CAAC,IAAI,CAAC;YAAE,SAAS;QAA0B,GAAG;YAAE,QAAQ;QAAI;IACnF;AACJ"}}]
}