{
  "version": 3,
  "sources": [],
  "sections": [
    {"offset": {"line": 4, "column": 0}, "map": {"version":3,"sources":["file:///D:/Agrowcart/AgrowCart/Agrowcart/Agrowcart/src/components/LiveMap.tsx"],"sourcesContent":["import React, { useEffect, useState } from 'react'\r\ninterface ILocation {\r\n    latitude: number,\r\n    longitude: number\r\n}\r\ninterface Iprops {\r\n    userLocation: ILocation\r\n    deliveryBoyLocation: ILocation\r\n    children?: React.ReactNode\r\n}\r\nimport L, { LatLngExpression } from \"leaflet\"\r\nimport { MapContainer, Marker, Polyline, Popup, TileLayer, useMap } from 'react-leaflet'\r\nimport \"leaflet/dist/leaflet.css\"\r\nimport { LocateFixed } from \"lucide-react\"\r\n\r\nfunction Recenter({ positions }: { positions: [number, number] }) {\r\n    const map = useMap()\r\n    useEffect(() => {\r\n        if (positions[0] !== 0 && positions[1] !== 0) {\r\n            map.setView(positions, map.getZoom(), {\r\n                animate: true\r\n            })\r\n        }\r\n    }, [positions, map])\r\n    return null\r\n}\r\n\r\nfunction MapEvents({ setMap }: { setMap: (map: L.Map) => void }) {\r\n    const map = useMap()\r\n    useEffect(() => {\r\n        setMap(map)\r\n    }, [map, setMap])\r\n    return null\r\n}\r\n\r\nfunction LiveMap({ userLocation, deliveryBoyLocation, children }: Iprops) {\r\n    const [map, setMap] = useState<L.Map | null>(null)\r\n\r\n    const deliveryBoyIcon = L.divIcon({\r\n        className: 'bg-transparent',\r\n        html: `<div style=\"background-color: white; width: 40px; height: 40px; border-radius: 50%; display: flex; align-items: center; justify-content: center; border: 3px solid #16a34a; box-shadow: 0 4px 6px rgba(0,0,0,0.3);\">\r\n         <svg xmlns=\"http://www.w3.org/2000/svg\" width=\"20\" height=\"20\" viewBox=\"0 0 24 24\" fill=\"none\" stroke=\"#16a34a\" stroke-width=\"2\" stroke-linecap=\"round\" stroke-linejoin=\"round\"><path d=\"M10 17h4V5H2v12h3\"/><path d=\"M20 17h2v-3.34a4 4 0 0 0-1.17-2.83L19 9h-5\"/><path d=\"M14 17h1\"/><circle cx=\"7.5\" cy=\"17.5\" r=\"2.5\"/><circle cx=\"17.5\" cy=\"17.5\" r=\"2.5\"/></svg>\r\n        </div>`,\r\n        iconSize: [40, 40],\r\n        iconAnchor: [20, 20],\r\n        popupAnchor: [0, -20]\r\n    })\r\n\r\n    const userIcon = L.divIcon({\r\n        className: 'bg-transparent',\r\n        html: `<div style=\"background-color: white; width: 40px; height: 40px; border-radius: 50%; display: flex; align-items: center; justify-content: center; border: 3px solid #2563eb; box-shadow: 0 4px 6px rgba(0,0,0,0.3);\">\r\n          <svg xmlns=\"http://www.w3.org/2000/svg\" width=\"20\" height=\"20\" viewBox=\"0 0 24 24\" fill=\"none\" stroke=\"#2563eb\" stroke-width=\"2\" stroke-linecap=\"round\" stroke-linejoin=\"round\"><path d=\"M20 10c0 6-8 12-8 12s-8-6-8-12a8 8 0 0 1 16 0Z\"/><circle cx=\"12\" cy=\"10\" r=\"3\"/></svg>\r\n        </div>`,\r\n        iconSize: [40, 40],\r\n        iconAnchor: [20, 20],\r\n        popupAnchor: [0, -20]\r\n    })\r\n\r\n    const linePositions =\r\n        deliveryBoyLocation && userLocation && deliveryBoyLocation.latitude !== 0 && userLocation.latitude !== 0\r\n            ? [\r\n                [userLocation.latitude, userLocation.longitude],\r\n                [deliveryBoyLocation.latitude, deliveryBoyLocation.longitude]\r\n\r\n            ] : []\r\n    const center = deliveryBoyLocation && deliveryBoyLocation.latitude !== 0\r\n        ? [deliveryBoyLocation.latitude, deliveryBoyLocation.longitude]\r\n        : (userLocation.latitude !== 0 ? [userLocation.latitude, userLocation.longitude] : [20.5937, 78.9629]); // Default to India center if both 0\r\n\r\n\r\n    return (\r\n        <div className=\"space-y-4\">\r\n            <div className='w-full h-[500px] rounded-xl overflow-hidden shadow-lg border border-zinc-100 z-0'>\r\n                <MapContainer center={center as any} zoom={13} scrollWheelZoom={true} className=\"w-full h-full\">\r\n                    <MapEvents setMap={setMap} />\r\n                    <Recenter positions={center as any} />\r\n                    <TileLayer attribution='&copy; <a href=\"https://www.openstreetmap.org/copyright\">OpenStreetMap</a> contributors'\r\n                        url=\"https://{s}.tile.openstreetmap.org/{z}/{x}/{y}.png\"\r\n                    />\r\n\r\n                    {userLocation.latitude !== 0 && (\r\n                        <Marker position={[userLocation.latitude, userLocation.longitude]} icon={userIcon}>\r\n                            <Popup>Delivery Address</Popup>\r\n                        </Marker>\r\n                    )}\r\n\r\n                    {deliveryBoyLocation && deliveryBoyLocation.latitude !== 0 && (\r\n                        <Marker position={[deliveryBoyLocation.latitude, deliveryBoyLocation.longitude]} icon={deliveryBoyIcon}>\r\n                            <Popup>Delivery Partner</Popup>\r\n                        </Marker>\r\n                    )}\r\n\r\n                    <Polyline positions={linePositions as any} color='green' weight={4} dashArray=\"10, 10\" />\r\n                </MapContainer>\r\n            </div>\r\n\r\n            <div className=\"flex flex-col md:flex-row justify-between items-center gap-4 px-2\">\r\n                <div className=\"w-full md:w-auto order-2 md:order-1\">\r\n                    {children}\r\n                </div>\r\n                <button\r\n                    className=\"bg-white text-green-700 px-6 py-3 rounded-xl flex items-center gap-2 font-bold text-sm shadow-md border border-zinc-100 hover:bg-green-50 transition-all active:scale-95 whitespace-nowrap order-1 md:order-2 self-end\"\r\n                    onClick={(e) => {\r\n                        e.preventDefault();\r\n                        map?.flyTo(center as any, 15)\r\n                    }}\r\n                >\r\n                    <LocateFixed size={18} />\r\n                    <span>Recenter View</span>\r\n                </button>\r\n            </div>\r\n        </div>\r\n    )\r\n}\r\n\r\nexport default LiveMap\r\n"],"names":[],"mappings":"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"}}]
}