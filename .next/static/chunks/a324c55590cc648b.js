(globalThis.TURBOPACK||(globalThis.TURBOPACK=[])).push(["object"==typeof document?document.currentScript:void 0,871689,e=>{"use strict";let t=(0,e.i(475254).default)("arrow-left",[["path",{d:"m12 19-7-7 7-7",key:"1l729n"}],["path",{d:"M19 12H5",key:"x3x0zl"}]]);e.s(["ArrowLeft",()=>t],871689)},531278,e=>{"use strict";let t=(0,e.i(475254).default)("loader-circle",[["path",{d:"M21 12a9 9 0 1 1-6.219-8.56",key:"13zald"}]]);e.s(["Loader2",()=>t],531278)},343432,e=>{"use strict";let t=(0,e.i(475254).default)("phone",[["path",{d:"M13.832 16.568a1 1 0 0 0 1.213-.303l.355-.465A2 2 0 0 1 17 15h3a2 2 0 0 1 2 2v3a2 2 0 0 1-2 2A18 18 0 0 1 2 4a2 2 0 0 1 2-2h3a2 2 0 0 1 2 2v3a2 2 0 0 1-.8 1.6l-.468.351a1 1 0 0 0-.292 1.233 14 14 0 0 0 6.392 6.384",key:"9njp5v"}]]);e.s(["Phone",()=>t],343432)},581418,e=>{"use strict";let t=(0,e.i(475254).default)("shield-check",[["path",{d:"M20 13c0 5-3.5 7.5-7.66 8.95a1 1 0 0 1-.67-.01C7.5 20.5 4 18 4 13V6a1 1 0 0 1 1-1c2 0 4.5-1.2 6.24-2.72a1.17 1.17 0 0 1 1.52 0C14.51 3.81 17 5 19 5a1 1 0 0 1 1 1z",key:"oel41y"}],["path",{d:"m9 12 2 2 4-4",key:"dzmm74"}]]);e.s(["ShieldCheck",()=>t],581418)},715788,e=>{"use strict";let t=(0,e.i(475254).default)("truck",[["path",{d:"M14 18V6a2 2 0 0 0-2-2H4a2 2 0 0 0-2 2v11a1 1 0 0 0 1 1h2",key:"wrbu53"}],["path",{d:"M15 18H9",key:"1lyqi6"}],["path",{d:"M19 18h2a1 1 0 0 0 1-1v-3.65a1 1 0 0 0-.22-.624l-3.48-4.35A1 1 0 0 0 17.52 8H14",key:"lysw3i"}],["circle",{cx:"17",cy:"18",r:"2",key:"332jqn"}],["circle",{cx:"7",cy:"18",r:"2",key:"19iecd"}]]);e.s(["Truck",()=>t],715788)},561659,247978,e=>{"use strict";let t=(0,e.i(475254).default)("credit-card",[["rect",{width:"20",height:"14",x:"2",y:"5",rx:"2",key:"ynyp8z"}],["line",{x1:"2",x2:"22",y1:"10",y2:"10",key:"1b3vmo"}]]);e.s(["default",()=>t],247978),e.s(["CreditCard",()=>t],561659)},667585,(e,t,s)=>{"use strict";Object.defineProperty(s,"__esModule",{value:!0}),Object.defineProperty(s,"BailoutToCSR",{enumerable:!0,get:function(){return a}});let r=e.r(132061);function a({reason:e,children:t}){if("undefined"==typeof window)throw Object.defineProperty(new r.BailoutToCSRError(e),"__NEXT_ERROR_CODE",{value:"E394",enumerable:!1,configurable:!0});return t}},309885,(e,t,s)=>{"use strict";function r(e){return e.split("/").map(e=>encodeURIComponent(e)).join("/")}Object.defineProperty(s,"__esModule",{value:!0}),Object.defineProperty(s,"encodeURIPath",{enumerable:!0,get:function(){return r}})},652157,(e,t,s)=>{"use strict";Object.defineProperty(s,"__esModule",{value:!0}),Object.defineProperty(s,"PreloadChunks",{enumerable:!0,get:function(){return n}});let r=e.r(843476),a=e.r(174080),l=e.r(563599),i=e.r(309885);function n({moduleIds:e}){if("undefined"!=typeof window)return null;let t=l.workAsyncStorage.getStore();if(void 0===t)return null;let s=[];if(t.reactLoadableManifest&&e){let r=t.reactLoadableManifest;for(let t of e){if(!r[t])continue;let e=r[t].files;s.push(...e)}}return 0===s.length?null:(0,r.jsx)(r.Fragment,{children:s.map(e=>{let s=`${t.assetPrefix}/_next/${(0,i.encodeURIPath)(e)}`;return e.endsWith(".css")?(0,r.jsx)("link",{precedence:"dynamic",href:s,rel:"stylesheet",as:"style",nonce:t.nonce},e):((0,a.preload)(s,{as:"script",fetchPriority:"low",nonce:t.nonce}),null)})})}},869093,(e,t,s)=>{"use strict";Object.defineProperty(s,"__esModule",{value:!0}),Object.defineProperty(s,"default",{enumerable:!0,get:function(){return c}});let r=e.r(843476),a=e.r(271645),l=e.r(667585),i=e.r(652157);function n(e){return{default:e&&"default"in e?e.default:e}}let o={loader:()=>Promise.resolve(n(()=>null)),loading:null,ssr:!0},c=function(e){let t={...o,...e},s=(0,a.lazy)(()=>t.loader().then(n)),c=t.loading;function d(e){let n=c?(0,r.jsx)(c,{isLoading:!0,pastDelay:!0,error:null}):null,o=!t.ssr||!!t.loading,d=o?a.Suspense:a.Fragment,u=t.ssr?(0,r.jsxs)(r.Fragment,{children:["undefined"==typeof window?(0,r.jsx)(i.PreloadChunks,{moduleIds:t.modules}):null,(0,r.jsx)(s,{...e})]}):(0,r.jsx)(l.BailoutToCSR,{reason:"next/dynamic",children:(0,r.jsx)(s,{...e})});return(0,r.jsx)(d,{...o?{fallback:n}:{},children:u})}return d.displayName="LoadableComponent",d}},770703,(e,t,s)=>{"use strict";Object.defineProperty(s,"__esModule",{value:!0}),Object.defineProperty(s,"default",{enumerable:!0,get:function(){return a}});let r=e.r(555682)._(e.r(869093));function a(e,t){let s={};"function"==typeof e&&(s.loader=e);let a={...s,...t};return(0,r.default)({...a,modules:a.loadableGenerated?.modules})}("function"==typeof s.default||"object"==typeof s.default&&null!==s.default)&&void 0===s.default.__esModule&&(Object.defineProperty(s.default,"__esModule",{value:!0}),Object.assign(s.default,s),t.exports=s.default)},800463,e=>{"use strict";let t=(0,e.i(475254).default)("locate-fixed",[["line",{x1:"2",x2:"5",y1:"12",y2:"12",key:"bvdh0s"}],["line",{x1:"19",x2:"22",y1:"12",y2:"12",key:"1tbv5k"}],["line",{x1:"12",x2:"12",y1:"2",y2:"5",key:"11lu5j"}],["line",{x1:"12",x2:"12",y1:"19",y2:"22",key:"x3vr5v"}],["circle",{cx:"12",cy:"12",r:"7",key:"fim9np"}],["circle",{cx:"12",cy:"12",r:"3",key:"1v7zrd"}]]);e.s(["LocateFixed",()=>t],800463)},205345,e=>{"use strict";var t=e.i(843476),s=e.i(271645),r=e.i(846932),a=e.i(871689),l=e.i(247978),l=l,i=e.i(475254);let n=(0,i.default)("house",[["path",{d:"M15 21v-8a1 1 0 0 0-1-1h-4a1 1 0 0 0-1 1v8",key:"5wwlr5"}],["path",{d:"M3 10a2 2 0 0 1 .709-1.528l7-6a2 2 0 0 1 2.582 0l7 6A2 2 0 0 1 21 10v9a2 2 0 0 1-2 2H5a2 2 0 0 1-2-2z",key:"r6nss1"}]]);var o=e.i(531278),c=e.i(800463),d=e.i(343432),u=e.i(555436),x=e.i(715788),f=e.i(284614),m=e.i(581418),h=e.i(283086);let p=(0,i.default)("map",[["path",{d:"M14.106 5.553a2 2 0 0 0 1.788 0l3.659-1.83A1 1 0 0 1 21 4.619v12.764a1 1 0 0 1-.553.894l-4.553 2.277a2 2 0 0 1-1.788 0l-4.212-2.106a2 2 0 0 0-1.788 0l-3.659 1.83A1 1 0 0 1 3 19.381V6.618a1 1 0 0 1 .553-.894l4.553-2.277a2 2 0 0 1 1.788 0z",key:"169xi5"}],["path",{d:"M15 5.764v15",key:"1pn4in"}],["path",{d:"M9 3.236v15",key:"1uimfh"}]]);var g=e.i(561659),b=e.i(618566),y=e.i(155487),j=e.i(705766),v=e.i(581949),w=e.i(770703),z=e.i(984834);let N=(0,w.default)(()=>e.A(913320),{loadableGenerated:{modules:[206695]},ssr:!1});e.s(["default",0,function(){let i=(0,b.useRouter)(),{userData:w}=(0,y.useSelector)(e=>e.user),{subTotal:k,deliveryFee:C,finalTotal:P,cartData:S}=(0,y.useSelector)(e=>e.cart),[_,A]=(0,s.useState)({fullName:"",mobile:"",city:"",state:"",pincode:"",fullAddress:""}),[M,O]=(0,s.useState)(!1),[L,T]=(0,s.useState)(""),[R,F]=(0,s.useState)(null),[H,E]=(0,s.useState)("cod"),[q,I]=(0,s.useState)(!1);(0,s.useEffect)(()=>{navigator.geolocation&&navigator.geolocation.getCurrentPosition(e=>{let{latitude:t,longitude:s}=e.coords;F([t,s])},e=>{console.log("location error",e)},{enableHighAccuracy:!0,maximumAge:0,timeout:1e4})},[]),(0,s.useEffect)(()=>{w&&A(e=>({...e,fullName:w?.name||"",mobile:w?.mobile||""}))},[w]);let B=async()=>{if(L){O(!0);try{let{OpenStreetMapProvider:t}=await e.A(591826),s=new t,r=await s.search({query:L});r&&r.length>0?(F([r[0].y,r[0].x]),j.default.success("Location found!")):j.default.error("Location not found")}catch(e){j.default.error("Search failed")}finally{O(!1)}}};(0,s.useEffect)(()=>{(async()=>{if(R)try{let e=await v.default.get(`https://nominatim.openstreetmap.org/reverse?lat=${R[0]}&lon=${R[1]}&format=json`);A(t=>({...t,city:e.data.address.city||e.data.address.town||e.data.address.village,state:e.data.address.state,pincode:e.data.address.postcode,fullAddress:e.data.display_name}))}catch(e){console.error(e)}})()},[R]);let D=async()=>{if(!R)return j.default.error("Set delivery location first");if(!_.fullName||!_.mobile||!_.fullAddress)return j.default.error("Complete all fields");try{I(!0),await v.default.post("/api/user/order",{userId:w?._id,items:S.map(e=>({product:e._id,name:e.name,price:e.price,unit:e.unit,quantity:e.quantity,image:e.image})),totalAmount:P,address:{..._,latitude:R[0],longitude:R[1]},paymentMethod:H}),j.default.success("Order placed successfully!"),i.push("/user/order-success")}catch(e){j.default.error("Failed to place order")}finally{I(!1)}},U=async()=>{if(!R)return j.default.error("Set delivery location first");if(!_.fullName||!_.mobile||!_.fullAddress)return j.default.error("Complete all fields");try{I(!0);let e=await v.default.post("/api/user/payment",{userId:w?._id,items:S.map(e=>({product:e._id,name:e.name,price:e.price,unit:e.unit,quantity:e.quantity,image:e.image})),totalAmount:P,address:{..._,latitude:R[0],longitude:R[1]},paymentMethod:H});j.default.success("Redirecting to Stripe..."),window.location.href=e.data.url}catch(e){j.default.error("Payment initialization failed"),I(!1)}};return(0,t.jsxs)("div",{className:"min-h-screen bg-zinc-50 pb-24 pt-12",children:[(0,t.jsx)(z.default,{user:w}),(0,t.jsxs)("div",{className:"w-[95%] sm:w-[90%] md:w-[85%] mx-auto relative pt-24",children:[(0,t.jsxs)(r.motion.button,{whileTap:{scale:.95},className:"inline-flex items-center gap-2 text-zinc-500 hover:text-green-600 font-bold transition-all group mb-12",onClick:()=>i.push("/user/cart"),children:[(0,t.jsx)("div",{className:"w-8 h-8 rounded-full bg-white border border-zinc-200 flex items-center justify-center group-hover:border-green-600 transition-colors",children:(0,t.jsx)(a.ArrowLeft,{size:16})}),(0,t.jsx)("span",{className:"text-sm uppercase tracking-widest",children:"Back to Cart"})]}),(0,t.jsxs)("div",{className:"mb-12",children:[(0,t.jsxs)("div",{className:"flex items-center gap-2 text-green-600 font-bold uppercase tracking-[0.2em] text-[10px] mb-2",children:[(0,t.jsx)(m.ShieldCheck,{size:14}),(0,t.jsx)("span",{children:"Highly Secure Checkout"})]}),(0,t.jsx)("h1",{className:"text-4xl md:text-5xl font-black text-zinc-900 tracking-tight",children:"Confirm Order"})]}),(0,t.jsxs)("div",{className:"grid grid-cols-1 lg:grid-cols-5 gap-12",children:[(0,t.jsx)("div",{className:"lg:col-span-3 space-y-8",children:(0,t.jsxs)(r.motion.div,{initial:{opacity:0,y:20},animate:{opacity:1,y:0},className:"bg-white rounded-[3rem] shadow-2xl shadow-zinc-900/5 p-8 md:p-10 border border-zinc-100",children:[(0,t.jsxs)("div",{className:"flex items-center gap-4 mb-8",children:[(0,t.jsx)("div",{className:"w-12 h-12 bg-green-50 rounded-2xl flex items-center justify-center text-green-600",children:(0,t.jsx)(p,{size:24})}),(0,t.jsxs)("div",{children:[(0,t.jsx)("h2",{className:"text-2xl font-black text-zinc-900 tracking-tight",children:"Delivery Details"}),(0,t.jsx)("p",{className:"text-zinc-500 text-sm font-medium",children:"Where should we deliver your millets?"})]})]}),(0,t.jsxs)("div",{className:"space-y-4",children:[(0,t.jsxs)("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4",children:[(0,t.jsxs)("div",{className:"relative group",children:[(0,t.jsx)(f.User,{className:"absolute left-4 top-1/2 -translate-y-1/2 text-zinc-400 group-focus-within:text-green-500 transition-colors",size:18}),(0,t.jsx)("input",{type:"text",placeholder:"Full Name",value:_.fullName,onChange:e=>A(t=>({...t,fullName:e.target.value})),className:"w-full bg-zinc-50 border border-zinc-200 rounded-2xl py-4 pl-12 pr-4 text-zinc-800 placeholder:text-zinc-400 focus:bg-white focus:ring-2 focus:ring-green-500/10 focus:border-green-500 focus:outline-none transition-all font-medium text-sm"})]}),(0,t.jsxs)("div",{className:"relative group",children:[(0,t.jsx)(d.Phone,{className:"absolute left-4 top-1/2 -translate-y-1/2 text-zinc-400 group-focus-within:text-green-500 transition-colors",size:18}),(0,t.jsx)("input",{type:"text",placeholder:"Mobile Number",value:_.mobile,onChange:e=>A(t=>({...t,mobile:e.target.value})),className:"w-full bg-zinc-50 border border-zinc-200 rounded-2xl py-4 pl-12 pr-4 text-zinc-800 placeholder:text-zinc-400 focus:bg-white focus:ring-2 focus:ring-green-500/10 focus:border-green-500 focus:outline-none transition-all font-medium text-sm"})]})]}),(0,t.jsxs)("div",{className:"relative group",children:[(0,t.jsx)(n,{className:"absolute left-4 top-1/2 -translate-y-1/2 text-zinc-400 group-focus-within:text-green-500 transition-colors",size:18}),(0,t.jsx)("input",{type:"text",placeholder:"Full Detailed Address",value:_.fullAddress,onChange:e=>A(t=>({...t,fullAddress:e.target.value})),className:"w-full bg-zinc-50 border border-zinc-200 rounded-2xl py-4 pl-12 pr-4 text-zinc-800 placeholder:text-zinc-400 focus:bg-white focus:ring-2 focus:ring-green-500/10 focus:border-green-500 focus:outline-none transition-all font-medium text-sm"})]}),(0,t.jsxs)("div",{className:"grid grid-cols-3 gap-4",children:[(0,t.jsx)("input",{type:"text",value:_.city,placeholder:"City",onChange:e=>A(t=>({...t,city:e.target.value})),className:"bg-zinc-50 border border-zinc-200 rounded-2xl py-4 px-6 text-zinc-800 focus:bg-white focus:border-green-500 focus:outline-none transition-all font-medium text-sm"}),(0,t.jsx)("input",{type:"text",value:_.state,placeholder:"State",onChange:e=>A(t=>({...t,state:e.target.value})),className:"bg-zinc-50 border border-zinc-200 rounded-2xl py-4 px-6 text-zinc-800 focus:bg-white focus:border-green-500 focus:outline-none transition-all font-medium text-sm"}),(0,t.jsx)("input",{type:"text",value:_.pincode,placeholder:"Pincode",onChange:e=>A(t=>({...t,pincode:e.target.value})),className:"bg-zinc-50 border border-zinc-200 rounded-2xl py-4 px-6 text-zinc-800 focus:bg-white focus:border-green-500 focus:outline-none transition-all font-medium text-sm"})]}),(0,t.jsxs)("div",{className:"flex gap-2 mt-8",children:[(0,t.jsxs)("div",{className:"relative flex-1 group",children:[(0,t.jsx)(u.Search,{className:"absolute left-4 top-1/2 -translate-y-1/2 text-zinc-400 group-focus-within:text-green-500 transition-colors",size:18}),(0,t.jsx)("input",{type:"text",placeholder:"Search your location...",className:"w-full bg-zinc-50 border border-zinc-200 rounded-2xl py-4 pl-12 pr-4 text-zinc-800 focus:bg-white focus:border-green-500 focus:outline-none transition-all font-medium text-sm",value:L,onChange:e=>T(e.target.value)})]}),(0,t.jsx)(r.motion.button,{whileTap:{scale:.95},className:"bg-zinc-900 text-white px-8 rounded-2xl font-bold shadow-xl shadow-zinc-900/10 hover:bg-green-600 transition-all flex items-center justify-center",onClick:B,children:M?(0,t.jsx)(o.Loader2,{size:18,className:"animate-spin"}):"Locate"})]}),(0,t.jsxs)("div",{className:"relative mt-6 h-[400px] rounded-[2.5rem] overflow-hidden border border-zinc-200 shadow-inner group",children:[R&&(0,t.jsx)(N,{position:R,setPosition:F}),(0,t.jsx)(r.motion.button,{whileHover:{scale:1.1},whileTap:{scale:.9},className:"absolute bottom-6 right-6 bg-green-600 text-white shadow-2xl rounded-2xl p-4 hover:bg-green-700 transition-all flex items-center justify-center z-10",onClick:()=>{navigator.geolocation&&navigator.geolocation.getCurrentPosition(e=>{F([e.coords.latitude,e.coords.longitude]),j.default.success("Location updated!")})},children:(0,t.jsx)(c.LocateFixed,{size:24})})]})]})]})}),(0,t.jsx)("div",{className:"lg:col-span-2 space-y-8",children:(0,t.jsxs)(r.motion.div,{initial:{opacity:0,x:20},animate:{opacity:1,x:0},className:"bg-white rounded-[3rem] shadow-2xl shadow-zinc-900/5 p-8 border border-zinc-100",children:[(0,t.jsxs)("div",{className:"flex items-center gap-4 mb-8",children:[(0,t.jsx)("div",{className:"w-12 h-12 bg-blue-50 rounded-2xl flex items-center justify-center text-blue-600",children:(0,t.jsx)(g.CreditCard,{size:24})}),(0,t.jsxs)("div",{children:[(0,t.jsx)("h2",{className:"text-2xl font-black text-zinc-900 tracking-tight",children:"Payment Hub"}),(0,t.jsx)("p",{className:"text-zinc-500 text-sm font-medium",children:"Choose your preferred settlement method."})]})]}),(0,t.jsxs)("div",{className:"space-y-4 mb-10",children:[(0,t.jsxs)("button",{onClick:()=>E("online"),className:`flex items-center justify-between w-full border-2 rounded-[1.5rem] p-6 transition-all ${"online"===H?"border-green-600 bg-green-50 shadow-lg shadow-green-900/5":"border-zinc-50 hover:bg-zinc-50"}`,children:[(0,t.jsxs)("div",{className:"flex items-center gap-4",children:[(0,t.jsx)(l.default,{className:"online"===H?"text-green-600":"text-zinc-400"}),(0,t.jsxs)("div",{className:"text-left",children:[(0,t.jsx)("div",{className:"font-black text-zinc-900 text-sm",children:"Online Payment"}),(0,t.jsx)("div",{className:"text-[10px] uppercase font-bold text-zinc-400",children:"Secure via Stripe"})]})]}),"online"===H&&(0,t.jsx)("div",{className:"w-4 h-4 bg-green-600 rounded-full border-4 border-white shadow-sm"})]}),(0,t.jsxs)("button",{onClick:()=>E("cod"),className:`flex items-center justify-between w-full border-2 rounded-[1.5rem] p-6 transition-all ${"cod"===H?"border-green-600 bg-green-50 shadow-lg shadow-green-900/5":"border-zinc-50 hover:bg-zinc-50"}`,children:[(0,t.jsxs)("div",{className:"flex items-center gap-4",children:[(0,t.jsx)(x.Truck,{className:"cod"===H?"text-green-600":"text-zinc-400"}),(0,t.jsxs)("div",{className:"text-left",children:[(0,t.jsx)("div",{className:"font-black text-zinc-900 text-sm",children:"Cash on Delivery"}),(0,t.jsx)("div",{className:"text-[10px] uppercase font-bold text-zinc-400",children:"Pay at your doorstep"})]})]}),"cod"===H&&(0,t.jsx)("div",{className:"w-4 h-4 bg-green-600 rounded-full border-4 border-white shadow-sm"})]})]}),(0,t.jsxs)("div",{className:"bg-zinc-50 p-8 rounded-[2rem] space-y-4 border border-zinc-100",children:[(0,t.jsxs)("div",{className:"flex justify-between items-center text-zinc-500",children:[(0,t.jsx)("span",{className:"font-bold text-xs uppercase tracking-widest",children:"Subtotal"}),(0,t.jsxs)("span",{className:"font-black text-zinc-900",children:["₹",k]})]}),(0,t.jsxs)("div",{className:"flex justify-between items-center text-zinc-500",children:[(0,t.jsx)("span",{className:"font-bold text-xs uppercase tracking-widest",children:"Logistic Fee"}),(0,t.jsxs)("span",{className:"font-black text-zinc-900",children:["₹",C]})]}),(0,t.jsxs)("div",{className:"flex justify-between items-center border-t border-zinc-200 pt-6",children:[(0,t.jsx)("span",{className:"font-black text-zinc-900 text-lg",children:"Order Total"}),(0,t.jsxs)("span",{className:"text-3xl font-black text-green-600 tracking-tighter",children:["₹",P]})]})]}),(0,t.jsx)(r.motion.button,{whileHover:{scale:1.02},whileTap:{scale:.98},disabled:q,className:"w-full mt-10 bg-green-600 text-white py-6 rounded-2xl font-black uppercase tracking-widest text-sm shadow-xl shadow-green-900/20 disabled:opacity-50 transition-all flex items-center justify-center gap-3 hover:bg-green-700",onClick:()=>"cod"===H?D():U(),children:q?(0,t.jsx)(o.Loader2,{className:"animate-spin",size:20}):(0,t.jsxs)(t.Fragment,{children:[(0,t.jsx)("span",{children:"cod"===H?"Place Order":"Initiate Payment"}),(0,t.jsx)(h.Sparkles,{size:18})]})})]})})]})]})]})}],205345)},913320,e=>{e.v(t=>Promise.all(["static/chunks/92775ae1698e5da0.css","static/chunks/4819619ad6ee702d.js","static/chunks/fd8fc318063aa163.js"].map(t=>e.l(t))).then(()=>t(206695)))},591826,e=>{e.v(t=>Promise.all(["static/chunks/2ed968b5cca2e420.js","static/chunks/fd8fc318063aa163.js"].map(t=>e.l(t))).then(()=>t(71030)))}]);