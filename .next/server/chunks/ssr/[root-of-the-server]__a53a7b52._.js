module.exports=[400210,a=>{"use strict";let b=(0,a.i(170106).default)("arrow-left",[["path",{d:"m12 19-7-7 7-7",key:"1l729n"}],["path",{d:"M19 12H5",key:"x3x0zl"}]]);a.s(["ArrowLeft",()=>b],400210)},405784,a=>{"use strict";let b=(0,a.i(170106).default)("chevron-down",[["path",{d:"m6 9 6 6 6-6",key:"qrunsl"}]]);a.s(["ChevronDown",()=>b],405784)},970047,a=>{"use strict";let b=(0,a.i(170106).default)("leaf",[["path",{d:"M11 20A7 7 0 0 1 9.8 6.1C15.5 5 17 4.48 19 2c1 2 2 4.18 2 8 0 5.5-4.78 10-10 10Z",key:"nnexq3"}],["path",{d:"M2 21c0-3 1.85-5.36 5.08-6C9.5 14.52 12 13 13 12",key:"mt58a7"}]]);a.s(["Leaf",()=>b],970047)},724669,a=>{"use strict";let b=(0,a.i(170106).default)("trending-up",[["path",{d:"M16 7h6v6",key:"box55l"}],["path",{d:"m22 7-8.5 8.5-5-5L2 17",key:"1t1m79"}]]);a.s(["TrendingUp",()=>b],724669)},883497,a=>{"use strict";let b=(0,a.i(170106).default)("package",[["path",{d:"M11 21.73a2 2 0 0 0 2 0l7-4A2 2 0 0 0 21 16V8a2 2 0 0 0-1-1.73l-7-4a2 2 0 0 0-2 0l-7 4A2 2 0 0 0 3 8v8a2 2 0 0 0 1 1.73z",key:"1a0edw"}],["path",{d:"M12 22V12",key:"d0xqtd"}],["polyline",{points:"3.29 7 12 12 20.71 7",key:"ousv84"}],["path",{d:"m7.5 4.27 9 5.15",key:"1c824w"}]]);a.s(["Package",()=>b],883497)},587532,a=>{"use strict";let b=(0,a.i(170106).default)("search",[["path",{d:"m21 21-4.34-4.34",key:"14j7rj"}],["circle",{cx:"11",cy:"11",r:"8",key:"4ej97u"}]]);a.s(["Search",()=>b],587532)},738783,(a,b,c)=>{"use strict";b.exports=a.r(342602).vendored["react-ssr"].ReactServerDOMTurbopackClient},808591,(a,b,c)=>{"use strict";Object.defineProperty(c,"__esModule",{value:!0}),Object.defineProperty(c,"useMergedRef",{enumerable:!0,get:function(){return e}});let d=a.r(572131);function e(a,b){let c=(0,d.useRef)(null),e=(0,d.useRef)(null);return(0,d.useCallback)(d=>{if(null===d){let a=c.current;a&&(c.current=null,a());let b=e.current;b&&(e.current=null,b())}else a&&(c.current=f(a,d)),b&&(e.current=f(b,d))},[a,b])}function f(a,b){if("function"!=typeof a)return a.current=b,()=>{a.current=null};{let c=a(b);return"function"==typeof c?c:()=>a(null)}}("function"==typeof c.default||"object"==typeof c.default&&null!==c.default)&&void 0===c.default.__esModule&&(Object.defineProperty(c.default,"__esModule",{value:!0}),Object.assign(c.default,c),b.exports=c.default)},192434,(a,b,c)=>{"use strict";Object.defineProperty(c,"__esModule",{value:!0}),Object.defineProperty(c,"warnOnce",{enumerable:!0,get:function(){return d}});let d=a=>{}},159564,a=>{"use strict";let b=(0,a.i(170106).default)("circle-plus",[["circle",{cx:"12",cy:"12",r:"10",key:"1mglay"}],["path",{d:"M8 12h8",key:"1wcyev"}],["path",{d:"M12 8v8",key:"napkw2"}]]);a.s(["PlusCircle",()=>b],159564)},233405,(a,b,c)=>{b.exports=a.x("child_process",()=>require("child_process"))},504446,(a,b,c)=>{b.exports=a.x("net",()=>require("net"))},755004,(a,b,c)=>{b.exports=a.x("tls",()=>require("tls"))},666523,a=>{"use strict";let b=(0,a.i(170106).default)("sparkle",[["path",{d:"M11.017 2.814a1 1 0 0 1 1.966 0l1.051 5.558a2 2 0 0 0 1.594 1.594l5.558 1.051a1 1 0 0 1 0 1.966l-5.558 1.051a2 2 0 0 0-1.594 1.594l-1.051 5.558a1 1 0 0 1-1.966 0l-1.051-5.558a2 2 0 0 0-1.594-1.594l-5.558-1.051a1 1 0 0 1 0-1.966l5.558-1.051a2 2 0 0 0 1.594-1.594z",key:"1s2grr"}]]);a.s(["Sparkle",()=>b],666523)},132245,(a,b,c)=>{"use strict";Object.defineProperty(c,"__esModule",{value:!0}),Object.defineProperty(c,"BailoutToCSR",{enumerable:!0,get:function(){return e}});let d=a.r(441997);function e({reason:a,children:b}){throw Object.defineProperty(new d.BailoutToCSRError(a),"__NEXT_ERROR_CODE",{value:"E394",enumerable:!1,configurable:!0})}},307773,(a,b,c)=>{"use strict";function d(a){return a.split("/").map(a=>encodeURIComponent(a)).join("/")}Object.defineProperty(c,"__esModule",{value:!0}),Object.defineProperty(c,"encodeURIPath",{enumerable:!0,get:function(){return d}})},297458,(a,b,c)=>{"use strict";Object.defineProperty(c,"__esModule",{value:!0}),Object.defineProperty(c,"PreloadChunks",{enumerable:!0,get:function(){return h}});let d=a.r(187924),e=a.r(935112),f=a.r(556704),g=a.r(307773);function h({moduleIds:a}){let b=f.workAsyncStorage.getStore();if(void 0===b)return null;let c=[];if(b.reactLoadableManifest&&a){let d=b.reactLoadableManifest;for(let b of a){if(!d[b])continue;let a=d[b].files;c.push(...a)}}return 0===c.length?null:(0,d.jsx)(d.Fragment,{children:c.map(a=>{let c=`${b.assetPrefix}/_next/${(0,g.encodeURIPath)(a)}`;return a.endsWith(".css")?(0,d.jsx)("link",{precedence:"dynamic",href:c,rel:"stylesheet",as:"style",nonce:b.nonce},a):((0,e.preload)(c,{as:"script",fetchPriority:"low",nonce:b.nonce}),null)})})}},969853,(a,b,c)=>{"use strict";Object.defineProperty(c,"__esModule",{value:!0}),Object.defineProperty(c,"default",{enumerable:!0,get:function(){return j}});let d=a.r(187924),e=a.r(572131),f=a.r(132245),g=a.r(297458);function h(a){return{default:a&&"default"in a?a.default:a}}let i={loader:()=>Promise.resolve(h(()=>null)),loading:null,ssr:!0},j=function(a){let b={...i,...a},c=(0,e.lazy)(()=>b.loader().then(h)),j=b.loading;function k(a){let h=j?(0,d.jsx)(j,{isLoading:!0,pastDelay:!0,error:null}):null,i=!b.ssr||!!b.loading,k=i?e.Suspense:e.Fragment,l=b.ssr?(0,d.jsxs)(d.Fragment,{children:[(0,d.jsx)(g.PreloadChunks,{moduleIds:b.modules}),(0,d.jsx)(c,{...a})]}):(0,d.jsx)(f.BailoutToCSR,{reason:"next/dynamic",children:(0,d.jsx)(c,{...a})});return(0,d.jsx)(k,{...i?{fallback:h}:{},children:l})}return k.displayName="LoadableComponent",k}},819721,(a,b,c)=>{"use strict";Object.defineProperty(c,"__esModule",{value:!0}),Object.defineProperty(c,"default",{enumerable:!0,get:function(){return e}});let d=a.r(833354)._(a.r(969853));function e(a,b){let c={};"function"==typeof a&&(c.loader=a);let e={...c,...b};return(0,d.default)({...e,modules:e.loadableGenerated?.modules})}("function"==typeof c.default||"object"==typeof c.default&&null!==c.default)&&void 0===c.default.__esModule&&(Object.defineProperty(c.default,"__esModule",{value:!0}),Object.assign(c.default,c),b.exports=c.default)},765089,a=>{"use strict";var b=a.i(187924),c=a.i(819721),d=a.i(212469),e=a.i(83490),f=a.i(400210),g=a.i(228193),h=a.i(692759),i=a.i(666523),j=a.i(88729),k=a.i(50944),l=a.i(262036),m=a.i(346271),n=a.i(572131),o=a.i(214174);let p=(0,c.default)(async()=>{},{loadableGenerated:{modules:[229112]},ssr:!1});a.s(["default",0,function({params:a}){let{userData:c}=(0,o.useSelector)(a=>a.user),{orderId:q}=(0,k.useParams)(),[r,s]=(0,n.useState)(),t=(0,k.useRouter)(),[u,v]=(0,n.useState)(""),[w,x]=(0,n.useState)(),y=(0,n.useRef)(null),[z,A]=(0,n.useState)(!1),[B,C]=(0,n.useState)([]),[D,E]=(0,n.useState)({latitude:0,longitude:0}),[F,G]=(0,n.useState)({latitude:0,longitude:0});(0,n.useEffect)(()=>{(async()=>{try{let a=await e.default.get(`/api/user/get-order/${q}`);s(a.data),E({latitude:a.data.address.latitude,longitude:a.data.address.longitude}),G({latitude:a.data.assignedDeliveryBoy.location.coordinates[1],longitude:a.data.assignedDeliveryBoy.location.coordinates[0]})}catch(a){console.log(a)}})()},[c?._id]),(0,n.useEffect)(()=>{let a=(0,d.getSocket)();return a.on("update-deliveryBoy-location",a=>{console.log("Delivery Boy Location Update:",a),G({latitude:a.location.coordinates?.[1]??a.location.latitude,longitude:a.location.coordinates?.[0]??a.location.longitude})}),()=>a.off("update-deliveryBoy-location")},[r]),(0,n.useEffect)(()=>{if(!q)return;let a=(0,d.getSocket)();return a.emit("join-room",q),a.on("send-message",a=>{a.roomId===q&&x(b=>[...b,a])}),()=>{a.off("send-message")}},[q]),(0,n.useEffect)(()=>{(async()=>{try{let a=await e.default.post("/api/chat/messages",{roomId:q});x(a.data)}catch(a){console.log(a)}})()},[]),(0,n.useEffect)(()=>{y.current?.scrollTo({top:y.current.scrollHeight,behavior:"smooth"})},[w]);let H=async()=>{A(!0);try{let a=w?.filter(a=>a.senderId.toString()!==c?._id)?.at(-1),b=await e.default.post("/api/chat/ai-suggestions",{message:a?.text,role:"user"});C(b.data),A(!1)}catch(a){console.log(a),A(!1)}};return(0,b.jsxs)("div",{className:"w-full min-h-screen bg-linear-to-b from-green-50 to-white",children:[(0,b.jsx)(j.default,{user:c}),(0,b.jsxs)("div",{className:"max-w-2xl mx-auto pb-24 pt-24",children:[(0,b.jsxs)("div",{className:"sticky top-0 bg-white/80 backdrop-blur-xl p-4 border-b shadow flex gap-3 items-center z-999",children:[(0,b.jsx)("button",{className:"p-2 bg-green-100 rounded-full",onClick:()=>t.back(),children:(0,b.jsx)(f.ArrowLeft,{className:"text-green-700",size:20})}),(0,b.jsxs)("div",{children:[(0,b.jsx)("h2",{className:"text-xl font-bold",children:"Track Order"}),(0,b.jsxs)("p",{className:"text-sm text-gray-600",children:["order#",r?._id?.toString().slice(-6)," ",(0,b.jsx)("span",{className:"text-green-700 font-semibold",children:r?.status})]})]})]}),(0,b.jsxs)("div",{className:"px-4 mt-6 space-y-4",children:[(0,b.jsx)("div",{className:"rounded-3xl overflow-hidden border shadow bg-white p-1",children:(0,b.jsx)(p,{userLocation:D,deliveryBoyLocation:F,children:r?.status==="out of delivery"&&r?.deliveryOtp&&(0,b.jsxs)(m.motion.div,{initial:{opacity:0,x:-20},animate:{opacity:1,x:0},className:"bg-green-50 rounded-2xl p-3 border border-green-100 flex items-center gap-4 shadow-sm",children:[(0,b.jsxs)("div",{className:"bg-white px-3 py-2 rounded-xl shadow-xs border border-green-100 text-center",children:[(0,b.jsx)("span",{className:"text-[9px] font-bold uppercase text-zinc-400 block leading-none mb-1",children:"PIN"}),(0,b.jsx)("span",{className:"text-lg font-black text-green-600 tracking-[0.2em] leading-none",children:r.deliveryOtp})]}),(0,b.jsxs)("div",{className:"hidden sm:block",children:[(0,b.jsx)("p",{className:"text-xs text-green-800 font-bold",children:"D-OTP Active"}),(0,b.jsx)("p",{className:"text-[10px] text-green-600 leading-tight",children:"Share with partner only during handover."})]})]})})}),(0,b.jsxs)("div",{className:"bg-white rounded-3xl shadow-lg border p-4 h-[430px] flex flex-col",children:[(0,b.jsxs)("div",{className:"flex justify-between items-center mb-3",children:[(0,b.jsx)("span",{className:"font-semibold text-gray-700 text-sm",children:"Quick Replies"}),(0,b.jsxs)(m.motion.button,{disabled:z,whileTap:{scale:.9},className:"px-3 py-1 text-xs flex items-center gap-1 bg-purple-100 text-purple-700 rounded-full shadow-sm border border-purple-200 cursor-pointer",onClick:H,children:[(0,b.jsx)(i.Sparkle,{size:14}),z?(0,b.jsx)(g.Loader,{className:"w-5 h-5 animate-spin"}):"AI suggest"]})]}),(0,b.jsx)("div",{className:"flex gap-2 flex-wrap mb-3",children:B.map((a,c)=>(0,b.jsx)(m.motion.div,{whileTap:{scale:.92},className:"px-3 py-1 text-xs bg-green-50 border border-green-200 cursor-pointer text-green-700 rounded-full",onClick:()=>v(a),children:a},a))}),(0,b.jsx)("div",{className:"flex-1 overflow-y-auto p-2 space-y-3",ref:y,children:(0,b.jsx)(l.AnimatePresence,{children:w?.map((a,d)=>(0,b.jsx)(m.motion.div,{initial:{opacity:0,y:15},animate:{opacity:1,y:0},exit:{opacity:0},transition:{duration:.2},className:`flex ${a.senderId.toString()==c?._id?"justify-end":"justify-start"}`,children:(0,b.jsxs)("div",{className:`px-4 py-2 max-w-[75%] rounded-2xl shadow 
                  ${a.senderId.toString()===c?._id?"bg-green-600 text-white rounded-br-none":"bg-gray-100 text-gray-800 rounded-bl-none"}`,children:[(0,b.jsx)("p",{children:a.text}),(0,b.jsx)("p",{className:"text-[10px] opacity-70 mt-1 text-right",children:a.time})]})},a._id?.toString()))})}),(0,b.jsxs)("div",{className:"flex gap-2 mt-3 border-t pt-3",children:[(0,b.jsx)("input",{type:"text",placeholder:"Type a Message...",className:"flex-1 bg-gray-100 px-4 py-2 rounded-xl outline-none focus:ring-2 focus:ring-green-500",value:u,onChange:a=>v(a.target.value)}),(0,b.jsx)("button",{className:"bg-green-600 hover:bg-green-700 p-3 rounded-xl text-white",onClick:()=>{let a=(0,d.getSocket)(),b={roomId:q,text:u,senderId:c?._id,time:new Date().toLocaleTimeString([],{hour:"2-digit",minute:"2-digit"})};a.emit("send-message",b),v("")},children:(0,b.jsx)(h.Send,{size:18})})]})]})]})]})]})}])}];

//# sourceMappingURL=%5Broot-of-the-server%5D__a53a7b52._.js.map