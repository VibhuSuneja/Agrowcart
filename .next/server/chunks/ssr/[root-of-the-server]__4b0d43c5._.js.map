{"version":3,"sources":["../../../../src/components/GeoUpdater.tsx/__nextjs-internal-proxy.mjs","../../../../src/components/UserDashboard.tsx/__nextjs-internal-proxy.mjs","../../../../src/app/marketplace/page.tsx"],"sourcesContent":["// This file is generated by next-core EcmascriptClientReferenceModule.\nimport { registerClientReference } from \"react-server-dom-turbopack/server\";\nexport default registerClientReference(\n    function() { throw new Error(\"Attempted to call the default export of [project]/src/components/GeoUpdater.tsx from the server, but it's on the client. It's not possible to invoke a client function from the server, it can only be rendered as a Component or passed to props of a Client Component.\"); },\n    \"[project]/src/components/GeoUpdater.tsx\",\n    \"default\",\n);\n","// This file is generated by next-core EcmascriptClientReferenceModule.\nimport { registerClientReference } from \"react-server-dom-turbopack/server\";\nexport default registerClientReference(\n    function() { throw new Error(\"Attempted to call the default export of [project]/src/components/UserDashboard.tsx from the server, but it's on the client. It's not possible to invoke a client function from the server, it can only be rendered as a Component or passed to props of a Client Component.\"); },\n    \"[project]/src/components/UserDashboard.tsx\",\n    \"default\",\n);\n","import { auth } from '@/auth'\r\nimport Footer from '@/components/Footer'\r\nimport GeoUpdater from '@/components/GeoUpdater'\r\nimport Nav from '@/components/Nav'\r\nimport UserDashboard from '@/components/UserDashboard'\r\nimport connectDb from '@/lib/db'\r\nimport Product, { IProduct } from '@/models/product.model'\r\nimport User from '@/models/user.model'\r\nimport { redirect } from 'next/navigation'\r\n\r\nexport default async function Marketplace(props: {\r\n    searchParams: Promise<{\r\n        q: string\r\n    }>\r\n}) {\r\n\r\n    const searchParams = await props.searchParams\r\n    await connectDb()\r\n    const session = await auth()\r\n    if (!session) redirect(\"/login\")\r\n\r\n    const user = await User.findById(session?.user?.id)\r\n    if (!user) redirect(\"/login\")\r\n\r\n    const plainUser = JSON.parse(JSON.stringify(user))\r\n\r\n    let productList: IProduct[] = []\r\n\r\n    if (searchParams.q) {\r\n        productList = await Product.find({\r\n            $or: [\r\n                { name: { $regex: searchParams?.q || \"\", $options: \"i\" } },\r\n                { category: { $regex: searchParams?.q || \"\", $options: \"i\" } },\r\n            ]\r\n        })\r\n    } else {\r\n        productList = await Product.find({})\r\n    }\r\n\r\n    return (\r\n        <>\r\n            <Nav user={plainUser} />\r\n            <GeoUpdater userId={plainUser._id} />\r\n            <UserDashboard productList={productList} />\r\n            <Footer />\r\n        </>\r\n    )\r\n}\r\n"],"names":[],"mappings":"wdAEe,CAAA,EAAA,AADf,EAAA,CAAA,CAAA,QACe,uBAAA,AAAuB,EAClC,WAAa,MAAM,AAAI,MAAM,+RAAiS,EAC9T,8DACA,+DAHW,CAAA,EADf,AACe,EADf,CAAA,CAAA,QACe,uBAAA,AAAuB,EAClC,WAAa,MAAM,AAAI,MAAM,2QAA6Q,EAC1S,0CACA,4HCHW,CAAA,EADf,AACe,EADf,CAAA,CAAA,QACe,uBAAA,AAAuB,EAClC,WAAa,MAAM,AAAI,MAAM,kSAAoS,EACjU,iEACA,+DAHW,CAAA,EADf,AACe,EADf,CAAA,CAAA,QACe,uBAAA,AAAuB,EAClC,WAAa,MAAM,AAAI,MAAM,8QAAgR,EAC7S,6CACA,yICLJ,EAAA,EAAA,CAAA,CAAA,QACA,EAAA,EAAA,CAAA,CAAA,QACA,EAAA,EAAA,CAAA,CAAA,QACA,EAAA,EAAA,CAAA,CAAA,QACA,EAAA,EAAA,CAAA,CAAA,QACA,EAAA,EAAA,CAAA,CAAA,QACA,EAAA,EAAA,CAAA,CAAA,QACA,EAAA,EAAA,CAAA,CAAA,QACA,EAAA,CAAA,CAAA,QAAA,IAAA,EAAA,EAAA,CAAA,CAAA,QAEe,eAAe,EAAY,CAIzC,EAEG,IAAM,EAAe,MAAM,EAAM,YAAY,AAC7C,OAAM,CAAA,EAAA,EAAA,OAAA,AAAS,IACf,IAAM,EAAU,MAAM,CAAA,EAAA,EAAA,IAAA,AAAI,GACtB,CAAC,GAAS,CAAA,EAAA,EAAA,QAAA,AAAQ,EAAC,UAEvB,IAAM,EAAO,MAAM,EAAA,OAAI,CAAC,QAAQ,CAAC,GAAS,MAAM,GAC5C,CAAC,GAAM,CAAA,EAAA,EAAA,QAAA,AAAQ,EAAC,UAEpB,IAAM,EAAY,KAAK,KAAK,CAAC,KAAK,SAAS,CAAC,IAExC,EAA0B,EAAE,CAahC,OAVI,EADA,EAAa,CAAC,CACA,CADE,KACI,EAAA,OAAO,CAAC,IAAI,CAAC,CAC7B,IAAK,CACD,CAAE,KAAM,CAAE,OAAQ,GAAc,GAAK,GAAI,SAAU,GAAI,CAAE,EACzD,CAAE,SAAU,CAAE,OAAQ,GAAc,GAAK,GAAI,SAAU,GAAI,CAAE,EAChE,AACL,GAEc,MAAM,EAAA,OAAO,CAAC,IAAI,CAAC,CAAC,GAIlC,CAAA,EAAA,EAAA,IAAA,EAAA,EAAA,QAAA,CAAA,WACI,CAAA,EAAA,EAAA,GAAA,EAAC,EAAA,OAAG,CAAA,CAAC,KAAM,IACX,CAAA,EAAA,EAAA,GAAA,EAAC,EAAA,OAAU,CAAA,CAAC,OAAQ,EAAU,GAAG,GACjC,CAAA,EAAA,EAAA,GAAA,EAAC,EAAA,OAAa,CAAA,CAAC,YAAa,IAC5B,CAAA,EAAA,EAAA,GAAA,EAAC,EAAA,OAAM,CAAA,CAAA,KAGnB","ignoreList":[0,1]}