module.exports=[630032,a=>{"use strict";let b=(0,a.i(170106).default)("mic-off",[["path",{d:"M12 19v3",key:"npa21l"}],["path",{d:"M15 9.34V5a3 3 0 0 0-5.68-1.33",key:"1gzdoj"}],["path",{d:"M16.95 16.95A7 7 0 0 1 5 12v-2",key:"cqa7eg"}],["path",{d:"M18.89 13.23A7 7 0 0 0 19 12v-2",key:"16hl24"}],["path",{d:"m2 2 20 20",key:"1ooewy"}],["path",{d:"M9 9v3a3 3 0 0 0 5.12 2.12",key:"r2i35w"}]]);a.s(["MicOff",()=>b],630032)},949438,a=>{"use strict";let b=(0,a.i(170106).default)("phone-incoming",[["path",{d:"M16 2v6h6",key:"1mfrl5"}],["path",{d:"m22 2-6 6",key:"6f0sa0"}],["path",{d:"M13.832 16.568a1 1 0 0 0 1.213-.303l.355-.465A2 2 0 0 1 17 15h3a2 2 0 0 1 2 2v3a2 2 0 0 1-2 2A18 18 0 0 1 2 4a2 2 0 0 1 2-2h3a2 2 0 0 1 2 2v3a2 2 0 0 1-.8 1.6l-.468.351a1 1 0 0 0-.292 1.233 14 14 0 0 0 6.392 6.384",key:"9njp5v"}]]);a.s(["PhoneIncoming",()=>b],949438)},149409,(a,b,c)=>{b.exports=function(){if("undefined"==typeof globalThis)return null;var a={RTCPeerConnection:globalThis.RTCPeerConnection||globalThis.mozRTCPeerConnection||globalThis.webkitRTCPeerConnection,RTCSessionDescription:globalThis.RTCSessionDescription||globalThis.mozRTCSessionDescription||globalThis.webkitRTCSessionDescription,RTCIceCandidate:globalThis.RTCIceCandidate||globalThis.mozRTCIceCandidate||globalThis.webkitRTCIceCandidate};return a.RTCPeerConnection?a:null}},98326,(a,b,c)=>{b.exports=a.r(254799).randomBytes},146995,(a,b,c)=>{b.exports=a.r(688947)},82666,(a,b,c)=>{"use strict";function d(a,b){var c=Object.keys(a);if(Object.getOwnPropertySymbols){var d=Object.getOwnPropertySymbols(a);b&&(d=d.filter(function(b){return Object.getOwnPropertyDescriptor(a,b).enumerable})),c.push.apply(c,d)}return c}function e(a){for(var b=1;b<arguments.length;b++){var c=null!=arguments[b]?arguments[b]:{};b%2?d(Object(c),!0).forEach(function(b){var d,e,g;d=a,e=b,g=c[b],(e=f(e))in d?Object.defineProperty(d,e,{value:g,enumerable:!0,configurable:!0,writable:!0}):d[e]=g}):Object.getOwnPropertyDescriptors?Object.defineProperties(a,Object.getOwnPropertyDescriptors(c)):d(Object(c)).forEach(function(b){Object.defineProperty(a,b,Object.getOwnPropertyDescriptor(c,b))})}return a}function f(a){var b=function(a,b){if("object"!=typeof a||null===a)return a;var c=a[Symbol.toPrimitive];if(void 0!==c){var d=c.call(a,b||"default");if("object"!=typeof d)return d;throw TypeError("@@toPrimitive must return a primitive value.")}return("string"===b?String:Number)(a)}(a,"string");return"symbol"==typeof b?b:String(b)}var g=a.r(500874).Buffer,h=a.r(224361).inspect,i=h&&h.custom||"inspect";b.exports=function(){var a;function b(){if(!(this instanceof b))throw TypeError("Cannot call a class as a function");this.head=null,this.tail=null,this.length=0}return a=[{key:"push",value:function(a){var b={data:a,next:null};this.length>0?this.tail.next=b:this.head=b,this.tail=b,++this.length}},{key:"unshift",value:function(a){var b={data:a,next:this.head};0===this.length&&(this.tail=b),this.head=b,++this.length}},{key:"shift",value:function(){if(0!==this.length){var a=this.head.data;return 1===this.length?this.head=this.tail=null:this.head=this.head.next,--this.length,a}}},{key:"clear",value:function(){this.head=this.tail=null,this.length=0}},{key:"join",value:function(a){if(0===this.length)return"";for(var b=this.head,c=""+b.data;b=b.next;)c+=a+b.data;return c}},{key:"concat",value:function(a){if(0===this.length)return g.alloc(0);for(var b,c,d=g.allocUnsafe(a>>>0),e=this.head,f=0;e;)b=e.data,c=f,g.prototype.copy.call(b,d,c),f+=e.data.length,e=e.next;return d}},{key:"consume",value:function(a,b){var c;return a<this.head.data.length?(c=this.head.data.slice(0,a),this.head.data=this.head.data.slice(a)):c=a===this.head.data.length?this.shift():b?this._getString(a):this._getBuffer(a),c}},{key:"first",value:function(){return this.head.data}},{key:"_getString",value:function(a){var b=this.head,c=1,d=b.data;for(a-=d.length;b=b.next;){var e=b.data,f=a>e.length?e.length:a;if(f===e.length?d+=e:d+=e.slice(0,a),0==(a-=f)){f===e.length?(++c,b.next?this.head=b.next:this.head=this.tail=null):(this.head=b,b.data=e.slice(f));break}++c}return this.length-=c,d}},{key:"_getBuffer",value:function(a){var b=g.allocUnsafe(a),c=this.head,d=1;for(c.data.copy(b),a-=c.data.length;c=c.next;){var e=c.data,f=a>e.length?e.length:a;if(e.copy(b,b.length-a,0,f),0==(a-=f)){f===e.length?(++d,c.next?this.head=c.next:this.head=this.tail=null):(this.head=c,c.data=e.slice(f));break}++d}return this.length-=d,b}},{key:i,value:function(a,b){return h(this,e(e({},b),{},{depth:0,customInspect:!1}))}}],function(a,b){for(var c=0;c<b.length;c++){var d=b[c];d.enumerable=d.enumerable||!1,d.configurable=!0,"value"in d&&(d.writable=!0),Object.defineProperty(a,f(d.key),d)}}(b.prototype,a),Object.defineProperty(b,"prototype",{writable:!1}),b}()},906268,(a,b,c)=>{"use strict";function d(a,b){f(a,b),e(a)}function e(a){a._writableState&&!a._writableState.emitClose||(!a._readableState||a._readableState.emitClose)&&a.emit("close")}function f(a,b){a.emit("error",b)}b.exports={destroy:function(a,b){var c=this,g=this._readableState&&this._readableState.destroyed,h=this._writableState&&this._writableState.destroyed;return g||h?b?b(a):a&&(this._writableState?this._writableState.errorEmitted||(this._writableState.errorEmitted=!0,process.nextTick(f,this,a)):process.nextTick(f,this,a)):(this._readableState&&(this._readableState.destroyed=!0),this._writableState&&(this._writableState.destroyed=!0),this._destroy(a||null,function(a){!b&&a?c._writableState?c._writableState.errorEmitted?process.nextTick(e,c):(c._writableState.errorEmitted=!0,process.nextTick(d,c,a)):process.nextTick(d,c,a):b?(process.nextTick(e,c),b(a)):process.nextTick(e,c)})),this},undestroy:function(){this._readableState&&(this._readableState.destroyed=!1,this._readableState.reading=!1,this._readableState.ended=!1,this._readableState.endEmitted=!1),this._writableState&&(this._writableState.destroyed=!1,this._writableState.ended=!1,this._writableState.ending=!1,this._writableState.finalCalled=!1,this._writableState.prefinished=!1,this._writableState.finished=!1,this._writableState.errorEmitted=!1)},errorOrDestroy:function(a,b){var c=a._readableState,d=a._writableState;c&&c.autoDestroy||d&&d.autoDestroy?a.destroy(b):a.emit("error",b)}}},486609,(a,b,c)=>{"use strict";let d={};function e(a,b,c){c||(c=Error);class e extends c{constructor(a,c,d){super("string"==typeof b?b:b(a,c,d))}}e.prototype.name=c.name,e.prototype.code=a,d[a]=e}function f(a,b){if(!Array.isArray(a))return`of ${b} ${String(a)}`;{let c=a.length;return(a=a.map(a=>String(a)),c>2)?`one of ${b} ${a.slice(0,c-1).join(", ")}, or `+a[c-1]:2===c?`one of ${b} ${a[0]} or ${a[1]}`:`of ${b} ${a[0]}`}}e("ERR_INVALID_OPT_VALUE",function(a,b){return'The value "'+b+'" is invalid for option "'+a+'"'},TypeError),e("ERR_INVALID_ARG_TYPE",function(a,b,c){var d,e,g,h;let i,j;if("string"==typeof b&&(d="not ",b.substr(0,d.length)===d)?(i="must not be",b=b.replace(/^not /,"")):i="must be",e=" argument",(void 0===g||g>a.length)&&(g=a.length),a.substring(g-e.length,g)===e)j=`The ${a} ${i} ${f(b,"type")}`;else{let c=("number"!=typeof h&&(h=0),h+1>a.length||-1===a.indexOf(".",h))?"argument":"property";j=`The "${a}" ${c} ${i} ${f(b,"type")}`}return j+`. Received type ${typeof c}`},TypeError),e("ERR_STREAM_PUSH_AFTER_EOF","stream.push() after EOF"),e("ERR_METHOD_NOT_IMPLEMENTED",function(a){return"The "+a+" method is not implemented"}),e("ERR_STREAM_PREMATURE_CLOSE","Premature close"),e("ERR_STREAM_DESTROYED",function(a){return"Cannot call "+a+" after a stream was destroyed"}),e("ERR_MULTIPLE_CALLBACK","Callback called multiple times"),e("ERR_STREAM_CANNOT_PIPE","Cannot pipe, not readable"),e("ERR_STREAM_WRITE_AFTER_END","write after end"),e("ERR_STREAM_NULL_VALUES","May not write null values to stream",TypeError),e("ERR_UNKNOWN_ENCODING",function(a){return"Unknown encoding: "+a},TypeError),e("ERR_STREAM_UNSHIFT_AFTER_END_EVENT","stream.unshift() after end event"),b.exports.codes=d},168044,(a,b,c)=>{"use strict";var d=a.r(486609).codes.ERR_INVALID_OPT_VALUE;b.exports={getHighWaterMark:function(a,b,c,e){var f=null!=b.highWaterMark?b.highWaterMark:e?b[c]:null;if(null!=f){if(!(isFinite(f)&&Math.floor(f)===f)||f<0)throw new d(e?c:"highWaterMark",f);return Math.floor(f)}return a.objectMode?16:16384}}},507915,(a,b,c)=>{"function"==typeof Object.create?b.exports=function(a,b){b&&(a.super_=b,a.prototype=Object.create(b.prototype,{constructor:{value:a,enumerable:!1,writable:!0,configurable:!0}}))}:b.exports=function(a,b){if(b){a.super_=b;var c=function(){};c.prototype=b.prototype,a.prototype=new c,a.prototype.constructor=a}}},518919,(a,b,c)=>{try{var d=a.r(224361);if("function"!=typeof d.inherits)throw"";b.exports=d.inherits}catch(c){b.exports=a.r(507915)}},183557,(a,b,c)=>{b.exports=a.r(224361).deprecate},420676,(a,b,c)=>{"use strict";function d(a){var b=this;this.next=null,this.entry=null,this.finish=function(){var c=b,d=a,e=c.entry;for(c.entry=null;e;){var f=e.callback;d.pendingcb--,f(void 0),e=e.next}d.corkedRequestsFree.next=c}}b.exports=y,y.WritableState=x;var e,f,g={deprecate:a.r(183557)},h=a.r(146995),i=a.r(500874).Buffer,j=a.g.Uint8Array||function(){},k=a.r(906268),l=a.r(168044).getHighWaterMark,m=a.r(486609).codes,n=m.ERR_INVALID_ARG_TYPE,o=m.ERR_METHOD_NOT_IMPLEMENTED,p=m.ERR_MULTIPLE_CALLBACK,q=m.ERR_STREAM_CANNOT_PIPE,r=m.ERR_STREAM_DESTROYED,s=m.ERR_STREAM_NULL_VALUES,t=m.ERR_STREAM_WRITE_AFTER_END,u=m.ERR_UNKNOWN_ENCODING,v=k.errorOrDestroy;function w(){}function x(b,c,f){e=e||a.r(971164),b=b||{},"boolean"!=typeof f&&(f=c instanceof e),this.objectMode=!!b.objectMode,f&&(this.objectMode=this.objectMode||!!b.writableObjectMode),this.highWaterMark=l(this,b,"writableHighWaterMark",f),this.finalCalled=!1,this.needDrain=!1,this.ending=!1,this.ended=!1,this.finished=!1,this.destroyed=!1;var g=!1===b.decodeStrings;this.decodeStrings=!g,this.defaultEncoding=b.defaultEncoding||"utf8",this.length=0,this.writing=!1,this.corked=0,this.sync=!0,this.bufferProcessing=!1,this.onwrite=function(a){!function(a,b){var c=a._writableState,d=c.sync,e=c.writecb;if("function"!=typeof e)throw new p;if(c.writing=!1,c.writecb=null,c.length-=c.writelen,c.writelen=0,b)--c.pendingcb,d?(process.nextTick(e,b),process.nextTick(E,a,c),a._writableState.errorEmitted=!0,v(a,b)):(e(b),a._writableState.errorEmitted=!0,v(a,b),E(a,c));else{var f=C(c)||a.destroyed;f||c.corked||c.bufferProcessing||!c.bufferedRequest||B(a,c),d?process.nextTick(A,a,c,f,e):A(a,c,f,e)}}(c,a)},this.writecb=null,this.writelen=0,this.bufferedRequest=null,this.lastBufferedRequest=null,this.pendingcb=0,this.prefinished=!1,this.errorEmitted=!1,this.emitClose=!1!==b.emitClose,this.autoDestroy=!!b.autoDestroy,this.bufferedRequestCount=0,this.corkedRequestsFree=new d(this)}a.r(518919)(y,h),x.prototype.getBuffer=function(){for(var a=this.bufferedRequest,b=[];a;)b.push(a),a=a.next;return b};try{Object.defineProperty(x.prototype,"buffer",{get:g.deprecate(function(){return this.getBuffer()},"_writableState.buffer is deprecated. Use _writableState.getBuffer instead.","DEP0003")})}catch(a){}function y(b){var c=this instanceof(e=e||a.r(971164));if(!c&&!f.call(y,this))return new y(b);this._writableState=new x(b,this,c),this.writable=!0,b&&("function"==typeof b.write&&(this._write=b.write),"function"==typeof b.writev&&(this._writev=b.writev),"function"==typeof b.destroy&&(this._destroy=b.destroy),"function"==typeof b.final&&(this._final=b.final)),h.call(this)}function z(a,b,c,d,e,f,g){b.writelen=d,b.writecb=g,b.writing=!0,b.sync=!0,b.destroyed?b.onwrite(new r("write")):c?a._writev(e,b.onwrite):a._write(e,f,b.onwrite),b.sync=!1}function A(a,b,c,d){var e,f;c||(e=a,0===(f=b).length&&f.needDrain&&(f.needDrain=!1,e.emit("drain"))),b.pendingcb--,d(),E(a,b)}function B(a,b){b.bufferProcessing=!0;var c=b.bufferedRequest;if(a._writev&&c&&c.next){var e=Array(b.bufferedRequestCount),f=b.corkedRequestsFree;f.entry=c;for(var g=0,h=!0;c;)e[g]=c,c.isBuf||(h=!1),c=c.next,g+=1;e.allBuffers=h,z(a,b,!0,b.length,e,"",f.finish),b.pendingcb++,b.lastBufferedRequest=null,f.next?(b.corkedRequestsFree=f.next,f.next=null):b.corkedRequestsFree=new d(b),b.bufferedRequestCount=0}else{for(;c;){var i=c.chunk,j=c.encoding,k=c.callback,l=b.objectMode?1:i.length;if(z(a,b,!1,l,i,j,k),c=c.next,b.bufferedRequestCount--,b.writing)break}null===c&&(b.lastBufferedRequest=null)}b.bufferedRequest=c,b.bufferProcessing=!1}function C(a){return a.ending&&0===a.length&&null===a.bufferedRequest&&!a.finished&&!a.writing}function D(a,b){a._final(function(c){b.pendingcb--,c&&v(a,c),b.prefinished=!0,a.emit("prefinish"),E(a,b)})}function E(a,b){var c=C(b);if(c&&(b.prefinished||b.finalCalled||("function"!=typeof a._final||b.destroyed?(b.prefinished=!0,a.emit("prefinish")):(b.pendingcb++,b.finalCalled=!0,process.nextTick(D,a,b))),0===b.pendingcb&&(b.finished=!0,a.emit("finish"),b.autoDestroy))){var d=a._readableState;(!d||d.autoDestroy&&d.endEmitted)&&a.destroy()}return c}"function"==typeof Symbol&&Symbol.hasInstance&&"function"==typeof Function.prototype[Symbol.hasInstance]?(f=Function.prototype[Symbol.hasInstance],Object.defineProperty(y,Symbol.hasInstance,{value:function(a){return!!f.call(this,a)||this===y&&a&&a._writableState instanceof x}})):f=function(a){return a instanceof this},y.prototype.pipe=function(){v(this,new q)},y.prototype.write=function(a,b,c){var d,e,f,g,h,k,l,m=this._writableState,o=!1,p=!m.objectMode&&(d=a,i.isBuffer(d)||d instanceof j);return(p&&!i.isBuffer(a)&&(e=a,a=i.from(e)),"function"==typeof b&&(c=b,b=null),p?b="buffer":b||(b=m.defaultEncoding),"function"!=typeof c&&(c=w),m.ending)?(f=c,v(this,g=new t),process.nextTick(f,g)):(p||(h=a,k=c,null===h?l=new s:"string"==typeof h||m.objectMode||(l=new n("chunk",["string","Buffer"],h)),!l||(v(this,l),process.nextTick(k,l),0)))&&(m.pendingcb++,o=function(a,b,c,d,e,f){if(!c){var g,h,j=(g=d,h=e,b.objectMode||!1===b.decodeStrings||"string"!=typeof g||(g=i.from(g,h)),g);d!==j&&(c=!0,e="buffer",d=j)}var k=b.objectMode?1:d.length;b.length+=k;var l=b.length<b.highWaterMark;if(l||(b.needDrain=!0),b.writing||b.corked){var m=b.lastBufferedRequest;b.lastBufferedRequest={chunk:d,encoding:e,isBuf:c,callback:f,next:null},m?m.next=b.lastBufferedRequest:b.bufferedRequest=b.lastBufferedRequest,b.bufferedRequestCount+=1}else z(a,b,!1,k,d,e,f);return l}(this,m,p,a,b,c)),o},y.prototype.cork=function(){this._writableState.corked++},y.prototype.uncork=function(){var a=this._writableState;a.corked&&(a.corked--,a.writing||a.corked||a.bufferProcessing||!a.bufferedRequest||B(this,a))},y.prototype.setDefaultEncoding=function(a){if("string"==typeof a&&(a=a.toLowerCase()),!(["hex","utf8","utf-8","ascii","binary","base64","ucs2","ucs-2","utf16le","utf-16le","raw"].indexOf((a+"").toLowerCase())>-1))throw new u(a);return this._writableState.defaultEncoding=a,this},Object.defineProperty(y.prototype,"writableBuffer",{enumerable:!1,get:function(){return this._writableState&&this._writableState.getBuffer()}}),Object.defineProperty(y.prototype,"writableHighWaterMark",{enumerable:!1,get:function(){return this._writableState.highWaterMark}}),y.prototype._write=function(a,b,c){c(new o("_write()"))},y.prototype._writev=null,y.prototype.end=function(a,b,c){var d,e,f,g=this._writableState;return"function"==typeof a?(c=a,a=null,b=null):"function"==typeof b&&(c=b,b=null),null!=a&&this.write(a,b),g.corked&&(g.corked=1,this.uncork()),g.ending||(d=this,e=g,f=c,e.ending=!0,E(d,e),f&&(e.finished?process.nextTick(f):d.once("finish",f)),e.ended=!0,d.writable=!1),this},Object.defineProperty(y.prototype,"writableLength",{enumerable:!1,get:function(){return this._writableState.length}}),Object.defineProperty(y.prototype,"destroyed",{enumerable:!1,get:function(){return void 0!==this._writableState&&this._writableState.destroyed},set:function(a){this._writableState&&(this._writableState.destroyed=a)}}),y.prototype.destroy=k.destroy,y.prototype._undestroy=k.undestroy,y.prototype._destroy=function(a,b){b(a)}},971164,(a,b,c)=>{"use strict";var d=Object.keys||function(a){var b=[];for(var c in a)b.push(c);return b};b.exports=j;var e=a.r(113597),f=a.r(420676);a.r(518919)(j,e);for(var g=d(f.prototype),h=0;h<g.length;h++){var i=g[h];j.prototype[i]||(j.prototype[i]=f.prototype[i])}function j(a){if(!(this instanceof j))return new j(a);e.call(this,a),f.call(this,a),this.allowHalfOpen=!0,a&&(!1===a.readable&&(this.readable=!1),!1===a.writable&&(this.writable=!1),!1===a.allowHalfOpen&&(this.allowHalfOpen=!1,this.once("end",k)))}function k(){this._writableState.ended||process.nextTick(l,this)}function l(a){a.end()}Object.defineProperty(j.prototype,"writableHighWaterMark",{enumerable:!1,get:function(){return this._writableState.highWaterMark}}),Object.defineProperty(j.prototype,"writableBuffer",{enumerable:!1,get:function(){return this._writableState&&this._writableState.getBuffer()}}),Object.defineProperty(j.prototype,"writableLength",{enumerable:!1,get:function(){return this._writableState.length}}),Object.defineProperty(j.prototype,"destroyed",{enumerable:!1,get:function(){return void 0!==this._readableState&&void 0!==this._writableState&&this._readableState.destroyed&&this._writableState.destroyed},set:function(a){void 0!==this._readableState&&void 0!==this._writableState&&(this._readableState.destroyed=a,this._writableState.destroyed=a)}})},674898,(a,b,c)=>{var d=a.r(500874),e=d.Buffer;function f(a,b){for(var c in a)b[c]=a[c]}function g(a,b,c){return e(a,b,c)}e.from&&e.alloc&&e.allocUnsafe&&e.allocUnsafeSlow?b.exports=d:(f(d,c),c.Buffer=g),g.prototype=Object.create(e.prototype),f(e,g),g.from=function(a,b,c){if("number"==typeof a)throw TypeError("Argument must not be a number");return e(a,b,c)},g.alloc=function(a,b,c){if("number"!=typeof a)throw TypeError("Argument must be a number");var d=e(a);return void 0!==b?"string"==typeof c?d.fill(b,c):d.fill(b):d.fill(0),d},g.allocUnsafe=function(a){if("number"!=typeof a)throw TypeError("Argument must be a number");return e(a)},g.allocUnsafeSlow=function(a){if("number"!=typeof a)throw TypeError("Argument must be a number");return d.SlowBuffer(a)}},105177,(a,b,c)=>{"use strict";var d=a.r(674898).Buffer,e=d.isEncoding||function(a){switch((a=""+a)&&a.toLowerCase()){case"hex":case"utf8":case"utf-8":case"ascii":case"binary":case"base64":case"ucs2":case"ucs-2":case"utf16le":case"utf-16le":case"raw":return!0;default:return!1}};function f(a){var b;switch(this.encoding=function(a){var b=function(a){var b;if(!a)return"utf8";for(;;)switch(a){case"utf8":case"utf-8":return"utf8";case"ucs2":case"ucs-2":case"utf16le":case"utf-16le":return"utf16le";case"latin1":case"binary":return"latin1";case"base64":case"ascii":case"hex":return a;default:if(b)return;a=(""+a).toLowerCase(),b=!0}}(a);if("string"!=typeof b&&(d.isEncoding===e||!e(a)))throw Error("Unknown encoding: "+a);return b||a}(a),this.encoding){case"utf16le":this.text=i,this.end=j,b=4;break;case"utf8":this.fillLast=h,b=4;break;case"base64":this.text=k,this.end=l,b=3;break;default:this.write=m,this.end=n;return}this.lastNeed=0,this.lastTotal=0,this.lastChar=d.allocUnsafe(b)}function g(a){return a<=127?0:a>>5==6?2:a>>4==14?3:a>>3==30?4:a>>6==2?-1:-2}function h(a){var b=this.lastTotal-this.lastNeed,c=function(a,b,c){if((192&b[0])!=128)return a.lastNeed=0,"�";if(a.lastNeed>1&&b.length>1){if((192&b[1])!=128)return a.lastNeed=1,"�";if(a.lastNeed>2&&b.length>2&&(192&b[2])!=128)return a.lastNeed=2,"�"}}(this,a,0);return void 0!==c?c:this.lastNeed<=a.length?(a.copy(this.lastChar,b,0,this.lastNeed),this.lastChar.toString(this.encoding,0,this.lastTotal)):void(a.copy(this.lastChar,b,0,a.length),this.lastNeed-=a.length)}function i(a,b){if((a.length-b)%2==0){var c=a.toString("utf16le",b);if(c){var d=c.charCodeAt(c.length-1);if(d>=55296&&d<=56319)return this.lastNeed=2,this.lastTotal=4,this.lastChar[0]=a[a.length-2],this.lastChar[1]=a[a.length-1],c.slice(0,-1)}return c}return this.lastNeed=1,this.lastTotal=2,this.lastChar[0]=a[a.length-1],a.toString("utf16le",b,a.length-1)}function j(a){var b=a&&a.length?this.write(a):"";if(this.lastNeed){var c=this.lastTotal-this.lastNeed;return b+this.lastChar.toString("utf16le",0,c)}return b}function k(a,b){var c=(a.length-b)%3;return 0===c?a.toString("base64",b):(this.lastNeed=3-c,this.lastTotal=3,1===c?this.lastChar[0]=a[a.length-1]:(this.lastChar[0]=a[a.length-2],this.lastChar[1]=a[a.length-1]),a.toString("base64",b,a.length-c))}function l(a){var b=a&&a.length?this.write(a):"";return this.lastNeed?b+this.lastChar.toString("base64",0,3-this.lastNeed):b}function m(a){return a.toString(this.encoding)}function n(a){return a&&a.length?this.write(a):""}c.StringDecoder=f,f.prototype.write=function(a){var b,c;if(0===a.length)return"";if(this.lastNeed){if(void 0===(b=this.fillLast(a)))return"";c=this.lastNeed,this.lastNeed=0}else c=0;return c<a.length?b?b+this.text(a,c):this.text(a,c):b||""},f.prototype.end=function(a){var b=a&&a.length?this.write(a):"";return this.lastNeed?b+"�":b},f.prototype.text=function(a,b){var c=function(a,b,c){var d=b.length-1;if(d<c)return 0;var e=g(b[d]);return e>=0?(e>0&&(a.lastNeed=e-1),e):--d<c||-2===e?0:(e=g(b[d]))>=0?(e>0&&(a.lastNeed=e-2),e):--d<c||-2===e?0:(e=g(b[d]))>=0?(e>0&&(2===e?e=0:a.lastNeed=e-3),e):0}(this,a,b);if(!this.lastNeed)return a.toString("utf8",b);this.lastTotal=c;var d=a.length-(c-this.lastNeed);return a.copy(this.lastChar,0,d),a.toString("utf8",b,d)},f.prototype.fillLast=function(a){if(this.lastNeed<=a.length)return a.copy(this.lastChar,this.lastTotal-this.lastNeed,0,this.lastNeed),this.lastChar.toString(this.encoding,0,this.lastTotal);a.copy(this.lastChar,this.lastTotal-this.lastNeed,0,a.length),this.lastNeed-=a.length}},942603,(a,b,c)=>{"use strict";var d=a.r(486609).codes.ERR_STREAM_PREMATURE_CLOSE;function e(){}b.exports=function a(b,c,f){if("function"==typeof c)return a(b,null,c);c||(c={}),g=f||e,h=!1,f=function(){if(!h){h=!0;for(var a=arguments.length,b=Array(a),c=0;c<a;c++)b[c]=arguments[c];g.apply(this,b)}};var g,h,i=c.readable||!1!==c.readable&&b.readable,j=c.writable||!1!==c.writable&&b.writable,k=function(){b.writable||m()},l=b._writableState&&b._writableState.finished,m=function(){j=!1,l=!0,i||f.call(b)},n=b._readableState&&b._readableState.endEmitted,o=function(){i=!1,n=!0,j||f.call(b)},p=function(a){f.call(b,a)},q=function(){var a;return i&&!n?(b._readableState&&b._readableState.ended||(a=new d),f.call(b,a)):j&&!l?(b._writableState&&b._writableState.ended||(a=new d),f.call(b,a)):void 0},r=function(){b.req.on("finish",m)};return b.setHeader&&"function"==typeof b.abort?(b.on("complete",m),b.on("abort",q),b.req?r():b.on("request",r)):j&&!b._writableState&&(b.on("end",k),b.on("close",k)),b.on("end",o),b.on("finish",m),!1!==c.error&&b.on("error",p),b.on("close",q),function(){b.removeListener("complete",m),b.removeListener("abort",q),b.removeListener("request",r),b.req&&b.req.removeListener("finish",m),b.removeListener("end",k),b.removeListener("close",k),b.removeListener("finish",m),b.removeListener("end",o),b.removeListener("error",p),b.removeListener("close",q)}}},605184,(a,b,c)=>{"use strict";function d(a,b,c){var d;return(b="symbol"==typeof(d=function(a,b){if("object"!=typeof a||null===a)return a;var c=a[Symbol.toPrimitive];if(void 0!==c){var d=c.call(a,b||"default");if("object"!=typeof d)return d;throw TypeError("@@toPrimitive must return a primitive value.")}return("string"===b?String:Number)(a)}(b,"string"))?d:String(d))in a?Object.defineProperty(a,b,{value:c,enumerable:!0,configurable:!0,writable:!0}):a[b]=c,a}var e,f=a.r(942603),g=Symbol("lastResolve"),h=Symbol("lastReject"),i=Symbol("error"),j=Symbol("ended"),k=Symbol("lastPromise"),l=Symbol("handlePromise"),m=Symbol("stream");function n(a,b){return{value:a,done:b}}function o(a){var b=a[g];if(null!==b){var c=a[m].read();null!==c&&(a[k]=null,a[g]=null,a[h]=null,b(n(c,!1)))}}function p(a){process.nextTick(o,a)}var q=Object.getPrototypeOf(function(){}),r=Object.setPrototypeOf((d(e={get stream(){return this[m]},next:function(){var a,b,c=this,d=this[i];if(null!==d)return Promise.reject(d);if(this[j])return Promise.resolve(n(void 0,!0));if(this[m].destroyed)return new Promise(function(a,b){process.nextTick(function(){c[i]?b(c[i]):a(n(void 0,!0))})});var e=this[k];if(e)b=new Promise((a=this,function(b,c){e.then(function(){a[j]?b(n(void 0,!0)):a[l](b,c)},c)}));else{var f=this[m].read();if(null!==f)return Promise.resolve(n(f,!1));b=new Promise(this[l])}return this[k]=b,b}},Symbol.asyncIterator,function(){return this}),d(e,"return",function(){var a=this;return new Promise(function(b,c){a[m].destroy(null,function(a){a?c(a):b(n(void 0,!0))})})}),e),q);b.exports=function(a){var b,c=Object.create(r,(d(b={},m,{value:a,writable:!0}),d(b,g,{value:null,writable:!0}),d(b,h,{value:null,writable:!0}),d(b,i,{value:null,writable:!0}),d(b,j,{value:a._readableState.endEmitted,writable:!0}),d(b,l,{value:function(a,b){var d=c[m].read();d?(c[k]=null,c[g]=null,c[h]=null,a(n(d,!1))):(c[g]=a,c[h]=b)},writable:!0}),b));return c[k]=null,f(a,function(a){if(a&&"ERR_STREAM_PREMATURE_CLOSE"!==a.code){var b=c[h];null!==b&&(c[k]=null,c[g]=null,c[h]=null,b(a)),c[i]=a;return}var d=c[g];null!==d&&(c[k]=null,c[g]=null,c[h]=null,d(n(void 0,!0))),c[j]=!0}),a.on("readable",p.bind(null,c)),c}},939916,(a,b,c)=>{"use strict";function d(a,b,c,d,e,f,g){try{var h=a[f](g),i=h.value}catch(a){c(a);return}h.done?b(i):Promise.resolve(i).then(d,e)}function e(a,b){var c=Object.keys(a);if(Object.getOwnPropertySymbols){var d=Object.getOwnPropertySymbols(a);b&&(d=d.filter(function(b){return Object.getOwnPropertyDescriptor(a,b).enumerable})),c.push.apply(c,d)}return c}var f=a.r(486609).codes.ERR_INVALID_ARG_TYPE;b.exports=function(a,b,c){if(b&&"function"==typeof b.next)g=b;else if(b&&b[Symbol.asyncIterator])g=b[Symbol.asyncIterator]();else if(b&&b[Symbol.iterator])g=b[Symbol.iterator]();else throw new f("iterable",["Iterable"],b);var g,h=new a(function(a){for(var b=1;b<arguments.length;b++){var c=null!=arguments[b]?arguments[b]:{};b%2?e(Object(c),!0).forEach(function(b){var d,e,f;d=a,e=b,f=c[b],(e=function(a){var b=function(a,b){if("object"!=typeof a||null===a)return a;var c=a[Symbol.toPrimitive];if(void 0!==c){var d=c.call(a,b||"default");if("object"!=typeof d)return d;throw TypeError("@@toPrimitive must return a primitive value.")}return("string"===b?String:Number)(a)}(a,"string");return"symbol"==typeof b?b:String(b)}(e))in d?Object.defineProperty(d,e,{value:f,enumerable:!0,configurable:!0,writable:!0}):d[e]=f}):Object.getOwnPropertyDescriptors?Object.defineProperties(a,Object.getOwnPropertyDescriptors(c)):e(Object(c)).forEach(function(b){Object.defineProperty(a,b,Object.getOwnPropertyDescriptor(c,b))})}return a}({objectMode:!0},c)),i=!1;function j(){return k.apply(this,arguments)}function k(){var a;return a=function*(){try{var a=yield g.next(),b=a.value;a.done?h.push(null):h.push((yield b))?j():i=!1}catch(a){h.destroy(a)}},(k=function(){var b=this,c=arguments;return new Promise(function(e,f){var g=a.apply(b,c);function h(a){d(g,e,f,h,i,"next",a)}function i(a){d(g,e,f,h,i,"throw",a)}h(void 0)})}).apply(this,arguments)}return h._read=function(){i||(i=!0,j())},h}},113597,(a,b,c)=>{"use strict";b.exports=y,y.ReadableState=x,a.r(427699).EventEmitter;var d,e,f,g,h,i=function(a,b){return a.listeners(b).length},j=a.r(146995),k=a.r(500874).Buffer,l=a.g.Uint8Array||function(){},m=a.r(224361);e=m&&m.debuglog?m.debuglog("stream"):function(){};var n=a.r(82666),o=a.r(906268),p=a.r(168044).getHighWaterMark,q=a.r(486609).codes,r=q.ERR_INVALID_ARG_TYPE,s=q.ERR_STREAM_PUSH_AFTER_EOF,t=q.ERR_METHOD_NOT_IMPLEMENTED,u=q.ERR_STREAM_UNSHIFT_AFTER_END_EVENT;a.r(518919)(y,j);var v=o.errorOrDestroy,w=["error","close","destroy","pause","resume"];function x(b,c,e){d=d||a.r(971164),b=b||{},"boolean"!=typeof e&&(e=c instanceof d),this.objectMode=!!b.objectMode,e&&(this.objectMode=this.objectMode||!!b.readableObjectMode),this.highWaterMark=p(this,b,"readableHighWaterMark",e),this.buffer=new n,this.length=0,this.pipes=null,this.pipesCount=0,this.flowing=null,this.ended=!1,this.endEmitted=!1,this.reading=!1,this.sync=!0,this.needReadable=!1,this.emittedReadable=!1,this.readableListening=!1,this.resumeScheduled=!1,this.paused=!0,this.emitClose=!1!==b.emitClose,this.autoDestroy=!!b.autoDestroy,this.destroyed=!1,this.defaultEncoding=b.defaultEncoding||"utf8",this.awaitDrain=0,this.readingMore=!1,this.decoder=null,this.encoding=null,b.encoding&&(f||(f=a.f({string_decoder:{id:()=>105177,module:()=>a.r(105177)},"string_decoder/":{id:()=>105177,module:()=>a.r(105177)}})("string_decoder/").StringDecoder),this.decoder=new f(b.encoding),this.encoding=b.encoding)}function y(b){if(d=d||a.r(971164),!(this instanceof y))return new y(b);var c=this instanceof d;this._readableState=new x(b,this,c),this.readable=!0,b&&("function"==typeof b.read&&(this._read=b.read),"function"==typeof b.destroy&&(this._destroy=b.destroy)),j.call(this)}function z(a,b,c,d,f){e("readableAddChunk",b);var g,h,i=a._readableState;if(null===b)i.reading=!1,function(a,b){if(e("onEofChunk"),!b.ended){if(b.decoder){var c=b.decoder.end();c&&c.length&&(b.buffer.push(c),b.length+=b.objectMode?1:c.length)}b.ended=!0,b.sync?C(a):(b.needReadable=!1,b.emittedReadable||(b.emittedReadable=!0,D(a)))}}(a,i);else if(f||(h=function(a,b){var c;return k.isBuffer(b)||b instanceof l||"string"==typeof b||void 0===b||a.objectMode||(c=new r("chunk",["string","Buffer","Uint8Array"],b)),c}(i,b)),h)v(a,h);else if(i.objectMode||b&&b.length>0)if("string"==typeof b||i.objectMode||Object.getPrototypeOf(b)===k.prototype||(g=b,b=k.from(g)),d)i.endEmitted?v(a,new u):A(a,i,b,!0);else if(i.ended)v(a,new s);else{if(i.destroyed)return!1;i.reading=!1,i.decoder&&!c?(b=i.decoder.write(b),i.objectMode||0!==b.length?A(a,i,b,!1):E(a,i)):A(a,i,b,!1)}else d||(i.reading=!1,E(a,i));return!i.ended&&(i.length<i.highWaterMark||0===i.length)}function A(a,b,c,d){b.flowing&&0===b.length&&!b.sync?(b.awaitDrain=0,a.emit("data",c)):(b.length+=b.objectMode?1:c.length,d?b.buffer.unshift(c):b.buffer.push(c),b.needReadable&&C(a)),E(a,b)}function B(a,b){var c;if(a<=0||0===b.length&&b.ended)return 0;if(b.objectMode)return 1;if(a!=a)if(b.flowing&&b.length)return b.buffer.head.data.length;else return b.length;return(a>b.highWaterMark&&((c=a)>=0x40000000?c=0x40000000:(c--,c|=c>>>1,c|=c>>>2,c|=c>>>4,c|=c>>>8,c|=c>>>16,c++),b.highWaterMark=c),a<=b.length)?a:b.ended?b.length:(b.needReadable=!0,0)}function C(a){var b=a._readableState;e("emitReadable",b.needReadable,b.emittedReadable),b.needReadable=!1,b.emittedReadable||(e("emitReadable",b.flowing),b.emittedReadable=!0,process.nextTick(D,a))}function D(a){var b=a._readableState;e("emitReadable_",b.destroyed,b.length,b.ended),!b.destroyed&&(b.length||b.ended)&&(a.emit("readable"),b.emittedReadable=!1),b.needReadable=!b.flowing&&!b.ended&&b.length<=b.highWaterMark,J(a)}function E(a,b){b.readingMore||(b.readingMore=!0,process.nextTick(F,a,b))}function F(a,b){for(;!b.reading&&!b.ended&&(b.length<b.highWaterMark||b.flowing&&0===b.length);){var c=b.length;if(e("maybeReadMore read 0"),a.read(0),c===b.length)break}b.readingMore=!1}function G(a){var b=a._readableState;b.readableListening=a.listenerCount("readable")>0,b.resumeScheduled&&!b.paused?b.flowing=!0:a.listenerCount("data")>0&&a.resume()}function H(a){e("readable nexttick read 0"),a.read(0)}function I(a,b){e("resume",b.reading),b.reading||a.read(0),b.resumeScheduled=!1,a.emit("resume"),J(a),b.flowing&&!b.reading&&a.read(0)}function J(a){var b=a._readableState;for(e("flow",b.flowing);b.flowing&&null!==a.read(););}function K(a,b){var c;return 0===b.length?null:(b.objectMode?c=b.buffer.shift():!a||a>=b.length?(c=b.decoder?b.buffer.join(""):1===b.buffer.length?b.buffer.first():b.buffer.concat(b.length),b.buffer.clear()):c=b.buffer.consume(a,b.decoder),c)}function L(a){var b=a._readableState;e("endReadable",b.endEmitted),b.endEmitted||(b.ended=!0,process.nextTick(M,b,a))}function M(a,b){if(e("endReadableNT",a.endEmitted,a.length),!a.endEmitted&&0===a.length&&(a.endEmitted=!0,b.readable=!1,b.emit("end"),a.autoDestroy)){var c=b._writableState;(!c||c.autoDestroy&&c.finished)&&b.destroy()}}function N(a,b){for(var c=0,d=a.length;c<d;c++)if(a[c]===b)return c;return -1}Object.defineProperty(y.prototype,"destroyed",{enumerable:!1,get:function(){return void 0!==this._readableState&&this._readableState.destroyed},set:function(a){this._readableState&&(this._readableState.destroyed=a)}}),y.prototype.destroy=o.destroy,y.prototype._undestroy=o.undestroy,y.prototype._destroy=function(a,b){b(a)},y.prototype.push=function(a,b){var c,d=this._readableState;return d.objectMode?c=!0:"string"==typeof a&&((b=b||d.defaultEncoding)!==d.encoding&&(a=k.from(a,b),b=""),c=!0),z(this,a,b,!1,c)},y.prototype.unshift=function(a){return z(this,a,null,!0,!1)},y.prototype.isPaused=function(){return!1===this._readableState.flowing},y.prototype.setEncoding=function(b){f||(f=a.f({string_decoder:{id:()=>105177,module:()=>a.r(105177)},"string_decoder/":{id:()=>105177,module:()=>a.r(105177)}})("string_decoder/").StringDecoder);var c=new f(b);this._readableState.decoder=c,this._readableState.encoding=this._readableState.decoder.encoding;for(var d=this._readableState.buffer.head,e="";null!==d;)e+=c.write(d.data),d=d.next;return this._readableState.buffer.clear(),""!==e&&this._readableState.buffer.push(e),this._readableState.length=e.length,this},y.prototype.read=function(a){e("read",a),a=parseInt(a,10);var b,c=this._readableState,d=a;if(0!==a&&(c.emittedReadable=!1),0===a&&c.needReadable&&((0!==c.highWaterMark?c.length>=c.highWaterMark:c.length>0)||c.ended))return e("read: emitReadable",c.length,c.ended),0===c.length&&c.ended?L(this):C(this),null;if(0===(a=B(a,c))&&c.ended)return 0===c.length&&L(this),null;var f=c.needReadable;return e("need readable",f),(0===c.length||c.length-a<c.highWaterMark)&&e("length less than watermark",f=!0),c.ended||c.reading?e("reading or ended",f=!1):f&&(e("do read"),c.reading=!0,c.sync=!0,0===c.length&&(c.needReadable=!0),this._read(c.highWaterMark),c.sync=!1,c.reading||(a=B(d,c))),null===(b=a>0?K(a,c):null)?(c.needReadable=c.length<=c.highWaterMark,a=0):(c.length-=a,c.awaitDrain=0),0===c.length&&(c.ended||(c.needReadable=!0),d!==a&&c.ended&&L(this)),null!==b&&this.emit("data",b),b},y.prototype._read=function(a){v(this,new t("_read()"))},y.prototype.pipe=function(a,b){var c,d=this,f=this._readableState;switch(f.pipesCount){case 0:f.pipes=a;break;case 1:f.pipes=[f.pipes,a];break;default:f.pipes.push(a)}f.pipesCount+=1,e("pipe count=%d opts=%j",f.pipesCount,b);var g=b&&!1===b.end||a===process.stdout||a===process.stderr?p:h;function h(){e("onend"),a.end()}f.endEmitted?process.nextTick(g):d.once("end",g),a.on("unpipe",function b(c,g){e("onunpipe"),c===d&&g&&!1===g.hasUnpiped&&(g.hasUnpiped=!0,e("cleanup"),a.removeListener("close",n),a.removeListener("finish",o),a.removeListener("drain",j),a.removeListener("error",m),a.removeListener("unpipe",b),d.removeListener("end",h),d.removeListener("end",p),d.removeListener("data",l),k=!0,f.awaitDrain&&(!a._writableState||a._writableState.needDrain)&&j())});var j=(c=d,function(){var a=c._readableState;e("pipeOnDrain",a.awaitDrain),a.awaitDrain&&a.awaitDrain--,0===a.awaitDrain&&i(c,"data")&&(a.flowing=!0,J(c))});a.on("drain",j);var k=!1;function l(b){e("ondata");var c=a.write(b);e("dest.write",c),!1===c&&((1===f.pipesCount&&f.pipes===a||f.pipesCount>1&&-1!==N(f.pipes,a))&&!k&&(e("false write response, pause",f.awaitDrain),f.awaitDrain++),d.pause())}function m(b){e("onerror",b),p(),a.removeListener("error",m),0===i(a,"error")&&v(a,b)}function n(){a.removeListener("finish",o),p()}function o(){e("onfinish"),a.removeListener("close",n),p()}function p(){e("unpipe"),d.unpipe(a)}return d.on("data",l),!function(a,b,c){if("function"==typeof a.prependListener)return a.prependListener(b,c);a._events&&a._events[b]?Array.isArray(a._events[b])?a._events[b].unshift(c):a._events[b]=[c,a._events[b]]:a.on(b,c)}(a,"error",m),a.once("close",n),a.once("finish",o),a.emit("pipe",d),f.flowing||(e("pipe resume"),d.resume()),a},y.prototype.unpipe=function(a){var b=this._readableState,c={hasUnpiped:!1};if(0===b.pipesCount)return this;if(1===b.pipesCount)return a&&a!==b.pipes||(a||(a=b.pipes),b.pipes=null,b.pipesCount=0,b.flowing=!1,a&&a.emit("unpipe",this,c)),this;if(!a){var d=b.pipes,e=b.pipesCount;b.pipes=null,b.pipesCount=0,b.flowing=!1;for(var f=0;f<e;f++)d[f].emit("unpipe",this,{hasUnpiped:!1});return this}var g=N(b.pipes,a);return -1===g||(b.pipes.splice(g,1),b.pipesCount-=1,1===b.pipesCount&&(b.pipes=b.pipes[0]),a.emit("unpipe",this,c)),this},y.prototype.on=function(a,b){var c=j.prototype.on.call(this,a,b),d=this._readableState;return"data"===a?(d.readableListening=this.listenerCount("readable")>0,!1!==d.flowing&&this.resume()):"readable"!==a||d.endEmitted||d.readableListening||(d.readableListening=d.needReadable=!0,d.flowing=!1,d.emittedReadable=!1,e("on readable",d.length,d.reading),d.length?C(this):d.reading||process.nextTick(H,this)),c},y.prototype.addListener=y.prototype.on,y.prototype.removeListener=function(a,b){var c=j.prototype.removeListener.call(this,a,b);return"readable"===a&&process.nextTick(G,this),c},y.prototype.removeAllListeners=function(a){var b=j.prototype.removeAllListeners.apply(this,arguments);return("readable"===a||void 0===a)&&process.nextTick(G,this),b},y.prototype.resume=function(){var a,b,c=this._readableState;return c.flowing||(e("resume"),c.flowing=!c.readableListening,a=this,(b=c).resumeScheduled||(b.resumeScheduled=!0,process.nextTick(I,a,b))),c.paused=!1,this},y.prototype.pause=function(){return e("call pause flowing=%j",this._readableState.flowing),!1!==this._readableState.flowing&&(e("pause"),this._readableState.flowing=!1,this.emit("pause")),this._readableState.paused=!0,this},y.prototype.wrap=function(a){var b=this,c=this._readableState,d=!1;for(var f in a.on("end",function(){if(e("wrapped end"),c.decoder&&!c.ended){var a=c.decoder.end();a&&a.length&&b.push(a)}b.push(null)}),a.on("data",function(f){e("wrapped data"),c.decoder&&(f=c.decoder.write(f)),c.objectMode&&null==f||(c.objectMode||f&&f.length)&&(b.push(f)||(d=!0,a.pause()))}),a)void 0===this[f]&&"function"==typeof a[f]&&(this[f]=function(b){return function(){return a[b].apply(a,arguments)}}(f));for(var g=0;g<w.length;g++)a.on(w[g],this.emit.bind(this,w[g]));return this._read=function(b){e("wrapped _read",b),d&&(d=!1,a.resume())},this},"function"==typeof Symbol&&(y.prototype[Symbol.asyncIterator]=function(){return void 0===g&&(g=a.r(605184)),g(this)}),Object.defineProperty(y.prototype,"readableHighWaterMark",{enumerable:!1,get:function(){return this._readableState.highWaterMark}}),Object.defineProperty(y.prototype,"readableBuffer",{enumerable:!1,get:function(){return this._readableState&&this._readableState.buffer}}),Object.defineProperty(y.prototype,"readableFlowing",{enumerable:!1,get:function(){return this._readableState.flowing},set:function(a){this._readableState&&(this._readableState.flowing=a)}}),y._fromList=K,Object.defineProperty(y.prototype,"readableLength",{enumerable:!1,get:function(){return this._readableState.length}}),"function"==typeof Symbol&&(y.from=function(b,c){return void 0===h&&(h=a.r(939916)),h(y,b,c)})},887073,(a,b,c)=>{"use strict";b.exports=k;var d=a.r(486609).codes,e=d.ERR_METHOD_NOT_IMPLEMENTED,f=d.ERR_MULTIPLE_CALLBACK,g=d.ERR_TRANSFORM_ALREADY_TRANSFORMING,h=d.ERR_TRANSFORM_WITH_LENGTH_0,i=a.r(971164);function j(a,b){var c=this._transformState;c.transforming=!1;var d=c.writecb;if(null===d)return this.emit("error",new f);c.writechunk=null,c.writecb=null,null!=b&&this.push(b),d(a);var e=this._readableState;e.reading=!1,(e.needReadable||e.length<e.highWaterMark)&&this._read(e.highWaterMark)}function k(a){if(!(this instanceof k))return new k(a);i.call(this,a),this._transformState={afterTransform:j.bind(this),needTransform:!1,transforming:!1,writecb:null,writechunk:null,writeencoding:null},this._readableState.needReadable=!0,this._readableState.sync=!1,a&&("function"==typeof a.transform&&(this._transform=a.transform),"function"==typeof a.flush&&(this._flush=a.flush)),this.on("prefinish",l)}function l(){var a=this;"function"!=typeof this._flush||this._readableState.destroyed?m(this,null,null):this._flush(function(b,c){m(a,b,c)})}function m(a,b,c){if(b)return a.emit("error",b);if(null!=c&&a.push(c),a._writableState.length)throw new h;if(a._transformState.transforming)throw new g;return a.push(null)}a.r(518919)(k,i),k.prototype.push=function(a,b){return this._transformState.needTransform=!1,i.prototype.push.call(this,a,b)},k.prototype._transform=function(a,b,c){c(new e("_transform()"))},k.prototype._write=function(a,b,c){var d=this._transformState;if(d.writecb=c,d.writechunk=a,d.writeencoding=b,!d.transforming){var e=this._readableState;(d.needTransform||e.needReadable||e.length<e.highWaterMark)&&this._read(e.highWaterMark)}},k.prototype._read=function(a){var b=this._transformState;null===b.writechunk||b.transforming?b.needTransform=!0:(b.transforming=!0,this._transform(b.writechunk,b.writeencoding,b.afterTransform))},k.prototype._destroy=function(a,b){i.prototype._destroy.call(this,a,function(a){b(a)})}},758888,(a,b,c)=>{"use strict";b.exports=e;var d=a.r(887073);function e(a){if(!(this instanceof e))return new e(a);d.call(this,a)}a.r(518919)(e,d),e.prototype._transform=function(a,b,c){c(null,a)}},9549,(a,b,c)=>{"use strict";var d,e=a.r(486609).codes,f=e.ERR_MISSING_ARGS,g=e.ERR_STREAM_DESTROYED;function h(a){if(a)throw a}function i(a){a()}function j(a,b){return a.pipe(b)}b.exports=function(){for(var b,c,e=arguments.length,k=Array(e),l=0;l<e;l++)k[l]=arguments[l];var m=(b=k).length&&"function"==typeof b[b.length-1]?b.pop():h;if(Array.isArray(k[0])&&(k=k[0]),k.length<2)throw new f("streams");var n=k.map(function(b,e){var f,h,j,l,o,p,q=e<k.length-1;return f=e>0,j=h=function(a){c||(c=a),a&&n.forEach(i),q||(n.forEach(i),m(c))},l=!1,h=function(){l||(l=!0,j.apply(void 0,arguments))},o=!1,b.on("close",function(){o=!0}),void 0===d&&(d=a.r(942603)),d(b,{readable:q,writable:f},function(a){if(a)return h(a);o=!0,h()}),p=!1,function(a){if(!o&&!p){if(p=!0,b.setHeader&&"function"==typeof b.abort)return b.abort();if("function"==typeof b.destroy)return b.destroy();h(a||new g("pipe"))}}});return k.reduce(j)}},413481,(a,b,c)=>{var d=a.r(688947);"disable"===process.env.READABLE_STREAM&&d?(b.exports=d.Readable,Object.assign(b.exports,d),b.exports.Stream=d):((c=b.exports=a.r(113597)).Stream=d||c,c.Readable=c,c.Writable=a.r(420676),c.Duplex=a.r(971164),c.Transform=a.r(887073),c.PassThrough=a.r(758888),c.finished=a.r(942603),c.pipeline=a.r(9549))},865998,(a,b,c)=>{let d;b.exports="function"==typeof queueMicrotask?queueMicrotask.bind(a.g):a=>(d||(d=Promise.resolve())).then(a).catch(a=>setTimeout(()=>{throw a},0))},245033,(a,b,c)=>{"use strict";function d(a,b){for(let c in b)Object.defineProperty(a,c,{value:b[c],enumerable:!0,configurable:!0});return a}b.exports=function(a,b,c){if(!a||"string"==typeof a)throw TypeError("Please pass an Error to err-code");c||(c={}),"object"==typeof b&&(c=b,b=""),b&&(c.code=b);try{return d(a,c)}catch(e){c.message=a.message,c.stack=a.stack;let b=function(){};return b.prototype=Object.create(Object.getPrototypeOf(a)),d(new b,c)}}},292173,(a,b,c)=>{let d=a.r(635290)("simple-peer"),e=a.r(149409),f=a.r(98326),g=a.r(413481),h=a.r(865998),i=a.r(245033),{Buffer:j}=a.r(500874);function k(a){return a.replace(/a=ice-options:trickle\s\n/g,"")}class l extends g.Duplex{constructor(a){if(super(a=Object.assign({allowHalfOpen:!1},a)),this._id=f(4).toString("hex").slice(0,7),this._debug("new peer %o",a),this.channelName=a.initiator?a.channelName||f(20).toString("hex"):null,this.initiator=a.initiator||!1,this.channelConfig=a.channelConfig||l.channelConfig,this.channelNegotiated=this.channelConfig.negotiated,this.config=Object.assign({},l.config,a.config),this.offerOptions=a.offerOptions||{},this.answerOptions=a.answerOptions||{},this.sdpTransform=a.sdpTransform||(a=>a),this.streams=a.streams||(a.stream?[a.stream]:[]),this.trickle=void 0===a.trickle||a.trickle,this.allowHalfTrickle=void 0!==a.allowHalfTrickle&&a.allowHalfTrickle,this.iceCompleteTimeout=a.iceCompleteTimeout||5e3,this.destroyed=!1,this.destroying=!1,this._connected=!1,this.remoteAddress=void 0,this.remoteFamily=void 0,this.remotePort=void 0,this.localAddress=void 0,this.localFamily=void 0,this.localPort=void 0,this._wrtc=a.wrtc&&"object"==typeof a.wrtc?a.wrtc:e(),!this._wrtc)throw i(Error("No WebRTC support: Specify `opts.wrtc` option in this environment"),"ERR_WEBRTC_SUPPORT");this._pcReady=!1,this._channelReady=!1,this._iceComplete=!1,this._iceCompleteTimer=null,this._channel=null,this._pendingCandidates=[],this._isNegotiating=!1,this._firstNegotiation=!0,this._batchedNegotiation=!1,this._queuedNegotiation=!1,this._sendersAwaitingStable=[],this._senderMap=new Map,this._closingInterval=null,this._remoteTracks=[],this._remoteStreams=[],this._chunk=null,this._cb=null,this._interval=null;try{this._pc=new this._wrtc.RTCPeerConnection(this.config)}catch(a){this.destroy(i(a,"ERR_PC_CONSTRUCTOR"));return}this._isReactNativeWebrtc="number"==typeof this._pc._peerConnectionId,this._pc.oniceconnectionstatechange=()=>{this._onIceStateChange()},this._pc.onicegatheringstatechange=()=>{this._onIceStateChange()},this._pc.onconnectionstatechange=()=>{this._onConnectionStateChange()},this._pc.onsignalingstatechange=()=>{this._onSignalingStateChange()},this._pc.onicecandidate=a=>{this._onIceCandidate(a)},"object"==typeof this._pc.peerIdentity&&this._pc.peerIdentity.catch(a=>{this.destroy(i(a,"ERR_PC_PEER_IDENTITY"))}),this.initiator||this.channelNegotiated?this._setupData({channel:this._pc.createDataChannel(this.channelName,this.channelConfig)}):this._pc.ondatachannel=a=>{this._setupData(a)},this.streams&&this.streams.forEach(a=>{this.addStream(a)}),this._pc.ontrack=a=>{this._onTrack(a)},this._debug("initial negotiation"),this._needsNegotiation(),this._onFinishBound=()=>{this._onFinish()},this.once("finish",this._onFinishBound)}get bufferSize(){return this._channel&&this._channel.bufferedAmount||0}get connected(){return this._connected&&"open"===this._channel.readyState}address(){return{port:this.localPort,family:this.localFamily,address:this.localAddress}}signal(a){if(!this.destroying){if(this.destroyed)throw i(Error("cannot signal after peer is destroyed"),"ERR_DESTROYED");if("string"==typeof a)try{a=JSON.parse(a)}catch(b){a={}}this._debug("signal()"),a.renegotiate&&this.initiator&&(this._debug("got request to renegotiate"),this._needsNegotiation()),a.transceiverRequest&&this.initiator&&(this._debug("got request for transceiver"),this.addTransceiver(a.transceiverRequest.kind,a.transceiverRequest.init)),a.candidate&&(this._pc.remoteDescription&&this._pc.remoteDescription.type?this._addIceCandidate(a.candidate):this._pendingCandidates.push(a.candidate)),a.sdp&&this._pc.setRemoteDescription(new this._wrtc.RTCSessionDescription(a)).then(()=>{this.destroyed||(this._pendingCandidates.forEach(a=>{this._addIceCandidate(a)}),this._pendingCandidates=[],"offer"===this._pc.remoteDescription.type&&this._createAnswer())}).catch(a=>{this.destroy(i(a,"ERR_SET_REMOTE_DESCRIPTION"))}),a.sdp||a.candidate||a.renegotiate||a.transceiverRequest||this.destroy(i(Error("signal() called with invalid signal data"),"ERR_SIGNALING"))}}_addIceCandidate(a){let b=new this._wrtc.RTCIceCandidate(a);this._pc.addIceCandidate(b).catch(a=>{!b.address||b.address.endsWith(".local")?console.warn("Ignoring unsupported ICE candidate."):this.destroy(i(a,"ERR_ADD_ICE_CANDIDATE"))})}send(a){if(!this.destroying){if(this.destroyed)throw i(Error("cannot send after peer is destroyed"),"ERR_DESTROYED");this._channel.send(a)}}addTransceiver(a,b){if(!this.destroying){if(this.destroyed)throw i(Error("cannot addTransceiver after peer is destroyed"),"ERR_DESTROYED");if(this._debug("addTransceiver()"),this.initiator)try{this._pc.addTransceiver(a,b),this._needsNegotiation()}catch(a){this.destroy(i(a,"ERR_ADD_TRANSCEIVER"))}else this.emit("signal",{type:"transceiverRequest",transceiverRequest:{kind:a,init:b}})}}addStream(a){if(!this.destroying){if(this.destroyed)throw i(Error("cannot addStream after peer is destroyed"),"ERR_DESTROYED");this._debug("addStream()"),a.getTracks().forEach(b=>{this.addTrack(b,a)})}}addTrack(a,b){if(this.destroying)return;if(this.destroyed)throw i(Error("cannot addTrack after peer is destroyed"),"ERR_DESTROYED");this._debug("addTrack()");let c=this._senderMap.get(a)||new Map,d=c.get(b);if(d)if(d.removed)throw i(Error("Track has been removed. You should enable/disable tracks that you want to re-add."),"ERR_SENDER_REMOVED");else throw i(Error("Track has already been added to that stream."),"ERR_SENDER_ALREADY_ADDED");d=this._pc.addTrack(a,b),c.set(b,d),this._senderMap.set(a,c),this._needsNegotiation()}replaceTrack(a,b,c){if(this.destroying)return;if(this.destroyed)throw i(Error("cannot replaceTrack after peer is destroyed"),"ERR_DESTROYED");this._debug("replaceTrack()");let d=this._senderMap.get(a),e=d?d.get(c):null;if(!e)throw i(Error("Cannot replace track that was never added."),"ERR_TRACK_NOT_ADDED");b&&this._senderMap.set(b,d),null!=e.replaceTrack?e.replaceTrack(b):this.destroy(i(Error("replaceTrack is not supported in this browser"),"ERR_UNSUPPORTED_REPLACETRACK"))}removeTrack(a,b){if(this.destroying)return;if(this.destroyed)throw i(Error("cannot removeTrack after peer is destroyed"),"ERR_DESTROYED");this._debug("removeSender()");let c=this._senderMap.get(a),d=c?c.get(b):null;if(!d)throw i(Error("Cannot remove track that was never added."),"ERR_TRACK_NOT_ADDED");try{d.removed=!0,this._pc.removeTrack(d)}catch(a){"NS_ERROR_UNEXPECTED"===a.name?this._sendersAwaitingStable.push(d):this.destroy(i(a,"ERR_REMOVE_TRACK"))}this._needsNegotiation()}removeStream(a){if(!this.destroying){if(this.destroyed)throw i(Error("cannot removeStream after peer is destroyed"),"ERR_DESTROYED");this._debug("removeSenders()"),a.getTracks().forEach(b=>{this.removeTrack(b,a)})}}_needsNegotiation(){this._debug("_needsNegotiation"),this._batchedNegotiation||(this._batchedNegotiation=!0,h(()=>{this._batchedNegotiation=!1,this.initiator||!this._firstNegotiation?(this._debug("starting batched negotiation"),this.negotiate()):this._debug("non-initiator initial negotiation request discarded"),this._firstNegotiation=!1}))}negotiate(){if(!this.destroying){if(this.destroyed)throw i(Error("cannot negotiate after peer is destroyed"),"ERR_DESTROYED");this.initiator?this._isNegotiating?(this._queuedNegotiation=!0,this._debug("already negotiating, queueing")):(this._debug("start negotiation"),setTimeout(()=>{this._createOffer()},0)):this._isNegotiating?(this._queuedNegotiation=!0,this._debug("already negotiating, queueing")):(this._debug("requesting negotiation from initiator"),this.emit("signal",{type:"renegotiate",renegotiate:!0})),this._isNegotiating=!0}}destroy(a){this._destroy(a,()=>{})}_destroy(a,b){this.destroyed||this.destroying||(this.destroying=!0,this._debug("destroying (error: %s)",a&&(a.message||a)),h(()=>{if(this.destroyed=!0,this.destroying=!1,this._debug("destroy (error: %s)",a&&(a.message||a)),this.readable=this.writable=!1,this._readableState.ended||this.push(null),this._writableState.finished||this.end(),this._connected=!1,this._pcReady=!1,this._channelReady=!1,this._remoteTracks=null,this._remoteStreams=null,this._senderMap=null,clearInterval(this._closingInterval),this._closingInterval=null,clearInterval(this._interval),this._interval=null,this._chunk=null,this._cb=null,this._onFinishBound&&this.removeListener("finish",this._onFinishBound),this._onFinishBound=null,this._channel){try{this._channel.close()}catch(a){}this._channel.onmessage=null,this._channel.onopen=null,this._channel.onclose=null,this._channel.onerror=null}if(this._pc){try{this._pc.close()}catch(a){}this._pc.oniceconnectionstatechange=null,this._pc.onicegatheringstatechange=null,this._pc.onsignalingstatechange=null,this._pc.onicecandidate=null,this._pc.ontrack=null,this._pc.ondatachannel=null}this._pc=null,this._channel=null,a&&this.emit("error",a),this.emit("close"),b()}))}_setupData(a){if(!a.channel)return this.destroy(i(Error("Data channel event is missing `channel` property"),"ERR_DATA_CHANNEL"));this._channel=a.channel,this._channel.binaryType="arraybuffer","number"==typeof this._channel.bufferedAmountLowThreshold&&(this._channel.bufferedAmountLowThreshold=65536),this.channelName=this._channel.label,this._channel.onmessage=a=>{this._onChannelMessage(a)},this._channel.onbufferedamountlow=()=>{this._onChannelBufferedAmountLow()},this._channel.onopen=()=>{this._onChannelOpen()},this._channel.onclose=()=>{this._onChannelClose()},this._channel.onerror=a=>{let b=a.error instanceof Error?a.error:Error(`Datachannel error: ${a.message} ${a.filename}:${a.lineno}:${a.colno}`);this.destroy(i(b,"ERR_DATA_CHANNEL"))};let b=!1;this._closingInterval=setInterval(()=>{this._channel&&"closing"===this._channel.readyState?(b&&this._onChannelClose(),b=!0):b=!1},5e3)}_read(){}_write(a,b,c){if(this.destroyed)return c(i(Error("cannot write after peer is destroyed"),"ERR_DATA_CHANNEL"));if(this._connected){try{this.send(a)}catch(a){return this.destroy(i(a,"ERR_DATA_CHANNEL"))}this._channel.bufferedAmount>65536?(this._debug("start backpressure: bufferedAmount %d",this._channel.bufferedAmount),this._cb=c):c(null)}else this._debug("write before connect"),this._chunk=a,this._cb=c}_onFinish(){if(this.destroyed)return;let a=()=>{setTimeout(()=>this.destroy(),1e3)};this._connected?a():this.once("connect",a)}_startIceCompleteTimeout(){this.destroyed||this._iceCompleteTimer||(this._debug("started iceComplete timeout"),this._iceCompleteTimer=setTimeout(()=>{this._iceComplete||(this._iceComplete=!0,this._debug("iceComplete timeout completed"),this.emit("iceTimeout"),this.emit("_iceComplete"))},this.iceCompleteTimeout))}_createOffer(){this.destroyed||this._pc.createOffer(this.offerOptions).then(a=>{if(this.destroyed)return;this.trickle||this.allowHalfTrickle||(a.sdp=k(a.sdp)),a.sdp=this.sdpTransform(a.sdp);let b=()=>{if(this.destroyed)return;let b=this._pc.localDescription||a;this._debug("signal"),this.emit("signal",{type:b.type,sdp:b.sdp})},c=()=>{this._debug("createOffer success"),this.destroyed||(this.trickle||this._iceComplete?b():this.once("_iceComplete",b))},d=a=>{this.destroy(i(a,"ERR_SET_LOCAL_DESCRIPTION"))};this._pc.setLocalDescription(a).then(c).catch(d)}).catch(a=>{this.destroy(i(a,"ERR_CREATE_OFFER"))})}_requestMissingTransceivers(){this._pc.getTransceivers&&this._pc.getTransceivers().forEach(a=>{a.mid||!a.sender.track||a.requested||(a.requested=!0,this.addTransceiver(a.sender.track.kind))})}_createAnswer(){this.destroyed||this._pc.createAnswer(this.answerOptions).then(a=>{if(this.destroyed)return;this.trickle||this.allowHalfTrickle||(a.sdp=k(a.sdp)),a.sdp=this.sdpTransform(a.sdp);let b=()=>{if(this.destroyed)return;let b=this._pc.localDescription||a;this._debug("signal"),this.emit("signal",{type:b.type,sdp:b.sdp}),this.initiator||this._requestMissingTransceivers()},c=()=>{this.destroyed||(this.trickle||this._iceComplete?b():this.once("_iceComplete",b))},d=a=>{this.destroy(i(a,"ERR_SET_LOCAL_DESCRIPTION"))};this._pc.setLocalDescription(a).then(c).catch(d)}).catch(a=>{this.destroy(i(a,"ERR_CREATE_ANSWER"))})}_onConnectionStateChange(){this.destroyed||"failed"===this._pc.connectionState&&this.destroy(i(Error("Connection failed."),"ERR_CONNECTION_FAILURE"))}_onIceStateChange(){if(this.destroyed)return;let a=this._pc.iceConnectionState,b=this._pc.iceGatheringState;this._debug("iceStateChange (connection: %s) (gathering: %s)",a,b),this.emit("iceStateChange",a,b),("connected"===a||"completed"===a)&&(this._pcReady=!0,this._maybeReady()),"failed"===a&&this.destroy(i(Error("Ice connection failed."),"ERR_ICE_CONNECTION_FAILURE")),"closed"===a&&this.destroy(i(Error("Ice connection closed."),"ERR_ICE_CONNECTION_CLOSED"))}getStats(a){let b=a=>("[object Array]"===Object.prototype.toString.call(a.values)&&a.values.forEach(b=>{Object.assign(a,b)}),a);0===this._pc.getStats.length||this._isReactNativeWebrtc?this._pc.getStats().then(c=>{let d=[];c.forEach(a=>{d.push(b(a))}),a(null,d)},b=>a(b)):this._pc.getStats.length>0?this._pc.getStats(c=>{if(this.destroyed)return;let d=[];c.result().forEach(a=>{let c={};a.names().forEach(b=>{c[b]=a.stat(b)}),c.id=a.id,c.type=a.type,c.timestamp=a.timestamp,d.push(b(c))}),a(null,d)},b=>a(b)):a(null,[])}_maybeReady(){if(this._debug("maybeReady pc %s channel %s",this._pcReady,this._channelReady),this._connected||this._connecting||!this._pcReady||!this._channelReady)return;this._connecting=!0;let a=()=>{this.destroyed||this.getStats((b,c)=>{if(this.destroyed)return;b&&(c=[]);let d={},e={},f={},g=!1;c.forEach(a=>{("remotecandidate"===a.type||"remote-candidate"===a.type)&&(d[a.id]=a),("localcandidate"===a.type||"local-candidate"===a.type)&&(e[a.id]=a),("candidatepair"===a.type||"candidate-pair"===a.type)&&(f[a.id]=a)});let h=a=>{g=!0;let b=e[a.localCandidateId];b&&(b.ip||b.address)?(this.localAddress=b.ip||b.address,this.localPort=Number(b.port)):b&&b.ipAddress?(this.localAddress=b.ipAddress,this.localPort=Number(b.portNumber)):"string"==typeof a.googLocalAddress&&(b=a.googLocalAddress.split(":"),this.localAddress=b[0],this.localPort=Number(b[1])),this.localAddress&&(this.localFamily=this.localAddress.includes(":")?"IPv6":"IPv4");let c=d[a.remoteCandidateId];c&&(c.ip||c.address)?(this.remoteAddress=c.ip||c.address,this.remotePort=Number(c.port)):c&&c.ipAddress?(this.remoteAddress=c.ipAddress,this.remotePort=Number(c.portNumber)):"string"==typeof a.googRemoteAddress&&(c=a.googRemoteAddress.split(":"),this.remoteAddress=c[0],this.remotePort=Number(c[1])),this.remoteAddress&&(this.remoteFamily=this.remoteAddress.includes(":")?"IPv6":"IPv4"),this._debug("connect local: %s:%s remote: %s:%s",this.localAddress,this.localPort,this.remoteAddress,this.remotePort)};if(c.forEach(a=>{"transport"===a.type&&a.selectedCandidatePairId&&h(f[a.selectedCandidatePairId]),("googCandidatePair"===a.type&&"true"===a.googActiveConnection||("candidatepair"===a.type||"candidate-pair"===a.type)&&a.selected)&&h(a)}),!g&&(!Object.keys(f).length||Object.keys(e).length))return void setTimeout(a,100);if(this._connecting=!1,this._connected=!0,this._chunk){try{this.send(this._chunk)}catch(a){return this.destroy(i(a,"ERR_DATA_CHANNEL"))}this._chunk=null,this._debug('sent chunk from "write before connect"');let a=this._cb;this._cb=null,a(null)}"number"!=typeof this._channel.bufferedAmountLowThreshold&&(this._interval=setInterval(()=>this._onInterval(),150),this._interval.unref&&this._interval.unref()),this._debug("connect"),this.emit("connect")})};a()}_onInterval(){this._cb&&this._channel&&!(this._channel.bufferedAmount>65536)&&this._onChannelBufferedAmountLow()}_onSignalingStateChange(){this.destroyed||("stable"===this._pc.signalingState&&(this._isNegotiating=!1,this._debug("flushing sender queue",this._sendersAwaitingStable),this._sendersAwaitingStable.forEach(a=>{this._pc.removeTrack(a),this._queuedNegotiation=!0}),this._sendersAwaitingStable=[],this._queuedNegotiation?(this._debug("flushing negotiation queue"),this._queuedNegotiation=!1,this._needsNegotiation()):(this._debug("negotiated"),this.emit("negotiated"))),this._debug("signalingStateChange %s",this._pc.signalingState),this.emit("signalingStateChange",this._pc.signalingState))}_onIceCandidate(a){!this.destroyed&&(a.candidate&&this.trickle?this.emit("signal",{type:"candidate",candidate:{candidate:a.candidate.candidate,sdpMLineIndex:a.candidate.sdpMLineIndex,sdpMid:a.candidate.sdpMid}}):a.candidate||this._iceComplete||(this._iceComplete=!0,this.emit("_iceComplete")),a.candidate&&this._startIceCompleteTimeout())}_onChannelMessage(a){if(this.destroyed)return;let b=a.data;b instanceof ArrayBuffer&&(b=j.from(b)),this.push(b)}_onChannelBufferedAmountLow(){if(this.destroyed||!this._cb)return;this._debug("ending backpressure: bufferedAmount %d",this._channel.bufferedAmount);let a=this._cb;this._cb=null,a(null)}_onChannelOpen(){this._connected||this.destroyed||(this._debug("on channel open"),this._channelReady=!0,this._maybeReady())}_onChannelClose(){this.destroyed||(this._debug("on channel close"),this.destroy())}_onTrack(a){this.destroyed||a.streams.forEach(b=>{this._debug("on track"),this.emit("track",a.track,b),this._remoteTracks.push({track:a.track,stream:b}),this._remoteStreams.some(a=>a.id===b.id)||(this._remoteStreams.push(b),h(()=>{this._debug("on stream"),this.emit("stream",b)}))})}_debug(){let a=[].slice.call(arguments);a[0]="["+this._id+"] "+a[0],d.apply(null,a)}}l.WEBRTC_SUPPORT=!!e(),l.config={iceServers:[{urls:["stun:stun.l.google.com:19302","stun:global.stun.twilio.com:3478"]}],sdpSemantics:"unified-plan"},l.channelConfig={},b.exports=l},499657,a=>{"use strict";var b=a.i(187924),c=a.i(572131),d=a.i(346271),e=a.i(262036),f=a.i(692759),g=a.i(633508),h=a.i(563588),i=a.i(666523),j=a.i(46864),k=a.i(963519),l=a.i(949438),m=a.i(212469),n=a.i(83490),o=a.i(292173),p=a.i(104975),q=a.i(630032);let r=(0,a.i(170106).default)("phone-off",[["path",{d:"M10.1 13.9a14 14 0 0 0 3.732 2.668 1 1 0 0 0 1.213-.303l.355-.465A2 2 0 0 1 17 15h3a2 2 0 0 1 2 2v3a2 2 0 0 1-2 2 18 18 0 0 1-12.728-5.272",key:"1wngk7"}],["path",{d:"M22 2 2 22",key:"y4kqgn"}],["path",{d:"M4.76 13.582A18 18 0 0 1 2 4a2 2 0 0 1 2-2h3a2 2 0 0 1 2 2v3a2 2 0 0 1-.8 1.6l-.468.351a1 1 0 0 0-.292 1.233 14 14 0 0 0 .244.473",key:"10hv5p"}]]);var s=a.i(212439),t=a.i(406704);function u({roomId:a,userId:d,otherUserId:e,isInitiator:f,incomingSignal:g,onEnd:h}){let[i,j]=(0,c.useState)(null),[l,n]=(0,c.useState)(!1),[u,v]=(0,c.useState)(!1),[w,x]=(0,c.useState)(f?"Calling...":"Connecting..."),[y,z]=(0,c.useState)(!1),A=(0,c.useRef)(null),B=(0,c.useRef)(null),C=(0,c.useRef)(null),D=(0,m.getSocket)();return(0,c.useEffect)(()=>{let b=!1;return(async()=>{try{console.log("VoiceCall: Requesting media access...");let c=await navigator.mediaDevices.getUserMedia({audio:{echoCancellation:!0,noiseSuppression:!0,autoGainControl:!0}});if(b)return void c.getTracks().forEach(a=>a.stop());console.log("VoiceCall: Media access granted"),j(c),A.current&&(A.current.srcObject=c);let i=new o.default({initiator:f,trickle:!1,stream:c,config:{iceServers:[{urls:"stun:stun.l.google.com:19302"},{urls:"stun:stun1.l.google.com:19302"}]}});i.on("signal",b=>{console.log("VoiceCall: Generated signal data",f?"Initiator":"Receiver"),f?D.emit("call-user",{userToCall:e,signalData:b,from:d,roomId:a}):D.emit("answer-call",{signal:b,to:e,from:d,roomId:a})}),i.on("stream",a=>{console.log("VoiceCall: Remote stream received"),z(!0),B.current&&(B.current.srcObject=a,B.current.play().catch(a=>{console.warn("Autoplay block",a),x("Click to Play Audio")}))}),i.on("connect",()=>{console.log("VoiceCall: Peer Connected"),x("Connected"),n(!0)}),i.on("error",a=>{console.error("VoiceCall: Peer Error:",a),x("Connection Failed")}),C.current=i,f?D.on("call-accepted",a=>{console.log("VoiceCall: Call Accepted signal received"),n(!0),i&&!i.destroyed&&i.signal(a)}):g&&(console.log("VoiceCall: Processing incoming signal"),i.signal(g)),D.on("end-call",()=>{console.log("VoiceCall: Call ended by remote"),h()})}catch(a){console.error("Media Error:",a),x("Check Microphone Permissions")}})(),()=>{b=!0,C.current&&C.current.destroy(),D.off("call-accepted"),D.off("end-call"),i?.getTracks().forEach(a=>a.stop())}},[]),(0,b.jsxs)("div",{className:"flex flex-col items-center justify-center p-8 bg-zinc-900 text-white rounded-[2rem] h-full w-full relative overflow-hidden",children:[(0,b.jsx)("div",{className:`absolute top-1/2 left-1/2 -translate-x-1/2 -translate-y-1/2 w-64 h-64 ${y?"bg-green-500/20":"bg-red-500/10"} rounded-full blur-[100px] animate-pulse`}),(0,b.jsxs)("div",{className:"relative z-10 text-center space-y-8 w-full",children:[(0,b.jsxs)("div",{className:"relative",children:[(0,b.jsx)("div",{className:"w-32 h-32 bg-zinc-800 rounded-full flex items-center justify-center mx-auto border-4 border-zinc-700 shadow-2xl",children:(0,b.jsx)(k.Phone,{size:48,className:y?"text-green-500":"text-zinc-500"})}),l&&(0,b.jsx)("div",{className:"absolute -bottom-2 -right-2 bg-green-500 p-3 rounded-full border-4 border-zinc-900 shadow-xl",children:(0,b.jsx)(s.Volume2,{size:20,className:"text-white animate-bounce"})})]}),(0,b.jsxs)("div",{className:"space-y-1",children:[(0,b.jsx)("h3",{className:"text-2xl font-black",children:w}),(0,b.jsx)("p",{className:"text-[10px] text-zinc-400 font-bold uppercase tracking-widest",children:f?"Outgoing Negotiation Call":"Incoming Negotiation Call"})]}),"Click to Play Audio"===w&&(0,b.jsx)("button",{onClick:()=>B.current?.play(),className:"bg-green-600 px-6 py-2 rounded-xl font-bold text-xs",children:"Activate Audio"}),(0,b.jsx)("audio",{ref:A,autoPlay:!0,muted:!0,className:"hidden"}),(0,b.jsx)("audio",{ref:B,autoPlay:!0,className:"hidden"}),(0,b.jsxs)("div",{className:"flex items-center gap-4 justify-center pt-4",children:[(0,b.jsx)("button",{onClick:()=>{if(i){let a=i.getAudioTracks()[0];a&&(a.enabled=!a.enabled,v(!a.enabled),t.default.success(a.enabled?"Mic Active":"Mic Muted"))}},className:`p-5 rounded-2xl transition-all ${u?"bg-white text-zinc-900":"bg-zinc-800 text-zinc-400"}`,children:u?(0,b.jsx)(q.MicOff,{size:24}):(0,b.jsx)(p.Mic,{size:24})}),(0,b.jsx)("button",{onClick:()=>{D.emit("end-call",{roomId:a}),C.current&&C.current.destroy(),i?.getTracks().forEach(a=>a.stop()),h()},className:"p-5 bg-red-500 text-white rounded-2xl hover:bg-red-600 transition-all shadow-xl",children:(0,b.jsx)(r,{size:28})})]})]})]})}function v({productId:a,buyerId:o,farmerId:p,farmerName:q,buyerName:r="Buyer",currentUserRole:s="buyer",onClose:t,initialIncomingCall:v}){let w=("buyer"===s?o:p)?.toString(),[x,y]=(0,c.useState)([]),[z,A]=(0,c.useState)(""),[B,C]=(0,c.useState)(!1),[D,E]=(0,c.useState)([]),[F,G]=(0,c.useState)(!1),H=(0,c.useRef)(null),I="object"==typeof p?p.toString():String(p),J="object"==typeof o?o.toString():String(o),K=`negotiation:${I}:${J}`,[L,M]=(0,c.useState)(!1),[N,O]=(0,c.useState)(!1),[P,Q]=(0,c.useState)(null);(0,c.useEffect)(()=>{let a=(0,m.getSocket)();if(!a)return;function b(){console.log("Socket connected, joining room:",K),G(!0),a.emit("join-room",K)}a.connected?b():G(!1),a.on("connect",b),a.on("disconnect",function(){console.log("Socket disconnected"),G(!1)});let c=a=>{console.log("NegotiationChat: Message received via socket",a),a.roomId===K&&y(b=>b.some(b=>b._id&&a._id&&b._id===a._id||b.time===a.time&&b.text===a.text&&b.senderId===a.senderId)?b:[...b,a])},d=a=>{console.log("NegotiationChat: Call received",a),L||(O(!0),Q(a.signal))};return a.on("send-message",c),a.on("call-received",d),(async()=>{try{let a=await n.default.post("/api/chat/messages",{roomId:K});y(a.data)}catch(a){console.error("Error fetching messages",a)}})(),()=>{console.log("NegotiationChat: Cleaning up room listener",K),a.off("send-message",c),a.off("call-received",d)}},[K]),(0,c.useEffect)(()=>{H.current?.scrollTo({top:H.current.scrollHeight,behavior:"smooth"})},[x]);let R=async()=>{if(!z.trim())return;let a=(0,m.getSocket)(),b={roomId:K,text:z,senderId:w,time:new Date().toLocaleTimeString([],{hour:"2-digit",minute:"2-digit"})},c=Math.random().toString(36).substr(2,9),d={...b,_id:c};y(a=>[...a,d]),A("");try{a?.emit("send-message",b),await n.default.post("/api/chat/send",b)}catch(a){console.error("Failed to save message",a)}},S=async()=>{C(!0);try{let a=x.filter(a=>a.senderId?.toString()!==w).at(-1),b=await n.default.post("/api/chat/ai-suggestions",{message:a?.text||"Started a new negotiation for bulk ordering.",role:s});E(b.data)}catch(a){console.error("AI Suggestions error",a)}finally{C(!1)}};return(0,b.jsxs)(d.motion.div,{initial:{opacity:0},animate:{opacity:1},exit:{opacity:0},className:"fixed inset-0 z-[300] flex items-center justify-center p-0 md:p-4 bg-black/60 backdrop-blur-md",onClick:t,children:[(0,b.jsx)(e.AnimatePresence,{children:N&&!L&&(0,b.jsxs)(d.motion.div,{initial:{y:-100,opacity:0},animate:{y:0,opacity:1},exit:{y:-100,opacity:0},className:"absolute top-10 left-4 right-4 md:left-0 md:right-0 mx-auto w-auto max-w-sm md:w-80 bg-zinc-900 text-white p-4 rounded-3xl shadow-2xl z-[400] flex items-center justify-between border border-zinc-700",onClick:a=>a.stopPropagation(),children:[(0,b.jsxs)("div",{className:"flex items-center gap-3",children:[(0,b.jsx)("div",{className:"p-3 bg-green-500 rounded-full animate-bounce",children:(0,b.jsx)(l.PhoneIncoming,{size:20})}),(0,b.jsxs)("div",{children:[(0,b.jsx)("h4",{className:"font-bold text-sm",children:"Incoming Call..."}),(0,b.jsx)("p",{className:"text-[10px] text-zinc-400 font-medium uppercase tracking-wide",children:"Audio Request"})]})]}),(0,b.jsxs)("div",{className:"flex gap-2",children:[(0,b.jsx)("button",{onClick:()=>O(!1),className:"p-2 bg-red-500 rounded-xl hover:bg-red-600 transition-colors",children:(0,b.jsx)(g.X,{size:18})}),(0,b.jsx)("button",{onClick:()=>{O(!1),M(!0)},className:"p-2 bg-green-500 rounded-xl hover:bg-green-600 transition-colors",children:(0,b.jsx)(k.Phone,{size:18})})]})]})}),(0,b.jsxs)(d.motion.div,{initial:{scale:.9,y:20},animate:{scale:1,y:0},exit:{scale:.9,y:20},className:"bg-white w-full h-full md:h-[650px] md:max-w-lg md:rounded-[3rem] shadow-3xl overflow-hidden flex flex-col relative",onClick:a=>a.stopPropagation(),children:[(0,b.jsx)(e.AnimatePresence,{children:L&&(0,b.jsx)(d.motion.div,{initial:{opacity:0},animate:{opacity:1},exit:{opacity:0},className:"absolute inset-0 z-50 bg-zinc-900",children:(0,b.jsx)(u,{roomId:K,userId:w,otherUserId:w===o?.toString()?p?.toString():o?.toString(),isInitiator:!N&&!P,incomingSignal:P,onEnd:()=>{M(!1),Q(null),O(!1)}})})}),(0,b.jsxs)("div",{className:"bg-zinc-900 p-4 md:p-8 text-white flex items-center justify-between",children:[(0,b.jsxs)("div",{className:"flex items-center gap-3 md:gap-4",children:[(0,b.jsx)("div",{className:"w-10 h-10 md:w-12 md:h-12 bg-white/10 rounded-xl md:rounded-2xl flex items-center justify-center border border-white/5",children:(0,b.jsx)(j.UserCheck,{className:"text-green-400",size:20})}),(0,b.jsxs)("div",{children:[(0,b.jsx)("h3",{className:"text-base md:text-lg font-black tracking-tight",children:"buyer"===s?q:r}),(0,b.jsxs)("div",{className:"flex items-center gap-2",children:[(0,b.jsx)("div",{className:`w-1.5 h-1.5 md:w-2 md:h-2 rounded-full ${F?"bg-green-500 animate-pulse":"bg-red-500"}`}),(0,b.jsx)("span",{className:"text-[9px] md:text-[10px] font-black uppercase tracking-widest text-zinc-400",children:F?"Negotiation Channel":"Reconnecting..."})]})]})]}),(0,b.jsxs)("div",{className:"flex gap-2",children:[(0,b.jsx)("button",{onClick:()=>{M(!0)},className:"p-2.5 md:p-3 bg-green-600 hover:bg-green-500 rounded-xl transition-colors shadow-lg shadow-green-900/40",title:"Start Call",children:(0,b.jsx)(k.Phone,{size:16})}),(0,b.jsx)("button",{onClick:t,className:"p-2.5 md:p-3 bg-white/10 hover:bg-white/20 rounded-xl transition-colors",children:(0,b.jsx)(g.X,{size:16})})]})]}),(0,b.jsxs)("div",{className:"flex-1 overflow-y-auto p-4 md:p-8 space-y-4 bg-zinc-50/50",ref:H,children:[0===x.length&&(0,b.jsxs)("div",{className:"text-center py-10 space-y-4",children:[(0,b.jsx)("div",{className:"w-16 h-16 bg-white rounded-full flex items-center justify-center mx-auto shadow-sm",children:(0,b.jsx)(h.MessageSquare,{className:"text-zinc-200",size:32})}),(0,b.jsx)("p",{className:"text-zinc-400 text-xs font-bold uppercase tracking-widest",children:"Start negotiating for bulk rates"})]}),x.map((a,c)=>(0,b.jsx)(d.motion.div,{initial:{opacity:0,x:a.senderId?.toString()===w?20:-20},animate:{opacity:1,x:0},className:`flex ${a.senderId?.toString()===w?"justify-end":"justify-start"}`,children:(0,b.jsxs)("div",{className:`max-w-[80%] p-4 rounded-2xl shadow-sm ${a.senderId?.toString()===w?"bg-zinc-900 text-white rounded-br-none":"bg-white text-zinc-800 border border-zinc-100 rounded-bl-none"}`,children:[(0,b.jsx)("p",{className:"text-sm font-medium leading-relaxed",children:a.text}),(0,b.jsx)("span",{className:"text-[9px] opacity-50 block mt-2 text-right font-black uppercase",children:a.time})]})},c))]}),(0,b.jsxs)("div",{className:"px-4 md:px-8 pb-3 md:pb-4 bg-zinc-50/50",children:[(0,b.jsxs)("div",{className:"flex items-center justify-between mb-2 md:mb-3",children:[(0,b.jsx)("span",{className:"text-[9px] font-black uppercase tracking-widest text-zinc-400",children:"AI Negotiation Expert"}),(0,b.jsxs)(d.motion.button,{whileTap:{scale:.95},onClick:S,disabled:B,className:"text-[9px] font-black bg-green-100 text-green-700 px-3 py-1 rounded-full flex items-center gap-1 border border-green-200",children:[(0,b.jsx)(i.Sparkle,{size:10}),B?"Thinking...":"Get Advise"]})]}),(0,b.jsx)("div",{className:"flex gap-2 overflow-x-auto pb-2 scrollbar-hide",children:D.map((a,c)=>(0,b.jsx)("button",{onClick:()=>A(a),className:"whitespace-nowrap px-3 md:px-4 py-2 bg-white border border-zinc-200 rounded-xl text-[10px] md:text-xs font-bold text-zinc-600 hover:border-green-500 hover:text-green-600 transition-all shadow-sm",children:a},c))})]}),(0,b.jsx)("div",{className:"p-4 md:p-8 bg-white border-t border-zinc-100",children:(0,b.jsxs)("div",{className:"flex gap-3 md:gap-4",children:[(0,b.jsx)("input",{type:"text",placeholder:"Propose a rate...",className:"flex-1 bg-zinc-50 px-4 md:px-6 py-3 md:py-4 rounded-xl md:rounded-2xl outline-none focus:ring-2 focus:ring-green-500/20 focus:border-green-500 border border-zinc-100 font-bold text-sm transition-all",value:z,onChange:a=>A(a.target.value),onKeyDown:a=>"Enter"===a.key&&R()}),(0,b.jsx)(d.motion.button,{whileHover:{scale:1.05},whileTap:{scale:.95},onClick:R,className:"bg-green-600 text-white p-3 md:p-4 rounded-xl md:rounded-2xl shadow-xl shadow-green-600/20 hover:bg-green-700 transition-colors",children:(0,b.jsx)(f.Send,{size:20})})]})})]})]})}a.s(["default",()=>v],499657)}];

//# sourceMappingURL=_0bc5ae47._.js.map