module.exports=[988910,a=>{"use strict";var b=a.i(187924),c=a.i(83490),d=a.i(400210);let e=(0,a.i(170106).default)("package-search",[["path",{d:"M21 10V8a2 2 0 0 0-1-1.73l-7-4a2 2 0 0 0-2 0l-7 4A2 2 0 0 0 3 8v8a2 2 0 0 0 1 1.73l7 4a2 2 0 0 0 2 0l2-1.14",key:"e7tb2h"}],["path",{d:"m7.5 4.27 9 5.15",key:"1c824w"}],["polyline",{points:"3.29 7 12 12 20.71 7",key:"ousv84"}],["line",{x1:"12",x2:"12",y1:"22",y2:"12",key:"a4e8g8"}],["circle",{cx:"18.5",cy:"15.5",r:"2.5",key:"b5zd12"}],["path",{d:"M20.27 17.27 22 19",key:"1l4muz"}]]);var f=a.i(591965),g=a.i(50944),h=a.i(346271),i=a.i(262036),j=a.i(572131),k=a.i(405784),l=a.i(767552),m=a.i(911156),n=a.i(124987),o=a.i(883497),p=a.i(410227),q=a.i(941675),r=a.i(304334),s=a.i(104416),t=a.i(963519),u=a.i(468211),v=a.i(808406),w=a.i(571987),x=a.i(212469);let y=function({order:a}){let[c,d]=(0,j.useState)(!1),[e,f]=(0,j.useState)(a.status||"pending"),i=(0,g.useRouter)();return(0,j.useEffect)(()=>{let b=(0,x.getSocket)();return b.on("order-status-update",b=>{b.orderId.toString()===a?._id?.toString()&&f(b.status)}),()=>{b.off("order-status-update")}},[a?._id]),(0,b.jsxs)(h.motion.div,{layout:!0,className:"bg-white rounded-[2.5rem] border border-zinc-100 shadow-2xl shadow-green-900/5 group overflow-hidden transition-all",children:[(0,b.jsxs)("div",{className:"p-8 md:p-10 flex flex-col md:flex-row justify-between items-start md:items-center gap-6 border-b border-zinc-50",children:[(0,b.jsxs)("div",{className:"flex items-center gap-6",children:[(0,b.jsx)("div",{className:`w-16 h-16 rounded-[1.5rem] flex items-center justify-center transition-colors ${"delivered"===e?"bg-green-600 text-white":"bg-zinc-900 text-white"}`,children:(0,b.jsx)(o.Package,{size:32})}),(0,b.jsxs)("div",{className:"space-y-1",children:[(0,b.jsxs)("div",{className:"flex items-center gap-2",children:[(0,b.jsxs)("h3",{className:"text-3xl font-black text-zinc-900 tracking-tighter",children:["Batch ",(0,b.jsxs)("span",{className:"text-zinc-400",children:["#",a?._id?.toString()?.slice(-6)]})]}),"delivered"===e&&(0,b.jsx)("div",{className:"bg-green-50 p-1 rounded-full text-green-600",children:(0,b.jsx)(s.ShieldCheck,{size:20})})]}),(0,b.jsxs)("div",{className:"flex items-center gap-2 text-zinc-400 font-bold text-xs uppercase tracking-widest",children:[(0,b.jsx)(q.Calendar,{size:12}),(0,b.jsx)("span",{children:new Date(a.createdAt).toLocaleDateString("en-IN",{day:"numeric",month:"short",year:"numeric"})})]})]})]}),(0,b.jsxs)("div",{className:"flex flex-wrap items-center gap-3",children:[(0,b.jsx)("div",{className:`px-4 py-2 rounded-2xl text-[10px] font-black uppercase tracking-widest border-2 ${(a=>{switch(a){case"pending":return"bg-amber-50 text-amber-600 border-amber-100";case"out of delivery":return"bg-blue-50 text-blue-600 border-blue-100";case"delivered":return"bg-green-50 text-green-600 border-green-100";default:return"bg-zinc-50 text-zinc-600 border-zinc-100"}})(e)}`,children:e}),a.isPaid&&(0,b.jsx)("div",{className:"bg-green-600 text-white px-4 py-2 rounded-2xl text-[10px] font-black uppercase tracking-widest",children:"Paid"})]})]}),(0,b.jsxs)("div",{className:"p-8 md:p-10 grid grid-cols-1 lg:grid-cols-2 gap-10 items-start",children:[(0,b.jsxs)("div",{className:"space-y-8",children:[(0,b.jsxs)("div",{className:"space-y-4",children:[(0,b.jsx)("div",{className:"text-[10px] font-black uppercase text-zinc-400 tracking-[0.2em] ml-1",children:"Fulfillment Details"}),(0,b.jsxs)("div",{className:"grid grid-cols-1 gap-4",children:[(0,b.jsxs)("div",{className:"flex items-start gap-4 p-5 bg-zinc-50 rounded-[1.5rem] border border-zinc-100",children:[(0,b.jsx)("div",{className:"w-10 h-10 bg-white rounded-xl flex items-center justify-center text-green-600 shadow-sm",children:(0,b.jsx)(n.MapPin,{size:20})}),(0,b.jsxs)("div",{className:"space-y-1",children:[(0,b.jsx)("div",{className:"text-[10px] font-black text-zinc-400 uppercase tracking-widest",children:"Drop Location"}),(0,b.jsx)("p",{className:"text-sm font-bold text-zinc-700 leading-snug",children:a.address.fullAddress})]})]}),(0,b.jsxs)("div",{className:"flex items-start gap-4 p-5 bg-zinc-50 rounded-[1.5rem] border border-zinc-100",children:[(0,b.jsx)("div",{className:"w-10 h-10 bg-white rounded-xl flex items-center justify-center text-zinc-900 shadow-sm",children:"online"===a.paymentMethod?(0,b.jsx)(m.CreditCard,{size:20}):(0,b.jsx)(r.IndianRupee,{size:20})}),(0,b.jsxs)("div",{className:"space-y-1",children:[(0,b.jsx)("div",{className:"text-[10px] font-black text-zinc-400 uppercase tracking-widest",children:"Payment Method"}),(0,b.jsx)("p",{className:"text-sm font-black text-zinc-900 uppercase tracking-wider",children:"online"===a.paymentMethod?"Secured Online":"Cash on Delivery"})]})]})]})]}),"delivered"!==e&&(0,b.jsxs)(h.motion.div,{initial:{opacity:0,scale:.95},animate:{opacity:1,scale:1},className:"p-6 bg-zinc-900 rounded-[2rem] text-white shadow-2xl shadow-zinc-900/20 relative overflow-hidden group",children:[(0,b.jsx)("div",{className:"absolute top-0 right-0 w-32 h-32 bg-green-500/10 rounded-full blur-2xl -mr-16 -mt-16"}),(0,b.jsx)("div",{className:"relative",children:a.assignedDeliveryBoy?(0,b.jsxs)(b.Fragment,{children:[(0,b.jsxs)("div",{className:"flex items-center gap-4 mb-6",children:[(0,b.jsx)("div",{className:"w-12 h-12 bg-white/10 rounded-2xl flex items-center justify-center text-green-400",children:(0,b.jsx)(u.Navigation2,{size:24})}),(0,b.jsxs)("div",{children:[(0,b.jsx)("div",{className:"text-[10px] font-black uppercase text-zinc-500 tracking-widest leading-none",children:"On Route with"}),(0,b.jsx)("div",{className:"text-xl font-black tracking-tight mt-1",children:a.assignedDeliveryBoy.name})]})]}),a.deliveryOtp&&(0,b.jsxs)("div",{className:"p-4 bg-white/10 rounded-xl mb-6 border border-white/10 text-center",children:[(0,b.jsx)("div",{className:"text-[10px] uppercase tracking-widest text-zinc-400 font-bold mb-1",children:"Your Delivery OTP"}),(0,b.jsx)("div",{className:"text-4xl font-black text-green-400 tracking-[0.2em]",children:a.deliveryOtp}),(0,b.jsx)("div",{className:"text-[10px] text-zinc-500 mt-1",children:"Share this code with the partner upon arrival."})]}),(0,b.jsxs)("div",{className:"flex items-center gap-4",children:[(0,b.jsxs)("a",{href:`tel:${a.assignedDeliveryBoy.mobile}`,className:"flex-1 bg-white text-zinc-900 py-4 rounded-xl font-black uppercase tracking-widest text-[10px] flex items-center justify-center gap-2 hover:bg-green-600 hover:text-white transition-all",children:[(0,b.jsx)(t.Phone,{size:14}),"Call Partner"]}),(0,b.jsxs)("button",{onClick:()=>i.push(`/user/track-order/${a._id}`),className:"flex-1 bg-green-600 text-white py-4 rounded-xl font-black uppercase tracking-widest text-[10px] flex items-center justify-center gap-2 hover:bg-green-500 shadow-xl shadow-green-600/20 transition-all",children:[(0,b.jsx)(p.Truck,{size:14}),"Live Track"]})]})]}):(0,b.jsxs)("div",{className:"flex flex-col items-center justify-center py-6 text-center space-y-4",children:[(0,b.jsx)("div",{className:"w-16 h-16 border-4 border-green-500/30 border-t-green-500 rounded-full animate-spin"}),(0,b.jsxs)("div",{children:[(0,b.jsx)("h4",{className:"font-bold text-lg mb-1",children:"Assigning Partner"}),(0,b.jsx)("p",{className:"text-zinc-500 text-xs max-w-[200px] mx-auto",children:"We're finding the best delivery partner for your batch..."})]})]})})]})]}),(0,b.jsxs)("div",{className:"space-y-6",children:[(0,b.jsxs)("div",{className:"flex items-center justify-between px-1",children:[(0,b.jsx)("div",{className:"text-[10px] font-black uppercase text-zinc-400 tracking-[0.2em]",children:"Batch Contents"}),(0,b.jsxs)("div",{className:"text-sm font-black text-zinc-900 tracking-tighter",children:["Total: ₹",a.totalAmount]})]}),(0,b.jsxs)("div",{className:"space-y-4",children:[Array.isArray(a?.items)&&a.items.slice(0,c?a.items.length:2).map((a,c)=>(0,b.jsxs)("div",{className:"flex items-center justify-between p-4 bg-white border border-zinc-100 rounded-2xl shadow-sm hover:border-green-200 transition-colors",children:[(0,b.jsxs)("div",{className:"flex items-center gap-4",children:[(0,b.jsx)("div",{className:"w-16 h-16 bg-zinc-50 rounded-xl relative overflow-hidden border border-zinc-100",children:(0,b.jsx)(w.default,{src:a.image,alt:a.name,fill:!0,className:"object-contain p-2"})}),(0,b.jsxs)("div",{children:[(0,b.jsx)("h4",{className:"font-black text-zinc-900 text-sm leading-tight",children:a.name}),(0,b.jsxs)("p",{className:"text-[10px] font-bold text-zinc-400 uppercase tracking-widest",children:[a.quantity," x ",a.unit]})]})]}),(0,b.jsx)("div",{className:"text-right",children:(0,b.jsxs)("div",{className:"text-sm font-black text-zinc-900 tracking-tight",children:["₹",Number(a.price)*a.quantity]})})]},c)),a.items.length>2&&(0,b.jsxs)("button",{onClick:()=>d(!c),className:"w-full py-4 text-xs font-black uppercase tracking-widest text-zinc-400 hover:text-green-600 transition-colors flex items-center justify-center gap-2 bg-zinc-50/50 rounded-2xl",children:[c?(0,b.jsx)(l.ChevronUp,{size:16}):(0,b.jsx)(k.ChevronDown,{size:16}),c?"Show Less":`Show ${a.items.length-2} More Items`]})]}),"delivered"===e&&(0,b.jsxs)("div",{className:"p-6 bg-green-50 border border-green-100 rounded-[2rem] flex items-center gap-6",children:[(0,b.jsx)("div",{className:"w-12 h-12 bg-white rounded-2xl flex items-center justify-center text-green-600 shadow-sm border border-green-100",children:(0,b.jsx)(v.Sparkles,{size:24})}),(0,b.jsxs)("div",{children:[(0,b.jsx)("h4",{className:"font-black text-green-700 tracking-tight",children:"Order Fulfilled"}),(0,b.jsx)("p",{className:"text-xs text-green-600/70 font-medium",children:"Thank you for supporting sustainable agriculture."})]})]})]})]})]})};var z=a.i(88729),A=a.i(214174);a.s(["default",0,function(){let a=(0,g.useRouter)(),{userData:k}=(0,A.useSelector)(a=>a.user),[l,m]=(0,j.useState)(),[n,o]=(0,j.useState)(!0);return((0,j.useEffect)(()=>{(async()=>{try{let a=await c.default.get("/api/user/my-orders");m(a.data)}catch(a){console.error(a)}finally{o(!1)}})()},[]),(0,j.useEffect)(()=>{let a=(0,x.getSocket)();return a.on("order-assigned",({orderId:a,assignedDeliveryBoy:b})=>{m(c=>c?.map(c=>c._id===a?{...c,assignedDeliveryBoy:b}:c))}),()=>{a.off("order-assigned")}},[]),n)?(0,b.jsx)("div",{className:"min-h-screen bg-zinc-50 flex items-center justify-center",children:(0,b.jsx)("div",{className:"w-12 h-12 border-4 border-green-600 border-t-transparent rounded-full animate-spin"})}):(0,b.jsxs)("div",{className:"min-h-screen bg-zinc-50 selection:bg-green-100 selection:text-green-900",children:[(0,b.jsx)(z.default,{user:k}),(0,b.jsxs)("div",{className:"max-w-4xl mx-auto px-6 py-32",children:[(0,b.jsxs)("div",{className:"flex flex-col md:flex-row md:items-end justify-between mb-16 gap-8",children:[(0,b.jsxs)("div",{className:"space-y-4",children:[(0,b.jsxs)(h.motion.div,{initial:{opacity:0,x:-20},animate:{opacity:1,x:0},className:"flex items-center gap-2 text-green-600 font-black uppercase tracking-[0.3em] text-[10px] bg-green-50 w-fit px-3 py-1 rounded-lg border border-green-100",children:[(0,b.jsx)(f.History,{size:14}),(0,b.jsx)("span",{children:"Procurement History"})]}),(0,b.jsxs)(h.motion.h1,{initial:{opacity:0,y:10},animate:{opacity:1,y:0},className:"text-5xl md:text-6xl font-black text-zinc-900 tracking-tighter leading-none",children:["My ",(0,b.jsx)("span",{className:"text-zinc-400",children:"Orders."})]}),(0,b.jsx)("p",{className:"text-zinc-500 max-w-lg font-medium text-lg",children:"Track your millet batches from the farm to your doorstep in real-time."})]}),(0,b.jsxs)(h.motion.button,{whileHover:{scale:1.05},whileTap:{scale:.95},onClick:()=>a.push("/"),className:"bg-white p-4 rounded-3xl shadow-xl shadow-green-900/5 border border-zinc-100 flex items-center gap-4 group transition-all hover:border-green-200",children:[(0,b.jsx)("div",{className:"w-12 h-12 bg-green-50 rounded-2xl flex items-center justify-center text-green-600 group-hover:bg-green-600 group-hover:text-white transition-colors",children:(0,b.jsx)(d.ArrowLeft,{size:20})}),(0,b.jsxs)("div",{className:"text-left pr-4",children:[(0,b.jsx)("div",{className:"text-[10px] font-black uppercase text-zinc-400",children:"Continue"}),(0,b.jsx)("div",{className:"text-sm font-black text-zinc-900",children:"Shopping"})]})]})]}),l?.length===0?(0,b.jsxs)(h.motion.div,{initial:{opacity:0,scale:.95},animate:{opacity:1,scale:1},className:"py-32 flex flex-col items-center text-center bg-white rounded-[3.5rem] border-2 border-dashed border-zinc-200",children:[(0,b.jsx)("div",{className:"w-24 h-24 bg-zinc-50 rounded-full flex items-center justify-center mb-8 shadow-inner",children:(0,b.jsx)(e,{size:48,className:"text-zinc-200"})}),(0,b.jsx)("h2",{className:"text-3xl font-black text-zinc-800 mb-2 tracking-tight",children:"No Batches Found"}),(0,b.jsx)("p",{className:"text-zinc-400 font-medium max-w-xs mx-auto",children:"You haven't secured any millet harvests yet. Explore the marketplace to start your journey."}),(0,b.jsx)("button",{onClick:()=>a.push("/"),className:"mt-10 bg-zinc-900 text-white px-10 py-5 rounded-[1.5rem] font-black uppercase tracking-widest text-sm shadow-2xl shadow-zinc-900/20 hover:bg-green-600 transition-all",children:"Start Exploring"})]}):(0,b.jsx)("div",{className:"space-y-8",children:(0,b.jsx)(i.AnimatePresence,{children:l?.map((a,c)=>(0,b.jsx)(h.motion.div,{initial:{opacity:0,y:30},animate:{opacity:1,y:0},transition:{delay:.1*c},children:(0,b.jsx)(y,{order:a})},a._id))})})]})]})}],988910)}];

//# sourceMappingURL=src_app_user_my-orders_page_tsx_f100baad._.js.map